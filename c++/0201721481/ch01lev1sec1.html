<html>
<head>
  <meta name="generator" content="HTML Tidy for Windows (vers 12 April 2005), see www.w3.org">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <title>Section 1.1.  Writing a Simple C++ Program</title>
  <link rel="STYLESHEET" type="text/css" href="images/style.css" >
  <link rel="STYLESHEET" type="text/css" href="images/docsafari.css" >
</head>

<body>
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td>
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="toc.html" ><img src="images/teamlib.gif"  width="62" height="15" border="0" align="absmiddle" alt="Team LiB"></a>
        </div>
      </td>

      <td align="right">
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="ch01.html" ><img src="images/previous.gif"  width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="ch01lev1sec2.html" ><img src="images/next.gif"  width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
        </div>
      </td>
    </tr>
  </table><br>

  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td valign="top">
        <a name="ch01lev1sec1"></a>

        <h3 class="docSection1Title">1.1. Writing a Simple C++ Program</h3>
        <h3 class="docSection1Title">1.1. 编写简单的 C++ 程序</h3>

        <p class="docText">Every C++ program contains one or more <i><a name="ch01term19"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_19" >functions</a></i>, one of which must be named <span class="docEmphStrong"><tt>main</tt></span>. A function consists of a sequence of <span class="docEmphBoldItalic"><a name="ch01term41"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_41" >statements</a></span> that perform the work of the function. The operating system executes a program by calling the function named <tt>main</tt>. That function executes its constituent statements and returns a value to the operating system.</p>

        <p class="docText">每个 C++ 程序都包含一个或多个<i><a name="ch01term19"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_19" >函数</a></i>，而且必须有一个命名为 <span class="docEmphStrong"><tt>main</tt></span>。函数由执行函数功能的<span class="docEmphBoldItalic"><a name="ch01term41"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_41" >语句</a></span>序列组成。操作系统通过调用 <tt>main</tt> 函数来执行程序，<tt>main</tt> 函数则执行组成自己的语句并返回一个值给操作系统。</p>

        <p class="docText">Here is a simple version of <tt>main</tt> does nothing but return a value:</p>

        <p class="docText">下面是一个简单的 <tt>main</tt> 函数，它不执行任何功能，只是返回一个值：</p>
        <pre>
    int main()
    {
        return 0;
    }
</pre>

        <p class="docText">The operating system uses the value returned by <tt>main</tt> to determine whether the program succeeded or failed. A return value of 0 indicates success.</p>

        <p class="docText">操作系统通过 <tt>main</tt> 函数返回的值来确定程序是否成功执行完毕。返回 0 值表明程序程序成功执行完毕。</p>

        <p class="docText">The <tt>main</tt> function is special in various ways, the most important of which are that the function must exist in every C++ program and it is the (only) function that the operating system explicitly calls.</p>

        <p class="docText"><tt>main</tt> 函数在很多方面都比较特别，其中最重要的是每个 C++ 程序必须含有 <tt>main</tt> 函数，且 <tt>main</tt> 函数是（唯一）被操作系统显式调用的函数。</p>

	<a name="idd1e697"></a><a name="idd1e700"></a><a name="idd1e705"></a><a name="idd1e708"></a><a name="idd1e711"></a><a name="idd1e714"></a><a name="idd1e717"></a><a name="idd1e720"></a><a name="idd1e725"></a><a name="idd1e728"></a><a name="idd1e731"></a><a name="idd1e734"></a><a name="idd1e737"></a><a name="idd1e740"></a><a name="idd1e743"></a><a name="idd1e746"></a><a name="idd1e752"></a><a name="idd1e755"></a><a name="idd1e758"></a><a name="idd1e764"></a><a name="idd1e769"></a><a name="idd1e774"></a>
        <p class="docText">We define <tt>main</tt> the same way we define other functions. A function definition specifies four elements: the <span class="docEmphBoldItalic"><a name="ch01term35"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_35" >return type</a></span>, the <span class="docEmphBoldItalic"><a name="ch01term21"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_21" >function name</a></span>, a (possibly empty) <span class="docEmphBoldItalic"><a name="ch01term33"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_33" >parameter list</a></span> enclosed in parentheses, and the <span class="docEmphBoldItalic"><a name="ch01term20"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_20" >function body</a></span>. The <tt>main</tt> function may have only a restricted set of parameters. As defined here, the parameter list is empty; <a class="docLink" href="ch07lev1sec2.html#ch07lev2sec11" >Section 7.2.6</a> (p. <a class="docLink" href="ch07lev1sec2.html#ch07lev2sec11" >243</a>) will cover the other parameters that can be defined for <tt>main</tt>.</p>

        <p class="docText">定义 <tt>main</tt> 函数和定义其他函数一样。定义函数必须指定 4 个元素：返回类型、函数名、圆括号内的形参表（可能为空）和函数体。<tt>main</tt> 函数的形参个数是有限的。本例中定义的 <tt>main</tt> 函数形参表为空。<a class="docLink" href="ch07lev1sec2.html#ch07lev2sec11" >第 7.2.6 节</a>将介绍 <tt>main</tt> 函数中可以定义的其他形参。</p>

        <p class="docText">The <tt>main</tt> function is required to have a return type of <tt>int</tt>, which is the type that represents integers. The <tt>int</tt> type is a <b><a name="ch01term4"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_04" >built-in type</a></b>, which means that the type is defined by the language.</p>

        <p class="docText"><tt>main</tt> 函数的返回值必须是 <tt>int</tt> 型，该类型表示整数。<tt>int</tt> 类型是<b><a name="ch01term4"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_04" >内置类型</a></b>，即该类型是由 C++ 语言定义的。</p>

        <p class="docText">The final part of a function definition, the function body, is a <span class="docEmphBoldItalic"><a name="ch01term2"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_02" >block</a></span> of statements starting with an open <b><a name="ch01term13"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_13" >curly brace</a></b> and ending with a close curly:</p>

        <p class="docText">函数体函数定义的最后部分，是以花括号开始并以<b><a name="ch01term13"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_13" >花括号</a></b>结束的语句<span class="docEmphBoldItalic"><a name="ch01term2"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_02" >块</a></span>：</p>
        <pre>
    {
        return 0;
    }
</pre>

        <p class="docText">The only statement in our program is a <tt>return</tt>, which is a statement that terminates a function.</p>

        <p class="docText">例中唯一的语句就是 <tt>return</tt>，该语句终止函数。</p><a name="ch01note01"></a>

        <div class="docNote">
          <table width="90%" border="0" cellspacing="0" cellpadding="1">
            <tr>
              <td width="60" valign="top"><img border="0" alt="" align="LEFT" width="50" height="54" src="http://shouce.jb51.net/c++/0201721481/images/0201721481/graphics/note.jpg;400478" ></td>

              <td valign="top">
                <p class="docText">Note the semicolon at the end of the <tt>return</tt> statement. Semicolons mark the end of most statements in C++. They are easy to overlook, but when forgotten can lead to mysterious compiler error messages.</p>
              </td>
            </tr>

            <tr>
              <td width="60" valign="top"></td>

              <td valign="top">
                <p class="docText">注意 <tt>return</tt> 语句后面的分号。在 C++ 中多数语句以分号作为结束标记。分号很容易被忽略，而漏写分号将会导致莫名其妙的编译错误信息。</p>
              </td>
            </tr>
          </table>
        </div>

        <p class="docText">When the <tt>return</tt> includes a value such as <tt>0</tt>, that value is the return value of the function. The value returned must have the same type as the return type of the function or be a type that can be converted to that type. In the case of <tt>main</tt> the return type must be <tt>int</tt>, and the value <tt>0</tt> is an <tt>int</tt>.</p>

        <p class="docText">当 <tt>return</tt> 带上一个值（如 <tt>0</tt>）时，这个值就是函数的返回值。返回值类型必须和函数的返回类型相同，或者可以转换成函数的返回类型。对于 <tt>main</tt> 函数，返回类型必须是 <tt>int</tt> 型，<tt>0</tt> 是 <tt>int</tt> 型的。</p>

        <p class="docText">On most systems, the return value from <tt>main</tt> is a status indicator. A return value of <tt>0</tt> indicates the successful completion of <tt>main</tt>. Any other return value has a meaning that is defined by the operating system. Usually a nonzero return indicates that an error occurred. Each operating system has its own way of telling the user what <tt>main</tt> returned.</p>

        <p class="docText">在大多数系统中，<tt>main</tt> 函数的返回值是一个状态指示器。返回值 <tt>0</tt> 往往表示 <tt>main</tt> 函数成功执行完毕。任何其他非零的返回值都有操作系统定义的含义。通常非零返回值表明有错误出现。每一种操作系统都有自己的方式告诉用户 <tt>main</tt> 函数返回什么内容。</p><a name="ch01lev2sec1"></a>

        <h4 class="docSection2Title">1.1.1. Compiling and Executing Our Program</h4>
        <h4 class="docSection2Title">1.1.1. 编译与执行程序</h4>

        <p class="docText">Having written the program, we need to compile it. How you compile a program depends on your operating system and compiler. For details on how your particular compiler works, you'll need to check the reference manual or ask a knowledgeable colleague.</p>

        <p class="docText">程序编写完后需要进行编译。如何进行编译，与具体操作系统和编译器有关。你需要查看有关参考手册或者询问有经验的同事，以了解所用的编译器的工作细节。</p>

        <p class="docText">Many PC-based compilers are run from an integrated development environment (IDE) that bundles the compiler with associated build and analysis tools. These environments can be a great asset in developing complex programs but require a fair bit of time to learn how to use effectively. Most of these environments include a point-and-click interface that allows the programmer to write a program and use various menus to compile and execute the program. Learning how to use such environments is well beyond the scope of this book.</p>

        <p class="docText">许多基于 PC 的编译器都在集成开发环境（IDE）中运行，IDE 将编译器与相关的构建和分析工具绑定在一起。这些环境在开发复杂程序时非常有用，但掌握起来需要花费一点时间。通常这些环境包含点击式界面，程序员在此界面下可以编写程序，并使用各种菜单来编译与执行程序本书不介绍怎样使用这些环境。</p>

<a name="idd1e915"></a><a name="idd1e920"></a><a name="idd1e925"></a><a name="idd1e930"></a><a name="idd1e935"></a><a name="idd1e939"></a><a name="idd1e944"></a><a name="idd1e949"></a><a name="idd1e952"></a><a name="idd1e957"></a><a name="idd1e962"></a><a name="idd1e966"></a><a name="idd1e969"></a><a name="idd1e972"></a><a name="idd1e975"></a><a name="idd1e978"></a><a name="idd1e983"></a>
        <p class="docText">Most compilers, including those that come with an IDE, provide a command-line interface. Unless you are already familiar with using your compiler's IDE, it can be easier to start by using the simpler, command-line interface. Using the command-line interface lets you avoid the overhead of learning the IDE before learning the language.</p>

        <p class="docText">大多数编译器，包括那些来自 IDE 的，都提供了命令行界面。除非你已经很熟悉你的 IDE，否则从使用简单的命令行界面开始可能更容易些。这样可以避免在学习语言之前得先去学习 IDE。</p><a name="ch01lev3sec1"></a>

        <h5 class="docSection3Title">Program Source File Naming Convention</h5>
        <h5 class="docSection3Title">程序源文件命名规范</h5>

        <p class="docText">Whether we are using a command-line interface or an IDE, most compilers expect that the program we want to compile will be stored in a file. Program files are referred to as <b><a name="ch01term36"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_36" >source files</a></b>. On most systems, a source file has a name that consists of two parts: a file namefor example, <tt>prog1</tt>and a file suffix. By convention, the suffix indicates that the file is a program. The suffix often also indicates what language the program is written in and selects which compiler to run. The system that we used to compile the examples in this book treats a file with a suffix of <tt>.cc</tt> as a C++ program and so we stored this program as</p>

        <p class="docText">不管我们使用命令行界面还是 IDE，大多数编译器希望待编译的程序保存在文件中。程序文件称作<b><a name="ch01term36"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_36" >源文件</a></b>。大多数系统中，源文件的名字由文件名（如 <tt>prog1</tt>）和文件后缀两部分组成。依据惯例，文件后缀表明该文件是程序。文件后缀通常也表明程序是用什么语言编写的，以及选择哪一种编译器运行。我们用来编译本书实例的系统将带有后缀 <tt>.cc</tt> 的文件视为 C++ 程序，因此我们将该程序保存为：</p>
        <pre>
    prog1.cc
</pre>

        <p class="docText">The suffix for C++ program files depends on which compiler you're running. Other conventions include</p>

        <p class="docText">C++ 程序文件的后缀与运行的具体编译器有关。其他的形式还包括。</p>
        <pre>
    prog1.cxx
    prog1.cpp
    prog1.cp
    prog1.C
</pre><br>
        <a name="ch01sb01"></a>

        <table cellspacing="0" width="90%" border="1" cellpadding="5">
          <tr>
            <td>
              <h2 class="docSidebarTitle">Invoking the GNU or Microsoft Compilers</h2>
              <h2 class="docSidebarTitle">调用 GNU 或微软编译器</h2>

              <p class="docText"><span class="docEmphStrong">The command used to invoke the C++ compiler varies across compilers and operating systems. The most common compilers are the GNU compiler and the Microsoft Visual Studio compilers. By default the command to invoke the GNU compiler is <tt>g++</tt></span>:</p>

              <p class="docText">调用 C++ 编译器的命令因编译器和操作系统的不同而不同，常用的编译器是 GNU 编译器和微软 Visual Studio 编译器。调用 GNU 编译器的默认命令是 <tt>g++</tt>：</p>
              <pre>
    <span class="docEmphStrong">$ g++ prog1.cc -o prog1</span>
</pre>

              <p class="docText"><span class="docEmphStrong">where <tt>$</tt> is the system prompt. This command generates an executable file named <tt>prog1</tt> or <tt>prog1.exe</tt>, depending on the operating system. On UNIX, executable files have no suffix; on Windows, the suffix is <tt>.exe</tt>. The <tt>-o prog1</tt> is an argument to the compiler and names the file in which to put the executable file. If the <tt>-o prog1</tt> is omitted, then the compiler generates an executable named <tt>a.out</tt> on UNIX systems and <tt>a.exe</tt> on Windows.</span></p>

              <p class="docText">这里的 <tt>$</tt> 是系统提示符。这个命令产生一个为 <tt>prog1</tt> 或 <tt>prog1.exe</tt> 的可执行文件。在 UNIX 系统下，可执行文件没有后缀；而在 Windows 下，后缀为 <tt>.exe</tt>。<tt>-o prog1</tt> 是编译器参数以及用来存放可执行文件的文件名。如果省略 <tt>-o prog1</tt>，那么编译器在 UNIX 系统下产生名为 <tt>a.out</tt> 而在 Windows 下产生名为 <tt>a.exe</tt> 的可执行文件。</p>

              <p class="docText"><span class="docEmphStrong">The Microsoft compilers are invoked using the command <tt>cl</tt>:</span></p>

              <p class="docText">微软编译器采用命令 <tt>cl</tt> 来调用：</p>
              <pre>
    <span class="docEmphStrong">C:\directory&gt; cl -GX prog1.cpp</span>
</pre>

              <p class="docText"><span class="docEmphStrong">where <tt>C:directory&gt;</tt> is the system prompt and <tt>directory</tt> is the name of the current directory. The command to invoke the compiler is <tt>cl</tt>, and <tt>-GX</tt> is an option that is required for programs compiled using the command-line interface. The Microsoft compiler automatically generates an executable with a name that corresponds to the source file name. The executable has the suffix <tt>.exe</tt> and the same name as the source file name. In this case, the executable is named <tt>prog1.exe</tt>.</span></p>

              <p class="docText">这里的 <tt>C:directory&gt;</tt> 是系统提示符，<tt>directory</tt> 是当前目录名。<tt>cl</tt> 是调用编译器的命令。<tt>-GX</tt> 是一个选项，该选项在使用命令行界面编译器程序时是必需的。微软编译器自动产生与源文件同名的可执行文件，这个可执行文件具有 <tt>.exe</tt> 后缀且与源文件同名。本例中，可执行文件命名为 <tt>prog1.exe</tt>。</p>

              <p class="docText"><span class="docEmphStrong">For further information consult your compiler's user's guide.</span></p>

              <p class="docText">更多的信息请参考你的编译器用户指南。</p>
            </td>
          </tr>
        </table><br>
        <a name="ch01lev3sec2"></a>

        <h5 class="docSection3Title">Running the Compiler from the Command Line</h5>
        <h5 class="docSection3Title">从命令行编译器</h5>

        <p class="docText"><a name="idd1e1125"></a><a name="idd1e1128"></a>If we are using a command-line interface, we will typically compile a program in a console window (such as a shell window on a UNIX system or a Command Prompt window on Windows). Assuming that our <tt>main</tt> program is in a file named <tt>prog1.cc</tt>, we might compile it by using a command such as:</p>

        <p class="docText">如果使用命令行界面，一般在控制台窗口（例如 UNIX 的 shell 窗口或 Windows 的命令提示窗口）编译程序。假设 main 程序在名为 prog1.cc 的文件中，可以使用如下命令来编译：</p>
        <pre>
    <span class="docEmphStrong">$ CC prog1.cc</span>
</pre>

        <p class="docText">where <tt>CC</tt> names the compiler and <tt>$</tt> represents the system prompt. The output of the compiler is an executable file that we invoke by naming it. On our system, the compiler generates the executable in a file named <tt>a.exe</tt>. UNIX compilers tend to put their executables in a file named <tt>a.out</tt>. To run an executable we supply that name at the command-line prompt:</p>

        <p class="docText">这里 CC 是编译器命令名，<tt>$</tt> 表示系统提示符。编译器输出一个可执行文件，我们可以按名调用这个可执行文件。在我们的系统中，编译器产生一个名为 <tt>a.exe</tt> 的可执行文件。UNIX 编译器则会将可执行文件放到一个名为 <tt>a.out</tt> 的文件中。要运行可执行文件，可在命令提示符处给出该文件名：</p>
        <pre>
    <span class="docEmphStrong">$ a.exe</span>
</pre>

        <p class="docText">executes the program we compiled. On UNIX systems you sometimes must also specify which directory the file is in, even if it is in the current directory. In such cases, we would write</p>

        <p class="docText">执行编译过的程序。在 UNIX 系统中，即使在当前目录，有时还必须指定文件所在的目录。这种情况下，键入：</p>
        <pre>
    <span class="docEmphStrong">$ ./a.exe</span>
</pre>

        <p class="docText">The "<tt>.</tt>" followed by a slash indicates that the file is in the current directory.</p>

        <p class="docText">“.”后面的斜杠表明文件处于当前目录下。</p>

        <p class="docText">The value returned from <tt>main</tt> is accessed in a system-dependent manner. On both UNIX and Windows systems, after executing the program, you must issue an appropriate <tt>echo</tt> command. On UNIX systems, we obtain the status by writing</p>

        <p class="docText">访问 <tt>main</tt> 函数的返回值的方式和系统有关。不论 UNIX 还是 Windows 系统，执行程序后，必须发出一个适当的 <tt>echo</tt> 命令。UNIX 系统中，通过键入如下命令获取状态：</p>
        <pre>
    <span class="docEmphStrong">$ echo $?</span>
</pre>

        <p class="docText">To see the status on a Windows system, we write</p>

        <p class="docText">要在 Windows 系统下查看状态，键入</p>
        <pre>
    <span class="docEmphStrong">C:\directory&gt; echo %ERRORLEVEL%</span>
</pre><br>
        <a name="ch01sb02"></a>

        <table cellspacing="0" width="90%" border="1" cellpadding="5">
          <tr>
            <td>
              <h2 class="docSidebarTitle">Exercises Section 1.1.1</h2>

              <blockquote>
                <table border="0" cellspacing="16" cellpadding="0">
                  <tr valign="top">
                    <td align="right" class="docText" width="50"><a name="ch01qa1q1"></a><b>Exercise 1.1:</b></td>

                    <td>
                      <p class="docText">Review the documentation for your compiler and determine what file naming convention it uses. Compile and run the <tt>main</tt> program from page <a class="docLink" href="ch01lev1sec1.html#ch01lev1sec1">2</a>.</p>
                      <p class="docText">查看所用的编译器文档，了解它所用的文件命名规范。编译并运行本节的 main 程序。</p>
                    </td>
                  </tr>

                  <tr valign="top">
                    <td align="right" class="docText" width="50"><a name="ch01qa1q2"></a> <b>Exercise 1.2:</b></td>

                    <td>
                      <p class="docText">Change the program to return <tt>-1</tt>. A return value of <tt>-1</tt> is often treated as an indicator that the program failed. However, systems vary as to how (or even whether) they report a failure from <tt>main</tt>. Recompile and rerun your program to see how your system treats a failure indicator from <tt>main</tt>.</p>
                      <p class="docText">修改程序使其返回 <tt>-1</tt>。返回值 <tt>-1</tt> 通常作为程序运行失败的指示器。然而，系统不同，如何（甚至是否）报告 <tt>main</tt> 函数运行失败也不同。重新编译并再次运行程序，看看你的系统如何处理 <tt>main</tt> 函数的运行失败指示器。</p>
                    </td>
                  </tr>

                </table>
              </blockquote>
            </td>
          </tr>
        </table>
        <a href="21001535.html" ><img src="images/pixel.gif"  alt="" width="1" height="1" border="0"></a>
      </td>
    </tr>
  </table>

  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td>
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="toc.html" ><img src="images/teamlib.gif"  width="62" height="15" border="0" align="absmiddle" alt="Team LiB"></a>
        </div>
      </td>

      <td align="right">
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="ch01.html" ><img src="images/previous.gif"  width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="ch01lev1sec2.html" ><img src="images/next.gif"  width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
        </div>
      </td>
    </tr>
  </table>
</body>
</html>
