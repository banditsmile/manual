<html>
<head>
  <meta name="generator" content="HTML Tidy for Windows (vers 12 April 2005), see www.w3.org">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <title>Chapter 14.  Overloaded Operations and Conversions</title>
  <link rel="STYLESHEET" type="text/css" href="images/style.css" >
  <link rel="STYLESHEET" type="text/css" href="images/docsafari.css" >
</head>

<body>
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td>
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="toc.html" ><img src="images/teamlib.gif"  width="62" height="15" border="0" align="absmiddle" alt="Team LiB"></a>
        </div>
      </td>

      <td align="right">
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="ch13lev1sec7.html" ><img src="images/previous.gif"  width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="ch14lev1sec1.html" ><img src="images/next.gif"  width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
        </div>
      </td>
    </tr>
  </table><br>

  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td valign="top">
        <a name="ch14"></a>

        <h2 class="docChapterTitle">Chapter 14. Overloaded Operations and Conversions</h2>
        <h2 class="docChapterTitle">第十四章 重载操作符与转换</h2>

        <p class="docText"><span class="docEmphStrong">C<span class="docEmphSmaller">ONTENTS</span></span></p>
        <p class="docText"><span class="docEmphStrong"><span class="docEmphSmaller">目录</span></span></p>

        <table cellspacing="0" frame="void" rules="none" cellpadding="5">
          <colgroup>
            <col width="375">
            <col width="100">
          </colgroup>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec1.html#ch14lev1sec1" >Section 14.1</a></span> <span class="docEmphStrong">Defining an Overloaded Operator</span></p>
            </td>

            <td class="docTableCell" align="right" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec1.html#ch14lev1sec1" >506</a></span></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec2.html#ch14lev1sec2" >Section 14.2</a></span> <span class="docEmphStrong">Input and Output Operators</span></p>
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec2.html#ch14lev1sec2" ></a></span> <span class="docEmphStrong"></span></p>
            </td>

            <td class="docTableCell" align="right" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec2.html#ch14lev1sec2" >513</a></span></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec3.html#ch14lev1sec3" >Section 14.3</a></span> <span class="docEmphStrong">Arithmetic and Relational Operators</span></p>
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec3.html#ch14lev1sec3" ></a></span> <span class="docEmphStrong"></span></p>
            </td>

            <td class="docTableCell" align="right" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec3.html#ch14lev1sec3" >517</a></span></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec4.html#ch14lev1sec4" >Section 14.4</a></span> <span class="docEmphStrong">Assignment Operators</span></p>
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec4.html#ch14lev1sec4" ></a></span> <span class="docEmphStrong"></span></p>
            </td>

            <td class="docTableCell" align="right" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec4.html#ch14lev1sec4" >520</a></span></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec5.html#ch14lev1sec5" >Section 14.5</a></span> <span class="docEmphStrong">Subscript Operator</span></p>
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec5.html#ch14lev1sec5" ></a></span> <span class="docEmphStrong"></span></p>
            </td>

            <td class="docTableCell" align="right" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec5.html#ch14lev1sec5" >522</a></span></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec6.html#ch14lev1sec6" >Section 14.6</a></span> <span class="docEmphStrong">Member Access Operators</span></p>
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec6.html#ch14lev1sec6" ></a></span> <span class="docEmphStrong"></span></p>
            </td>

            <td class="docTableCell" align="right" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec6.html#ch14lev1sec6" >523</a></span></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec7.html#ch14lev1sec7" >Section 14.7</a></span> <span class="docEmphStrong">Increment and Decrement Operators</span></p>
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec7.html#ch14lev1sec7" ></a></span> <span class="docEmphStrong"></span></p>
            </td>

            <td class="docTableCell" align="right" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec7.html#ch14lev1sec7" >526</a></span></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec8.html#ch14lev1sec8" >Section 14.8</a></span> <span class="docEmphStrong">Call Operator and Function Objects</span></p>
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec8.html#ch14lev1sec8" ></a></span> <span class="docEmphStrong"></span></p>
            </td>

            <td class="docTableCell" align="right" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec8.html#ch14lev1sec8" >530</a></span></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec9.html#ch14lev1sec9" >Section 14.9</a></span> <span class="docEmphStrong">Conversions and Class Types</span></p>
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec9.html#ch14lev1sec9" ></a></span> <span class="docEmphStrong"></span></p>
            </td>

            <td class="docTableCell" align="right" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec9.html#ch14lev1sec9" >535</a></span></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec10.html#ch14lev1sec10" >Chapter Summary</a></span></p>
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec10.html#ch14lev1sec10" ></a></span></p>
            </td>

            <td class="docTableCell" align="right" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec10.html#ch14lev1sec10" >552</a></span></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec11.html#ch14lev1sec11" >Defined Terms</a></span></p>
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec11.html#ch14lev1sec11" ></a></span></p>
            </td>

            <td class="docTableCell" align="right" valign="top">
              <p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch14lev1sec11.html#ch14lev1sec11" >552</a></span></p>
            </td>
          </tr>
        </table><br>

        <p class="docText">In <a class="docLink" href="ch05.html#ch05" >Chapter 5</a> we saw that C++ defines a large number of operators and automatic conversions among the built-in types. These facilities allow programmers to write a rich set of mixed-type expressions.</p>
        <p class="docText"><a class="docLink" href="ch05.html#ch05" >第五章</a>介绍过，C++ 定义了许多内置类型间的操作符和自动转换。使用这些设施程序员能够编写丰富的混合类型表达式。</p>

        <p class="docText">C++ lets us redefine the meaning of the operators when applied to objects of class type. It also lets us define conversion operations for class types. <span class="docEmphRoman"><a name="ch14term3"></a><a class="docLink" href="ch14lev1sec11.html#gloss14_03" >Class-type conversions</a></span> are used like the built-in conversions to implicitly convert an object of one type to another type when needed.</p>
        <p class="docText">C++ 允许我们重定义操作符用于类类型对象时的含义。如果需要，可以像内置转换那样使用<span class="docEmphRoman"><a class="docLink" href="ch13lev1sec11.html#gloss14_03" >类类型转换</a></span>，将一个类型的对象隐式转换到另一类型。</p>

        <p class="docText"><a name="idd1e103810"></a><span class="docEmphasis">Operator overloading</span> allows the programmer to define versions of the operators for operands of class type. <a class="docLink" href="ch13.html#ch13" >Chapter 13</a> covered the importance of the assignment operator and showed how to define the assignment operator. We first used overloaded operators in <a class="docLink" href="ch01.html#ch01" >Chapter 1</a>, when our programs used the shift operators (<tt>&gt;&gt;</tt> and <tt>&lt;&lt;</tt>) for input and output and the addition operator (<tt>+</tt>) to add two <tt>Sales_items</tt>. We'll finally see in this chapter how to define these overloaded operators.</p>
        <p class="docText">通过<span class="docEmphasis">操作符重载</span>，程序员能够针对类类型的操作数定义不同的操作符版本。<a class="docLink" href="ch13.html#ch13" >第十三章</a>阐述了赋值操作符的重要性并介绍了怎样定义赋值操作符。我们第一次使用重载操作符是在<a class="docLink" href="ch01.html#ch01" >第一章</a>，那里程序用移位操作符（<tt>&gt;&gt;</tt> 和 <tt>&lt;&lt;</tt>）进行输入输出，用加号操作符（<tt>+</tt>）将两个 <tt>Sales_items</tt> 相加。本章我们终于可以看到怎样定义这些重载操作符了。</p>

        <p class="docText">Through operator overloading, we can redefine most of the operators from <a class="docLink" href="ch05.html#ch05" >Chapter 5</a> to work on objects of class type. Judicious use of operator overloading can make class types as intuitive to use as the built-in types. For example, the standard library defines several overloaded operators for the container classes. These classes define the subscript operator to access data elements and <tt>*</tt> and <tt>-&gt;</tt> to dereference container iterators. The fact that these library types have the same operators makes using them similar to using built-in arrays and pointers. Allowing programs to use expressions rather than named functions can make the programs much easier to write and read. As an example, compare</p>
        <p class="docText">通过操作符重载，可以重定义<a class="docLink" href="ch05.html#ch05" >第五章</a>介绍的大多数操作符，使它们用于类类型对象。明智地使用操作符重载可以使类类型的使用像内置类型一样直观。标准库为容器类定义了几个重载操作符。这些容器类定义了下标操作符以访问数据元素，定义了 <tt>*</tt> 和 <tt>-&gt;</tt> 对容器迭代器解引用。这些标准库的类型具有相同的操作符，使用它们就像使用内置数组和指针一样。允许程序使用表达式而不是命名函数，可以使编写和阅读程序容易得多。将</p>
        <pre>
     cout &lt;&lt; "The sum of " &lt;&lt; v1 &lt;&lt; " and " &lt;&lt; v2
               &lt;&lt; " is " &lt;&lt; v1 + v2 &lt;&lt; endl;
</pre><br>

        <p class="docText">to the more verbose code that would be necessary if IO used named functions:</p>
        <p class="docText">和以下更为冗长的代码相比较就能够看到。如果 IO 使用命名函数，类似下面的代码将无法避免：</p>
        <pre>
     // <span class="docEmphasis">hypothetical expression if IO used named functions</span>
     cout.print("The sum of ").print(v1).
            print(" and ").print(v2).print(" is ").
            print(v1 + v2).print("\n").flush();
</pre><br>
        <a href="21001535.html" ><img src="images/pixel.gif"  alt="" width="1" height="1" border="0"></a>
      </td>
    </tr>
  </table>

  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td>
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="toc.html" ><img src="images/teamlib.gif"  width="62" height="15" border="0" align="absmiddle" alt="Team LiB"></a>
        </div>
      </td>

      <td align="right">
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="ch13lev1sec7.html" ><img src="images/previous.gif"  width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="ch14lev1sec1.html" ><img src="images/next.gif"  width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
        </div>
      </td>
    </tr>
  </table>
</body>
</html>
