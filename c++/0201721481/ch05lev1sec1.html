<html>
<head>
  <meta name="generator" content="HTML Tidy for Windows (vers 12 April 2005), see www.w3.org">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <title>Section 5.1.  Arithmetic Operators</title>
  <link rel="STYLESHEET" type="text/css" href="images/style.css" >
  <link rel="STYLESHEET" type="text/css" href="images/docsafari.css" >
</head>

<body>
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td>
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="toc.html" ><img src="images/teamlib.gif"  width="62" height="15" border="0" align="absmiddle" alt="Team LiB"></a>
        </div>
      </td>

      <td align="right">
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="ch05.html" ><img src="images/previous.gif"  width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="ch05lev1sec2.html" ><img src="images/next.gif"  width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
        </div>
      </td>
    </tr>
  </table><br>

  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td valign="top">
        <a name="ch05lev1sec1"></a>

        <h3 class="docSection1Title" id="432172-902">5.1. Arithmetic Operators</h3>
        <h3 class="docSection1Title" id="432172-902">5.1. 算术操作符</h3>


        <p class="docText">Unless noted otherwise, these operators may be applied to any of the arithmetic types (<a class="docLink" href="ch02lev1sec1.html#ch02lev1sec1" >Section 2.1</a>, p. <a class="docLink" href="ch02lev1sec1.html#ch02lev1sec1" >34</a>), or any type that can be converted to an arithmetic type.</p>
        <p class="docText">除非特别说明，表5-1所示操作符可用于任意算术类型（<a class="docLink" href="ch02lev1sec1.html#ch02lev1sec1" >第 2.1 节</a>）或者任何可转换为算术类型的数据类型。</p>

        <p class="docText">The table groups the operators by their precedencethe unary operators have the highest precedence, then the multiplication and division operators, and then the binary addition and subtraction operators. Operators of higher precedence group more tightly than do operators with lower precedence. These operators are all left associative, meaning that they group left to right when the precedence levels are the same.</p>
	<p class="docText"><a class="docLink" href="ch05lev1sec1.html#ch05table01">表 5.1</a> 按优先级来对操作符进行分组——一元操作符优先级最高，其次是乘、除操作，接着是二元的加、减法操作。高优先级的操作符要比低优先级的结合得更紧密。这些算术操作符都是左结合，这就意味着当操作符的优先级相同时，这些操作符从左向右依次与操作数结合。</p>

	<a name="ch05table01"></a>
        <h5 class="docTableTitle">Table 5.1. Arithmetic Operators</h5>
        <h5 class="docTableTitle">表 5.1.  算术操作符</h5>

        <table cellspacing="0" class="allBorders" border="1" rules="groups" cellpadding="5">
          <colgroup>
            <col width="175">
            <col width="175">
            <col width="150">
          </colgroup>

          <thead>
            <tr>
              <th class="bottomBorder thead" scope="col" align="center" valign="top">
                <p class="docText">Operator</p>
                <p class="docText">操作符</p>
              </th>

              <th class="bottomBorder thead" scope="col" align="left" valign="top">
                <p class="docText">Function</p>
                <p class="docText">功能</p>
              </th>

              <th class="bottomBorder thead" scope="col" align="center" valign="top">
                <p class="docText">Use</p>
                <p class="docText">用法</p>
              </th>
            </tr>
          </thead>

          <tr>
            <td class="docTableCell" align="center" valign="top">
              <p class="docText"><tt>+</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">unary plus（一元正号）</p>
            </td>

            <td class="docTableCell" align="center" valign="top">
              <p class="docText"><tt>+ expr</tt></p>
            </td>
          </tr>

          <tr>
            <td class="bottomBorder" align="center" valign="top">
              <p class="docText"><tt>-</tt></p>
            </td>

            <td class="bottomBorder" align="left" valign="top">
              <p class="docText">unary minus（一元负号）</p>
            </td>

            <td class="bottomBorder" align="center" valign="top">
              <p class="docText"><tt>- expr</tt></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="center" valign="top">
              <p class="docText"><tt>*</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">multiplication（乘法）</p>
            </td>

            <td class="docTableCell" align="center" valign="top">
              <p class="docText"><tt>expr * expr</tt></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="center" valign="top">
              <p class="docText"><tt>/</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">division（除法）</p>
            </td>

            <td class="docTableCell" align="center" valign="top">
              <p class="docText"><tt>expr / expr</tt></p>
            </td>
          </tr>

          <tr>
            <td class="bottomBorder" align="center" valign="top">
              <p class="docText"><tt>%</tt></p>
            </td>

            <td class="bottomBorder" align="left" valign="top">
              <p class="docText">remainder（求余）</p>
            </td>

            <td class="bottomBorder" align="center" valign="top">
              <p class="docText"><tt>expr % expr</tt></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="center" valign="top">
              <p class="docText"><tt>+</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">addition（加法）</p>
            </td>

            <td class="docTableCell" align="center" valign="top">
              <p class="docText"><tt>expr + expr</tt></p>
            </td>
          </tr>

          <tr>
            <td class="bottomBorder" align="center" valign="top">
              <p class="docText"><tt>-</tt></p>
            </td>

            <td class="bottomBorder" align="left" valign="top">
              <p class="docText">subtraction（减法）</p>
            </td>

            <td class="bottomBorder" align="center" valign="top">
              <p class="docText"><tt>expr - expr</tt></p>
            </td>
          </tr>
        </table><br>


	<a name="idd1e31180"></a><a name="idd1e31185"></a><a name="idd1e31190"></a><a name="idd1e31195"></a><a name="idd1e31200"></a><a name="idd1e31205"></a><a name="idd1e31210"></a><a name="idd1e31216"></a><a name="idd1e31222"></a><a name="idd1e31228"></a><a name="idd1e31236"></a><a name="idd1e31242"></a><a name="idd1e31248"></a><a name="idd1e31259"></a><a name="idd1e31270"></a><a name="idd1e31281"></a><a name="idd1e31284"></a><a name="idd1e31290"></a><a name="idd1e31296"></a>
        <p class="docText">Applying precedence and associativity to the previous expression:</p>
        <p class="docText">对于前述表达式</p>
        <pre>
     5 + 10 * 20/2;
</pre><br>

        <p class="docText">we can see that the operands to the multiplication operator (<tt>*</tt>) are <tt>10</tt> and <tt>20</tt>. The result of that expression and <tt>2</tt> are the operands to the division operator (<tt>/</tt>). The result of that division and <tt>5</tt> are the operands to the addition operator (<tt>+</tt>).</p>
	<p class="docText">考虑优先级与结合性，可知该表达式先做乘法（ <tt>*</tt>）操作，其操作数为 <tt>10</tt> 和 <tt>20</tt>，然后以该操作的结果和 <tt>2</tt> 为操作数做除法（<tt>/</tt>）操作，其结果最后与操作数 <tt>5</tt>做加法（ <tt>+</tt>）操作。</p>

        <p class="docText">The unary minus operator has the obvious meaning. It negates its operand:</p>
        <p class="docText">一元负号操作符具有直观的含义，它对其操作数取负：</p>
        <pre>
     int i = 1024;
     int k = -i; //  <span class="docEmphasis">negates the value of its operand</span>
</pre><br>

        <p class="docText">Unary plus returns the operand itself. It makes no change to its operand.</p>
        <p class="docText">一元正号操作符则返回操作数本身，对操作数不作任何修改。</p>

	<a name="ch05sb01"></a>
        <table cellspacing="0" width="90%" border="1" cellpadding="5">
          <tr>
            <td>
              <h2 class="docSidebarTitle">Caution: Overflow and Other Arithmetic Exceptions</h2>
              <h2 class="docSidebarTitle">警告：溢出和其他算术异常 </h2>

              <p class="docText"><span class="docEmphStrong">The result of evaluating some arithmetic expressions is undefined. Some expressions are undefined due to the nature of mathematicsfor example, division by zero. Others are undefined due to the nature of computerssuch as overflow, in which a value is computed that is too large for its type.</span></p>
              <p class="docText"><span class="docEmphStrong">某些算术表达式的求解结果未定义，其中一部分由数学特性引起，例如除零操作；其他则归咎于计算机特性，如溢出：计算出的数值超出了其类型的表示范围。</span></p>

              <p class="docText"><span class="docEmphStrong">Consider a machine on which <tt>short</tt></span><span class="docEmphStrong">s are 16 bits. In that case, the maximum <tt>short</tt> is 32767. Given only 16 bits, the following compound assignment overflows:</span></p>
	      <p class="docText"><span class="docEmphStrong">考虑某台机器，其 <tt>short</tt> 类型为 16 位，能表示的最大值是 32767。假设 <tt>short</tt> 类型只有 16 位，下面的复合赋值操作将会溢出：</span></p>
              <pre>
     // <span class="docEmphasis">max value if shorts are 8 bits</span>
     short short_value = 32767;
     short ival = 1;
     // <span class="docEmphasis">this calculation overflows</span>
     short_value += ival;
     cout &lt;&lt; "short_value: " &lt;&lt; short_value &lt;&lt; endl;
</pre>

              <p class="docText"><span class="docEmphStrong">Representing a signed value of 32768 requires 17 bits, but only 16 are available. On many systems, there is <span class="docEmphasis">no</span> compile-time or run-time warning when an overflow might occur. The actual value put into <tt>short_value</tt> varies across different machines. On our system the program completes and writes</span></p>
	      <p class="docText"><span class="docEmphStrong">表示 32768 这个有符号数需 17 位的存储空间，但是这里仅有 16 位，于是导致溢出现象的发生，此时，许多系统都不会给出编译时或运行时的警告。对于不同的机器，上述例子的 <tt>short_value</tt> 变量真正获得的值不尽相同。在我们的系统上执行该程序后将得到：</span></p>
              <pre>
     <span class="docEmphStrong">short_value: -32768</span>
</pre>

              <p class="docText"><span class="docEmphStrong">The value "wrapped around:" The sign bit, which had been 0, was set to 1, resulting in a negative value. Because the arithmetic types have limited size, it is always possible for some calculations to overflow. Adhering to the recommendations from the "Advice" box on page <a class="docLink" href="ch02lev1sec2.html#ch02sb02" >38</a> can help avoid such problems.</span></p>
	      <p class="docText"><span class="docEmphStrong">其值“截断（wrapped around）”，将符号位的值由 <tt>0</tt> 设为 <tt>1</tt>，于是结果变为负数。因为算术类型具有有限的长度，因此计算后溢出的现象常常发生。遵循<a class="docLink" href="ch02lev1sec2.html#ch02sb02" >第 2.2 节</a>建议框中给出的建议将有助于避免此类问题。</span></p>
            </td>
          </tr>
        </table><br>

        <p class="docText">The binary <tt>+</tt> and <tt>-</tt> operators may also be applied to pointer values. The use of these operators with pointers was described in <a class="docLink" href="ch04lev1sec2.html#ch04lev2sec6" >Section 4.2.4</a> (p. <a class="docLink" href="ch04lev1sec2.html#ch04lev2sec6" >123</a>).</p>
	<p class="docText">二元 <tt>+</tt>、 <tt>-</tt> 操作符也可用于指针值，对指针使用这些操作符的用法将在<a class="docLink" href="ch04lev1sec2.html#ch04lev2sec6" >第 4.2.4 节</a>介绍。</p>

        <p class="docText">The arithmetic operators, <tt>+, -, *</tt>, and <tt>/</tt> have their obvious meanings: addition, subtraction, multiplication, and division. Division between integers results in an integer. If the quotient contains a fractional part, it is truncated:</p>
	<p class="docText">算术操作符 <tt>+</tt>、<tt>-</tt>、<tt>*</tt> 和 <tt>/</tt> 具有直观的含义：加法、减法、乘法和除法。对两个整数做除法，结果仍为整数，如果它的商包含小数部分，则小数部分会被截除：</p>
        <pre>
     int ival1 = 21/6;  //  <span class="docEmphasis">integral result obtained by truncating the remainder</span>
     int ival2 = 21/7;  //  <span class="docEmphasis">no remainder, result is an integral value</span>
</pre>

        <p class="docText">Both <tt>ival1</tt> and <tt>ival2</tt> are initialized with a value of 3.</p>
	<p class="docText"><tt>ival1</tt> 和 <tt>ival2</tt> 均被初始化为 <tt>3</tt>。</p>

	<a name="idd1e31455"></a><a name="idd1e31460"></a><a name="idd1e31465"></a><a name="idd1e31471"></a>
        <p class="docText">The <tt>%</tt> operator is known as the "remainder" or the "modulus" operator. It computes the remainder of dividing the left-hand operand by the right-hand operand. This operator can be applied only to operands of the integral types: <tt>bool, char, short, int, long</tt>, and their associated <tt>unsigned</tt> types:</p>
	<p class="docText">操作符 <tt>%</tt> 称为“求余（remainder）”或“求模（modulus）”操作符，用于计算左操作数除以右操作数的余数。该操作符的操作数只能为整型，包括 <tt>bool</tt>、<tt>char</tt>、<tt>short</tt> 、<tt>int</tt> 和 <tt>long</tt> 类型，以及对应的 <tt>unsigned</tt> 类型：</p>
        <pre>
     int ival = 42;
     double dval = 3.14;
     ival % 12;   //  <span class="docEmphasis">ok: returns 6</span>
     ival % dval; //  <span class="docEmphasis">error: floating point operand</span>
</pre>

        <p class="docText">For both division (<tt>/</tt>) and modulus(<tt>%)</tt>, when both operands are positive, the result is positive (or zero). If both operands are negative, the result of division is positive (or zero) and the result of modulus is negative (or zero). If only one operand is negative, then the value of the result is machine-dependent for both operators. The sign is also machine-dependent for modulus; the sign is negative (or zero) for division:</p>
	<p class="docText">如果两个操作数为正，除法（<tt>/</tt>）和求模（<tt>%</tt>）操作的结果也是正数（或零）；如果两个操作数都是负数，除法操作的结果为正数（或零），而求模操作的结果则为负数（或零）；如果只有一个操作数为负数，这两种操作的结果取决于机器；求模结果的符号也取决于机器，而除法操作的值则是负数（或零）：</p>
        <pre>
     21 % 6;   //  <span class="docEmphasis">ok: result is 3</span>
     21 % 7;   //  <span class="docEmphasis">ok: result is 0</span>
     -21 % -8; //  <span class="docEmphasis">ok: result is -5</span>
     21 % -5;  //  <span class="docEmphasis">machine-dependent: result is 1 or -4</span>
     21 / 6;   //  <span class="docEmphasis">ok: result is 3</span>
     21 / 7;   //  <span class="docEmphasis">ok: result is 3</span>
     -21 / -8; //  <span class="docEmphasis">ok: result is 2</span>
     21 / -5;  //  <span class="docEmphasis">machine-dependent: result -4 or -5</span>
</pre>

        <p class="docText">When only one operand is negative, the sign and value of the result for the modulus operator can follow either the sign of the numerator or of the denominator. On a machine where modulus follows the sign of the numerator then the value of division truncates toward zero. If modulus matches the sign of the denominator, then the result of division truncates toward minus infinity.</p>
        <p class="docText">当只有一个操作数为负数时，求模操作结果值的符号可依据分子（被除数）或分母（除数）的符号而定。如果求模的结果随分子的符号，则除出来的值向零一侧取整；如果求模与分母的符号匹配，则除出来的值向负无穷一侧取整。</p>

	<a name="ch05sb02"></a>
        <table cellspacing="0" width="90%" border="1" cellpadding="5">
          <tr>
            <td>
              <h2 class="docSidebarTitle">Exercises Section 5.1</h2>

              <blockquote>
                <table border="0" cellspacing="16" cellpadding="0">
                  <tr valign="top">
                    <td align="right" class="docText" width="50"><a name="ch05qa1q1"></a><b>Exercise 5.1:</b></td>

                    <td>
                      <p class="docText">Parenthesize the following expression to indicate how it is evaluated. Test your answer by compiling the expression and printing its result.</p>
                      <p class="docText">在下列表达式中，加入适当的圆括号以标明其计算顺序。编译该表达式并输出其值，从而检查你的回答是否正确。</p>
                      <pre>
     12 / 3 * 4 + 5 * 15 + 24 % 4 / 2
</pre>
                    </td>
                  </tr>

                  <tr valign="top">
                    <td align="right" class="docText" width="50"><a name="ch05qa1q2"></a><b>Exercise 5.2:</b></td>

                    <td>
                      <p class="docText">Determine the result of the following expressions and indicate which results, if any, are machine-dependent.</p>
                      <p class="docText">计算下列表达式的值，并指出哪些结果值依赖于机器？</p>
                      <pre>
     -30 * 3 + 21 / 5
     -30 + 3 * 21 / 5
     30 / 3 * 21 % 5
     -30 / 3 * 21 % 4
</pre><br>
                    </td>
                  </tr>

                  <tr valign="top">
                    <td align="right" class="docText" width="50"><a name="ch05qa1q3"></a><b>Exercise 5.3:</b></td>

                    <td>
                      <p class="docText">Write an expression to determine whether an <tt>int</tt> value is even or odd.</p>
		      <p class="docText">编写一个表达式判断一个 <tt>int</tt> 型数值是偶数还是奇数。</p>
                    </td>
                  </tr>

                  <tr valign="top">
                    <td align="right" class="docText" width="50"><a name="ch05qa1q4"></a><b>Exercise 5.4:</b></td>

                    <td>
                      <p class="docText">Define the term overflow. Show three expressions that will overflow.</p>
                      <p class="docText">定义术语“溢出”的含义，并给出导致溢出的三个表达式。</p>
                    </td>
                  </tr>
                </table>
              </blockquote>
            </td>
          </tr>
        </table><br>
      </td>
    </tr>
  </table>

  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td>
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="toc.html" ><img src="images/teamlib.gif"  width="62" height="15" border="0" align="absmiddle" alt="Team LiB"></a>
        </div>
      </td>

      <td align="right">
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="ch05.html" ><img src="images/previous.gif"  width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="ch05lev1sec2.html" ><img src="images/next.gif"  width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
        </div>
      </td>
    </tr>
  </table>
</body>
</html>
