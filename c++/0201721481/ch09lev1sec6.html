<html>
<head>
  <meta name="generator" content="HTML Tidy for Windows (vers 12 April 2005), see www.w3.org">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <title>Section 9.6.  strings Revisited</title>
  <link rel="STYLESHEET" type="text/css" href="images/style.css" >
  <link rel="STYLESHEET" type="text/css" href="images/docsafari.css" >
</head>

<body>
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td>
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="toc.html" ><img src="images/teamlib.gif"  width="62" height="15" border="0" align="absmiddle" alt="Team LiB"></a>
        </div>
      </td>

      <td align="right">
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="ch09lev1sec5.html" ><img src="images/previous.gif"  width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="ch09lev1sec7.html" ><img src="images/next.gif"  width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
        </div>
      </td>
    </tr>
  </table><br>

  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td valign="top">
        <a name="ch09lev1sec6"></a>

        <h3 class="docSection1Title">9.6. <tt>string</tt>s Revisited</h3>
        <h3 class="docSection1Title">9.6. 再谈 string 类型</h3>

        <p class="docText">We introduced the <tt>string</tt> type in <a class="docLink" href="ch03lev1sec2.html#ch03lev1sec2" >Section 3.2</a> (p. <a class="docLink" href="ch03lev1sec2.html#ch03lev1sec2" >80</a>). <a class="docLink" href="ch09lev1sec6.html#ch09table12">Table 9.12</a> (p. <a class="docLink" href="ch09lev1sec6.html#ch09table12">337</a>) recaps the <tt>string</tt> operations covered in that section.</p><a name="ch09table12"></a>
        <p class="docText">第 3.2 节介绍了 string 类型，表 9.12 扼要重述了在该节中介绍的 string 操作。</a>

        <h5 class="docTableTitle">Table 9.12. <tt>string</tt> Operations Introduced in <a class="docLink" href="ch03lev1sec2.html#ch03lev1sec2" >Section 3.2</a></h5>
        <h5 class="docTableTitle">表 9.12 第 3.2 节介绍的 string 操作</h5>

        <table cellspacing="0" class="allBorders" border="1" rules="none" cellpadding="5">
          <colgroup>
            <col width="150">
            <col width="350">
          </colgroup>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>string s;</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Defines a new, empty <tt>string</tt> named <tt>s</tt>.</p>
              <p class="docText">定义一个新的空 string 对象，命名为 s</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>string s(cp);</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Defines a new <tt>string</tt> initialized from the null-terminated C-style string pointed to by <tt>cp</tt>.</p>
              <p class="docText">定义一个新的 string 对象，用 cp 所指向的（以空字符 null 结束的）C 风格字符串初始化该对象</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>string s(s2);</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Defines a new <tt>string</tt> initialized as a copy of <tt>s2</tt>.</p>
              <p class="docText">定义一个新的 string 对象，并将它初始化为 s2 的副本</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>is &gt;&gt; s;</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Reads a whitespace-separated string from the input stream <tt>is</tt> into <tt>s</tt>.</p>
              <p class="docText">从输入流 is 中读取一个以空白字符分隔的字符串，写入 s</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>os &lt;&lt; s;</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Writes <tt>s</tt> to the output stream <tt>os</tt>.</p>
              <p class="docText">将 s 写到输出流 os 中</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>getline(is, s)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Reads characters up to the first newline from input stream <tt>is</tt> into <tt>s</tt>.</p>
              <p class="docText">从输入流 is 中读取一行字符，写入 s</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s1 + s2</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Concatenates <tt>s1</tt> and <tt>s2</tt>, yielding a new <tt>string</tt>.</p>
              <p class="docText">把 s1 和 s2 串接起来，产生一个新的 string 对象</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s1 += s2</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Appends <tt>s2</tt> to <tt>s1</tt>.</p>
              <p class="docText">将 s2 拼接在 s1 后面</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Relational Operators</p>
              <p class="docText">关系操作符</p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">The equality (<tt>==</tt> and <tt>!=</tt>) and relational (<tt>&lt;, &lt;=, &gt;</tt>, and <tt>&gt;=)</tt> can be used to compare <tt>string</tt>s. <tt>string</tt> comparison is equivalent to (case-sensitive) dictionary ordering.</p>
              <p class="docText">相等运算（== 和 !=）以及关系运算（<tt>&lt;</tt>、<tt>&lt;=</tt>、<tt>&gt;</tt> 和 <tt>&gt;=</tt>）都可用于 string 对象的比较，等效于（区分大小写的）字典次序的比较</p>
            </td>
          </tr>
        </table><br>

        <p class="docText">In addition to the operations we've already used, <tt>string</tt>s also supports most of the sequential container operations. In some ways, we can think of a <tt>string</tt> as a container of characters. With some exceptions, <tt>string</tt>s support the same operations that <tt>vector</tt>s support: The exceptions are that <tt>string</tt> does not support the operations to use the container like a stack: We cannot use the <tt>front, back</tt>, and <tt>pop_back</tt> operations on <tt>string</tt>s.</p>
              <p class="docText">除了已经使用过的操作外，string 类型还支持大多数顺序容器操作。在某些方面，可将 string 类型视为字符容器。除了一些特殊操作，string 类型提供与 vector 容器相同的操作。string 类型与 vector 容器不同的是，它不支持以栈方式操纵容器：在 string 类型中不能使用 front、back 和 pop_back 操作。</p>


        <p class="docText">The container operations that <tt>string</tt> supports are:</p>
              <p class="docText">string 支持的容器操作有：</p>

        <ul>
          <li>
            <p class="docList">The typedefs, including the iterator types, listed in <a class="docLink" href="ch09lev1sec3.html#ch09table05" >Table 9.5</a> (p. <a class="docLink" href="ch09lev1sec3.html#ch09table05" >316</a>).</p>
            <p class="docList">表 9.5 列出的 typedef，包括迭代器类型。</p>
          </li>

          <li>
            <p class="docList">The constructors listed in <a class="docLink" href="ch09lev1sec1.html#ch09table02" >Table 9.2</a> (p. <a class="docLink" href="ch09lev1sec1.html#ch09table02" >307</a>) except for the constructor that takes a single size parameter.</p>
            <p class="docList">表 9.2 列出的容器构造函数，但是不包括只需要一个长度参数的构造函数。</p>
          </li>

          <li>
            <p class="docList">The operations to add elements listed in <a class="docLink" href="ch09lev1sec3.html#ch09table07" >Table 9.7</a> (p. <a class="docLink" href="ch09lev1sec3.html#ch09table07" >319</a>) that <tt>vector</tt> supports. Note: Neither <tt>vector</tt> nor <tt>string</tt> supports <tt>push_front</tt>.</p>
            <p class="docList">表 9.7 列出的 vector 容器所提供的添加元素的操作。注意：无论 vector 容器还是 string 类型都不支持 push_front 操作。</p>
          </li>

          <li>
            <p class="docList">The size operations in <a class="docLink" href="ch09lev1sec3.html#ch09table08" >Table 9.8</a> (p. <a class="docLink" href="ch09lev1sec3.html#ch09table08" >324</a>).</p>
            <p class="docList">表 9.8 列出的长度操作。</p>
          </li>

          <li>
            <p class="docList">The subscript and <tt>at</tt> operations listed in <a class="docLink" href="ch09lev1sec3.html#ch09table09" >Table 9.9</a> (p. <a class="docLink" href="ch09lev1sec3.html#ch09table09" >325</a>); <tt>string</tt> does not provide <tt>back</tt> or <tt>front</tt> operations listed in that table.</p>
            <p class="docList">表 9.9 列出的下标和 at 操作；但 string 类型不提供该表列出的 back 和 front 操作。</p>
          </li>

          <li>
            <p class="docList">The <tt>begin</tt> and <tt>end</tt> operations of <a class="docLink" href="ch09lev1sec3.html#ch09table06" >Table 9.6</a> (p. <a class="docLink" href="ch09lev1sec3.html#ch09table06" >317</a>).</p>
            <p class="docList">表 9.6 列出的 begin 和 end 操作。</p>
          </li>

          <li>
            <p class="docList">The <tt>erase</tt> and <tt>clear</tt> operations of <a class="docLink" href="ch09lev1sec3.html#ch09table10" >Table 9.10</a> (p. <a class="docLink" href="ch09lev1sec3.html#ch09table10" >326</a>); <tt>string</tt> does not support either <tt>pop_back</tt> or <tt>pop_front</tt>.</p>
            <p class="docList">表 9.10 列出的 erase 和 clear 操作；但是 string 类型不入提供  pop_back 或 pop_front 操作。</p>
          </li>

          <li>
            <p class="docList">The assignment operations in <a class="docLink" href="ch09lev1sec3.html#ch09table11" >Table 9.11</a> (p. <a class="docLink" href="ch09lev1sec3.html#ch09table11" >329</a>).</p>
            <p class="docList">表 9.11 列出的赋值操作。</p>
          </li>

          <li>
            <p class="docList">Like the elements in a <tt>vector</tt>, the characters of a <tt>string</tt> are stored contiguously. Therefore, <tt>string</tt> supports the <tt>capacity</tt> and <tt>reserve</tt> operations described in <a class="docLink" href="ch09lev1sec4.html#ch09lev1sec4" >Section 9.4</a> (p. <a class="docLink" href="ch09lev1sec4.html#ch09lev1sec4" >330</a>).</p>
            <p class="docList">与 vector 容器的元素一样，string 的字符也是连续存储的。因此，string 类型支持第 9.4 节描述的 capacity 和 reserve 操作。</p>
          </li>
        </ul>

        <p class="docText">When we say that <tt>string</tt> supports the container operations, we mean that we could take a program that manipulates a <tt>vector</tt> and rewrite that same program to operate on <tt>string</tt>s. For example, we could use iterators to print the characters of a <tt>string</tt> a line at a time to the standard output:</p>
        <p class="docText">string 类型提供容器操作意味着可将操纵 vector 对象的程序改写为操纵 string 对象。例如，以下程序使用迭代器将一个 string 对象的字符以每次一行的方式输出到标准输出设备：</p>
        <pre>
     string s("Hiya!");
     string::iterator iter = s.begin();
     while (iter != s.end())
         cout &lt;&lt; *iter++ &lt;&lt; endl; // <span class="docEmphItalicAlt">postfix increment: print old value</span>
</pre><br>

        <p class="docText">Not surprisingly, this code looks almost identical to the code from page <a class="docLink" href="ch05lev1sec5.html#ch05sb07" >163</a> that printed the elements of a <tt>vector&lt;int&gt;</tt>.</p>
        <p class="docText">不要奇怪，这段代码看上去几乎与第 5.5 节中输出 vector<int> 容器元素的程序一模一样。</p>

        <p class="docText">In addition to the operations that <tt>string</tt> shares with the containers, <tt>string</tt> supports other operations that are specific to <tt>string</tt>s. We will review these <tt>string</tt>-specific operations in the remainder of this section. These operations include additional versions of container-related operations as well as other, completely new functions. The additional functions that <tt>string</tt> provides are covered starting on page <a class="docLink" href="ch09lev1sec6.html#ch09table15">341</a>.</p>
        <p class="docText">除了共享容器的操作外，string 类型还支持其他本类型特有的操作。在本节剩下的篇幅吕，我们将回顾这些 string 类型特有的操作，包括与其他容器相关操作的补充版本，以及全新的函数。string 类型的补充函数将在第 9.6.2 节介绍。</p>

        <p class="docText">The additional versions of the container operations that <tt>string</tt> provides are defined to support attributes that are unique to <tt>string</tt>s and not shared by the containers. For example, several operations permit us to specify arguments that are pointers to character arrays. These operations support the close interaction between library <tt>string</tt>s and character arrays, whether null-terminated or not. Other versions let us use indices rather than iterators. These versions operate positionally: We specify a starting position, and in some cases a count, to specify the element or range of elements which we want to manipulate.</p><a name="ch09sb16"></a>
        <p class="docText">string 类型为某些容器操作提供补充版本，以支持 string 特有的、不为其他容器共享的属性。例如，好几种操作允许指定指向字符数组的指针参数。无论字符串是否以空字符结束，这些操作都支持标准库 string 对象与字符数组之间的紧密交互作用。其他版本则使用程序员只能使用下标而不能使用迭代器。这些版本只能通过位置操纵元素：指定起始位置，在某些情况下还需指定一个计数器，由此指定要操纵的某个元素或一段元素。</p>

        <table cellspacing="0" width="90%" border="1" cellpadding="5">
          <tr>
            <td>
              <h2 class="docSidebarTitle">Exercises Section 9.6</h2>

              <blockquote>
                <table border="0" cellspacing="16" cellpadding="0">
                  <tr valign="top">
                    <td align="right" class="docText" width="50"><a name="ch09qa14q1"></a><b>Exercise 9.34:</b></td>

                    <td>
                      <p class="docText">Use iterators to change the characters in a <tt>string</tt> to uppercase.</p>
                      <p class="docText">使用迭代器将 string 对象中的字符都改为大写字母。</p>
                    </td>
                  </tr>

                  <tr valign="top">
                    <td align="right" class="docText" width="50"><a name="ch09qa14q2"></a><b>Exercise 9.35:</b></td>

                    <td>
                      <p class="docText">Use iterators to find and to erase each capital letter from a <tt>string</tt>.</p>
                      <p class="docText">使用迭代器寻找和删除 string 对象中所有的大写字符。</p>
                    </td>
                  </tr>

                  <tr valign="top">
                    <td align="right" class="docText" width="50"><a name="ch09qa14q3"></a><b>Exercise 9.36:</b></td>

                    <td>
                      <p class="docText">Write a program that initializes a <tt>string</tt> from a <tt>vector&lt;char&gt;</tt>.</p>
                      <p class="docText">编写程序用 <tt>vector&lt;char&gt;</tt> 容器初始化 string 对象。</p>
                    </td>
                  </tr>

                  <tr valign="top">
                    <td align="right" class="docText" width="50"><a name="ch09qa14q4"></a><b>Exercise 9.37:</b></td>

                    <td>
                      <p class="docText">Given that you want to read a character at a time into a <tt>string</tt>, and you know that the data you need to read is at least 100 characters long, how might you improve the performance of your program?</p>
                      <p class="docText">假设希望一次读取一个字符并写入 string 对象，而且已知需要读入至少 100 个字符，考虑应该如何提高程序的性能？</p>
                    </td>
                  </tr>
                </table>
              </blockquote>
            </td>
          </tr>
        </table><br>
        <a name="ch09note26"></a>

        <div class="docNote">
          <table width="90%" border="0" cellspacing="0" cellpadding="1">
            <tr>
              <td width="60" valign="top"><img border="0" alt="" align="LEFT" width="84" height="51" src="http://shouce.jb51.net/c++/0201721481/images/0201721481/graphics/tip.jpg;400478" ></td>

              <td valign="top">
                <p class="docText"><a name="idd1e71225"></a> The <tt>string</tt> library defines a great number of functions, which use repeated patterns. Given the number of functions supported, this section can be mind-numbing on first reading.</p>
                      <p class="docText">string 库定义了大量使用重复模式的函数。由于该类型支持的函数非常多，初次阅读本节是会觉得精神疲累。</p>
              </td>
            </tr>
          </table><br>

          <p class="docText">Readers might want to skim the remainder of <a class="docLink" href="ch09lev1sec6.html#ch09lev1sec6">Section 9.6</a>. Once you know what kinds of operations are available, you can return for the details when writing programs that need to use a given operation.</p>
                      <p class="docText">读者可跳过第 9.6 节剩下的内容。一旦知道了有哪些操作可以使用，就可以在编写需要使用这种操作的程序时，才回来阅读其细节。</p>
        </div><br>
        <a name="ch09lev2sec18"></a>

        <h4 class="docSection2Title">9.6.1. Other Ways to Construct <tt>string</tt>s</h4>
        <h4 class="docSection2Title">9.6.1. 构造 string 对象的其他方法</h4>

        <p class="docText">The <tt>string</tt> class supports all but one of the constructors in <a class="docLink" href="ch09lev1sec1.html#ch09table02" >Table 9.2</a> (p. <a class="docLink" href="ch09lev1sec1.html#ch09table02" >307</a>). The constructor that takes a single size parameter is not supported for <tt>string</tt>. We can create a <tt>string</tt>: as the empty <tt>string</tt>, by providing no argument; as a copy of another <tt>string</tt>; from a pair of iterators; or from a count and a character:</p>
        <p class="docText">string 类支持表 9.2 所列出的几乎所有构造函数，只有一个例外：string 不支持带有单个容器长度作为参数的构造函数。创建 string 对象时：不提供任何参数，则得到空的 string 对象；也可将新对象初始化为另一个 string 对象的副本；或用一对迭代器初始化：或者使用一个计数器和一个字符初始化：</p>
        <pre>
     string s1;           // <span class="docEmphasis">s1</span> <span class="docEmphItalicAlt">is the empty string</span>
     string s2(5, 'a');   // <span class="docEmphasis">s2 == "aaaaa"</span>
     string s3(s2);       // <span class="docEmphasis">s3</span> <span class="docEmphItalicAlt">is a copy of</span> <span class="docEmphasis">s2</span>
     string s4(s3.begin(),
               s3.begin() + s3.size() / 2); // <span class="docEmphasis">s4 == "aa"</span>
</pre><br>

        <p class="docText">In addition to these constructors, the <tt>string</tt> type supports three other ways to create a <tt>string</tt>. We have already used the constructor that takes a pointer to the first character in a null-terminated, character array. There is another constructor that takes a pointer to an element in a character array and a count of how many characters to copy. Because the constructor takes a count, the array does not have to be null-terminated:</p>
        <p class="docText">除了上述构造函数之外，string 类型还提供了三种其他的方式创建类对象（表 9.13）。在前面的章节中，已经使用过只有一个指针参数的构造函数，该指针指向以空字符结束的字符数组中的第一个元素。另一种构造函数需要一个指向字符数组元素的指针和一个标记要复制多少个字符的计数器作参数。由于该构造函数带有一个计数器，因此数组不必以空字符结束：</p>
        <pre>
     char *cp = "Hiya";            // <span class="docEmphItalicAlt">null-terminated array</span>
     char c_array[] = "World!!!!"; // <span class="docEmphItalicAlt">null-terminated</span>
     char no_null[] = {'H', 'i'};  // <span class="docEmphItalicAlt">not null-terminated</span>

     string s1(cp);             // <span class="docEmphasis">s1 == "Hiya"</span>
     string s2(c_array, 5);     // <span class="docEmphasis">s2 == "World"</span>
     string s3(c_array + 5, 4); // <span class="docEmphasis">s3 == "!!!!"</span>
     string s4(no_null);        // <span class="docEmphItalicAlt">runtime error</span>: <span class="docEmphasis">no_null</span> <span class="docEmphItalicAlt">not null-terminated</span>
     string s5(no_null, 2);     // <span class="docEmphItalicAlt">ok</span>: <span class="docEmphasis">s5 == "Hi"</span>
</pre><br>

        <p class="docText">We define <tt>s1</tt> using the constructor that takes a pointer to the first character of a null-terminated array. All the characters in that array, up to but not including the terminating null, are copied into the newly created <tt>string</tt>.</p>
        <p class="docText">使用只有一个指针参数的构造函数定义 s1，该指针指向以空字符结束的数组中的第一字符。这个数组的所有字符，但不包括结束符 null，都被复制到新创建的 string 对象中。</p>

        <p class="docText">The initializer for <tt>s2</tt> uses the second constructor, taking a pointer and a count. In this case, we start at the character denoted by the pointer and copy as many characters as indicated in the second argument. <tt>s2</tt>, therefore, is a copy of the first five characters from the array <tt>c_array</tt>. Remember that when we pass an array as an argument, it is automatically converted to a pointer to its first element. Of course, we are not restricted to passing a pointer to the beginning of the array. We initialize <tt>s3</tt> to hold four exclamation points by passing a pointer to the first exclamation point in <tt>c_array</tt>.</p>
        <p class="docText">而 s2 的初始化式则通过第二种构造函数实现，它的参数包括一个指针和一个计数器。在这个例子中，从参数指针指向的那个字符开始，连续复制第二个参数指定数目的字符。因此，s2 是 c_array 数组前 5 个字符的副本。记住，将数组作为参数传递时，数组将自动转换为指向其第一个元素的指针。当然，并没有限制非得传递指向数组起点的指针不可。通过给 s3 的构造函数传递指向 c_array 数组中第一个感叹号字符的指针，s3 被初始化为存储 4 个感叹号字符的 string 对象。</p>

        <p class="docText">The initializers for <tt>s4</tt> and <tt>s5</tt> are not C-style strings. The definition of <tt>s4</tt> is an error. This form of initialization may be called only with a null-terminated array. Passing an array that does not contain a null is a serious error (<a class="docLink" href="ch04lev1sec3.html#ch04lev1sec3" >Section 4.3</a>, p. <a class="docLink" href="ch04lev1sec3.html#ch04lev1sec3" >130</a>), although it is an error that the compiler cannot detect. What happens at run time is undefined.</p>
        <p class="docText">s4 和 s5 的初始化式并不是 C 风格字符串。其中，s4 的定义是错误的。调用这种形式的初始化，其参数必须是以空字符结束的数组。将不包含 null 的数组传递给构造函数将导致编译器无法检测的严重错误（第 4.3 节），此类错误在运行时将支发生什么状况并未定义。</p>

        <p class="docText">The initialization of <tt>s5</tt> is fine: That initializer includes a count that says how many characters to copy. As long as the count is within the size of the array, it doesn't matter whether the array is null-terminated.</p>
        <p class="docText">s5 的初始化则是正确的：初始化式包含了一个计数器，以说明要复制多少个字符用于初始化。该计数器的值必须小于数组的长度，此时，无论数组是否以空字符结束，都没什么关系。</p>

<a name="ch09table13"></a>
        <h5 class="docTableTitle">Table 9.13. Additional Ways to Construct <tt>string</tt>s</h5>
        <h5 class="docTableTitle">9.13. 构造 string 对象的其他方法</h5>

        <table cellspacing="0" class="allBorders" border="1" rules="none" cellpadding="5">
          <colgroup>
            <col width="150">
            <col width="350">
          </colgroup>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>string s(cp, n)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Create <tt>s</tt> as a copy of <tt>n</tt> characters from array pointed to by <tt>cp</tt>.</p>
        <p class="docText">创建一个 string 对象，它被初始化为 cp 所指向数组的前 n 个元素的副本</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>string s(s2, pos2)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Create <tt>s</tt> as a copy of characters in the <tt>string s2</tt> starting at index <tt>pos2</tt>. Undefined if <tt>pos2 &gt; s2.size()</tt>.</p>
        <p class="docText">创建一个 string 对象，它被初始化为一个已存在的 string 对象 s2 中从下标 pos2 开始的字符的副本</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top" colspan="2">
              <p class="docText"><tt>string s(s2, pos2, len2)</tt></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top"> </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Create <tt>s</tt> as a copy of <tt>len2</tt> characters from <tt>s2</tt> starting at index <tt>pos2</tt>. Undefined if <tt>pos2 &gt; s2.size()</tt>. Regardless of the value of <tt>len2</tt>, copies at most <tt>s2.size() - pos2</tt> characters.</p>
        <p class="docText">创建一个 string 对象，它被初始化为 s2 中从下标 pos2 开始的 len2 个字符的副本。如果 <tt>pos2 &gt; s2.size()</tt>，则该操作未定义，无论 len2 的值是多少，最多只能复制 s2.size() - pos2 个字符</p>
            </td>
          </tr>

          <tr>
            <td class="docTableFooter" align="center" valign="top" colspan="2">
              <p class="docText"><span class="docEmphBoldItalic">Note:</span> <tt>n, len2</tt> <span class="docEmphBoldItalic">and</span> <tt>pos2</tt> <span class="docEmphBoldItalic">are all</span> <tt>unsigned</tt> <span class="docEmphBoldItalic">values.</span></p>
        <p class="docText">注意：n、len2 和 pos2 都是 unsigned 值</p>
            </td>
          </tr>
        </table><br>
        <a name="ch09lev3sec17"></a>

        <h5 class="docSection3Title">Using a Substring as the Initializer</h5>
        <h5 class="docSection3Title">用子串做初始化式</h5>

        <p class="docText">The other pair of constructors allow us to create a <tt>string</tt> as a copy of a substring of the characters in another <tt>string</tt>:</p>
        <p class="docText">另一对构造函数使用程序员可以在创建 string 对象时将其初始化为另一个 string 对象的子串。</p>
        <pre>
     string s6(s1, 2);    // <span class="docEmphasis">s6 == "ya"</span>
     string s7(s1, 0, 2); // <span class="docEmphasis">s7 == "Hi"</span>
     string s8(s1, 0, 8); // <span class="docEmphasis">s8 == "Hiya"</span>
</pre><br>

        <p class="docText">The first two arguments are the <tt>string</tt> from which we want to copy and a starting position. In the two-argument version, the newly created <tt>string</tt> is initialized with the characters from that position to the end of the <tt>string</tt> argument. We can also provide a third argument that specifies how many characters to copy. In this case, we copy as many characters as indicated (up to the size of the <tt>string</tt>), starting at the specified position. For example, when we create <tt>s7</tt>, we copy two characters from <tt>s1</tt>, starting at position zero. When we create <tt>s8</tt>, we copy only four characters, not the requested nine. Regardless of how many characters we ask to copy, the library copies up to the size of the <tt>string</tt>, but not more.</p>
	<p class="docText">第一个语句的两个参数指定了要复制的 string 对象及其复制的起点。在两个参数的构造函数版本中，复制 string 对象实参中从指定位置到其末尾的所有字符，用于初始化新创建的 string 对象。还可以为此类构造函数提供第三个参数，用于指定复制字符的个数。在本例中，我们从指定位置开始复制指定数目（最多为 string 对象的长度）的字符数。例如，创建 s7 时，从 s1 中下标为 0 的位置开始复制两个字符；而创建 s8 时，只复制了 4 个字符，而并不是要求的 8 个字符。无论要求复制多少个字符，标准库最多只能复制数目与 string 对象长度相等的字符。</p>

	<a name="ch09lev2sec19"></a>
        <h4 class="docSection2Title">9.6.2. 修改 string 对象的其他方法</h4>

        <p class="docText">Many of the container operations that <tt>string</tt> supports operate in terms of iterators. For example, <tt>erase</tt> takes an iterator or iterator range to specify which element(s) to remove from the container. Similarly, the first argument to each version of <tt>insert</tt> takes an iterator to indicate the position before which to insert <a name="idd1e71616"></a><a name="idd1e71623"></a><a name="idd1e71630"></a><a name="idd1e71637"></a><a name="idd1e71644"></a><a name="idd1e71651"></a>the values represented by the other arguments. Although <tt>string</tt> supports these iterator-based operations, it also supplies operations that work in terms of an index. The index is used to indicate the starting element to <tt>erase</tt> or the position before which to <tt>insert</tt> the appropriate values. <a class="docLink" href="ch09lev1sec6.html#ch09table14">Table 9.14</a> lists the operations that are common to both <tt>string</tt> and the containers; <a class="docLink" href="ch09lev1sec6.html#ch09table15">Table 9.15</a> on the facing page lists the <tt>string</tt>-only operations.</p>
        <p class="docText">string 类型支持的许多容器操作在操作时都以迭代器为基础。例如，erase 操作需要一个迭代器或一段迭代器范围作其参数，用于指定从容器中删除的元素。类似地，所有版本的 insert 函数的第一参数都是一个指向插入位置之后的迭代器，而新插入的元素值则由其他参数指定。尽管 string 类型支持这些基于迭代器的操作，它同样也提供以下标为基础的操作。下标用于指定 erase 操作的起始元素，或在其前面 insert 适当值的元素。表 9.14 列出了 string 类型和容器类型共有的操作；而表 9.15 则列出了 string 类型特有的操作。</p>

	<a name="ch09table14"></a>
        <h5 class="docTableTitle">Table 9.14. <tt>string</tt> Operations in Common with the Containers</h5>
        <h5 class="docTableTitle">表 9.14 与容器共有的 string 操作</h5>

        <table cellspacing="0" class="allBorders" border="1" rules="none" cellpadding="5">
          <colgroup>
            <col width="150">
            <col width="375">
          </colgroup>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.insert(p, t)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Insert copy of value <tt>t</tt> before element referred to by iterator <tt>p</tt>.</p>
              <p class="docText">在迭代器 p 指向的元素之前插入一个值为 t 的新元素。返回指向新插入元素的迭代器</p>

              <p class="docText">Returns an iterator referring to the inserted element.</p>
              <p class="docText"></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.insert(p, n, t)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Insert <tt>n</tt> copies of <tt>t</tt> before <tt>p</tt>. Returns <tt>void</tt>.</p>
              <p class="docText">在迭代器 p 指向的元素之前插入 n 个值为 t 的新元素。返回 void</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.insert(p, b, e)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Insert elements in range denoted by iterators <tt>b</tt> and <tt>e</tt> before <tt>p</tt>.</p>
              <p class="docText">在迭代器 p 指向的元素之前插入迭代器 b 和 e 标记范围内所有的元素。返回 void</p>

              <p class="docText">Returns <tt>void</tt>.</p>
              <p class="docText"></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.assign(b, e)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Replace <tt>s</tt> by elements in range denoted by <tt>b</tt> and <tt>e</tt>. For <tt>string</tt>, returns <tt>s</tt>, for the containers, returns <tt>void</tt>.</p>
              <p class="docText">在迭代器 b 和 e 标记范围内的元素替换 s。对于 string 类型，该操作返回 s；对于容器类型，则返回 void</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.assign(n, t)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Replace <tt>s</tt> by <tt>n</tt> copies of value <tt>t</tt>. For <tt>string</tt>, returns <tt>s</tt>, for the containers, returns <tt>void</tt>.</p>
              <p class="docText">用值为 t 的 n 个副本替换 s。对于 string 类型，该操作返回 s；对于容器类型，则返回 void</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.erase(p)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Erase element referred to by iteartor <tt>p</tt>.</p>
              <p class="docText">删除迭代器 p 指向的元素。返回一个迭代器，指向被删除元素后面的元素</p>

              <p class="docText">Returns an iterator to the element after the one deleted.</p>
              <p class="docText"></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.erase(b, e)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Remove elements in range denoted by <tt>b</tt> and <tt>e</tt>.</p>
              <p class="docText">删除迭代器 b 和 e 标记范围内所有的元素。返回一个迭代器，指向被删除元素段后面的第一个元素</p>

              <p class="docText">Returns an iterator to the first element after the range deleted.</p>
              <p class="docText"></p>
            </td>
          </tr>
        </table><br>
        <a name="ch09table15"></a>

        <h5 class="docTableTitle">Table 9.15. <tt>string</tt>-Specific Versions</h5>
        <h5 class="docTableTitle">表 9.15 string 类型特有的版本</h5>

        <table cellspacing="0" class="allBorders" border="1" rules="none" cellpadding="5">
          <colgroup>
            <col width="200">
            <col width="300">
          </colgroup>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.insert(pos, n, c)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Insert <tt>n</tt> copies of character <tt>c</tt> before element at index <tt>pos</tt>.</p>
              <p class="docText">在下标为 pos 的元素之前插入 n 个字符 c</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.insert(pos, s2)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Insert copy of <tt>string s2</tt> before <tt>pos</tt>.</p>
              <p class="docText">在下标为 pos 的元素之前插入 string 对象 s2 的副本</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top" colspan="2">
              <p class="docText"><tt>s.insert(pos, s2, pos2, len)</tt></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top"> </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Insert <tt>len</tt> characters from <tt>s2</tt> starting at <tt>pos2</tt> before <tt>pos</tt>.</p>
              <p class="docText">在下标为 pos 的元素之前插入 s2 中从下标 pos2 开始的 len 个字符</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.insert(pos, cp, len)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Insert <tt>len</tt> characters from array pointed to by <tt>cp</tt> before <tt>pos</tt>.</p>
              <p class="docText">在下标为 pos 打元素之前插入 cp 所指向数组的前 len 个字符</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.insert(pos, cp)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Insert copy of null-terminated string pointed to by <tt>cp</tt> before <tt>pos</tt>.</p>
              <p class="docText">在下标为 pos 的元素之前插入 cp 所指向的以空字符结束的字符串副本</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.assign(s2)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Replace <tt>s</tt> by a copy of <tt>s2</tt>.</p>
              <p class="docText">用 s2 的副本替换 s</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.assign(s2, pos2, len)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Replace <tt>s</tt> by a copy of <tt>len</tt> characters from <tt>s2</tt> starting at index <tt>pos2</tt> in <tt>s2</tt>.</p>
              <p class="docText">用 s2 中从下标 pos2 开始的 len 个字符副本替换 s</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.assign(cp, len)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Replace <tt>s</tt> by <tt>len</tt> characters from array pointed to by <tt>cp</tt>.</p>
              <p class="docText">用 cp 所指向数组的前 len 个字符副本替换 s</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.assign(cp)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Replace <tt>s</tt> by null-terminated array pointed to by <tt>cp</tt>.</p>
              <p class="docText">用 cp 所指向的以空字符结束的字符串副本替换 s</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.erase(pos, len)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Erase <tt>len</tt> characters starting at <tt>pos</tt>.</p>
              <p class="docText">删除从下标 pos 开始的 len 个字符</p>
            </td>
          </tr>

          <tr>
            <td class="docTableFooter" align="center" valign="top" colspan="2">
              <p class="docText"><span class="docEmphBoldItalic">Unless noted otherwise, all operations return a reference to <tt>s</tt></span>.</p>
              <p class="docText">除非特殊声明，上述所有操作都返回 s 的引用</p>
            </td>
          </tr>
        </table><br>
        <a name="ch09lev3sec18"></a>

        <h5 class="docSection3Title">Position-Based Arguments</h5>
        <h5 class="docSection3Title">基于位置的实参</h5>

        <p class="docText">The <tt>string</tt>-specific versions of these operations take arguments similar to those of the additional constructors covered in the previous section. These operations let us deal with <tt>string</tt>s positionally and/or let us use arguments that are pointers to character arrays rather than <tt>string</tt>s.</p>
              <p class="docText">string 类型为这些操作提供本类型特有的版本，它们接受的实参类似于在前一节介绍的补充构造函数。程序员可通过这些操作基于位置处理 string 对象，并／或使用指向字符数组的指针而不是 string 对象作实参。</p>

        <p class="docText">For example, all containers let us specify a pair of iterators that denote a range of elements to <tt>erase</tt>. For <tt>strings</tt>, we can also specify the range by passing a starting position and count of the number of elements to <tt>erase</tt>. Assuming <tt>s</tt> is at least five characters long, we could erase the last five characters as follows:</p>
              <p class="docText">例如，所有容器都允许程序员指定一对迭代器，用于标记删除（erase）的元素范围。对于 string 类型，还允许通过为 erase 函数传递一个起点位置和删除元素的数目，来指定删除的范围。假设 s 至少有 5 个元素，下面的语句用于删除 s 的最后 5 个字符：</p>
        <pre>
     s.erase(s.size() - 5, 5); // <span class="docEmphItalicAlt">erase last five characters from</span> <span class="docEmphasis">s</span>
</pre><br>

        <p class="docText">Similarly, we can <tt>insert</tt> a given number of values in a container before the element referred to by an iterator. In the case of <tt>string</tt>s, we can specify the insertion point as an index rather than using an iterator:</p>
              <p class="docText">类似地，对于容器类型，可在迭代器指向的元素之前插入（insert）指定数目的新值。而对于 string 类型，系统还允许使用下标而不是迭代器指定插入位置：</p>
        <pre>
     s.insert(s.size(), 5, '!'); // <span class="docEmphItalicAlt">insert five exclamation points at end of</span> <span class="docEmphasis">s</span>
</pre><br>

        <a name="ch09lev3sec19"></a>
        <h5 class="docSection3Title">Specifying the New Contents</h5>
        <h5 class="docSection3Title">指定新的内容</h5>

        <p class="docText">The characters to <tt>insert</tt> or <tt>assign</tt> into the <tt>string</tt> can be taken from a character array or another <tt>string</tt>. For example, we can use a null-terminated character array as the value to <tt>insert</tt> or <tt>assign</tt> into a <tt>string</tt>:</p>
              <p class="docText">在 string 对象中 insert 或 assign 的字符可来自于字符数组或另一个 string 对象。例如，以空字符结束的字符数组可以用作 insert 或 assign 到 string 对象的内容：</p>
        <pre>
     char *cp = "Stately plump Buck";
     string s;
     s.assign(cp, 7);            // <span class="docEmphasis">s == "Stately"</span>
     s.insert(s.size(), cp + 7); // <span class="docEmphasis">s == "Stately plump Buck"</span>
</pre><br>

	      <p class="docText">Similarly, we can <tt>insert</tt> a copy of one <tt>string</tt> into another as follows:</p>
	      <p class="docText">类似地，可如下所示将一个 string 对象的副本插入到另一个 string 对象中：</p>
        <pre>
     s = "some string";
     s2 = "some other string";
     // <span class="docEmphItalicAlt">3 equivalent ways to insert all the characters from</span> <span class="docEmphasis">s2</span> <span class="docEmphItalicAlt">at beginning of s</span>
     // <span class="docEmphItalicAlt">insert iterator range before</span> <span class="docEmphasis">s.begin()</span>
     s.insert(s.begin(), s2.begin(), s2.end());
     // <span class="docEmphItalicAlt">insert copy of</span> <span class="docEmphasis">s2</span> <span class="docEmphItalicAlt">before position 0 in</span> <span class="docEmphasis">s</span>
     s.insert(0, s2);
     // <span class="docEmphItalicAlt">insert</span> <span class="docEmphasis">s2.size()</span> <span class="docEmphItalicAlt">characters from s2 starting at</span> <span class="docEmphasis">s2[0]</span> <span class="docEmphItalicAlt">before</span> <span class="docEmphasis">s[0]</span>
     s.insert(0, s2, 0, s2.size());
</pre><br>

        <a name="ch09lev2sec20"></a>

        <h4 class="docSection2Title">9.6.3. <tt>string</tt>-Only Operations</h4>
        <h4 class="docSection2Title">9.6.3. 只适用于 string 类型的操作</h4>

        <p class="docText">The <tt>string</tt> type provides several other operations that the containers do not:</p>
              <p class="docText">string 类型提供了容器类型不支持其他几种操作，如表 9.16 所示：</p>

        <ul>
          <li>
            <p class="docList">The <tt>substr</tt> function that returns a substring of the current <tt>string</tt></p>
            <p class="docList">substr 函数，返回当前 string 对象的子串。</p>
          </li>

          <li>
            <p class="docList">The <tt>append</tt> and <tt>replace</tt> functions that modify the <tt>string</tt></p>
            <p class="docList">append 和 replace 函数，用于修改 string 对象。</p>
          </li>

          <li>
            <p class="docList">A family of <tt>find</tt> functions that search the <tt>string</tt></p>
            <p class="docList">一系列 find 函数，用于查找 string 对象。</p>
          </li>
        </ul><a name="ch09lev3sec20"></a>

        <h5 class="docSection3Title">The <tt>substr</tt> Operation</h5>
        <h5 class="docSection3Title">substr 操作</h5>

        <p class="docText"><a name="idd1e72342"></a><a name="idd1e72349"></a><a name="idd1e72356"></a><a name="idd1e72363"></a><a name="idd1e72370"></a><a name="idd1e72377"></a>The <tt>substr</tt> operation lets us retrieve a substring from a given <tt>string</tt>. We can pass <tt>substr</tt> a starting position and a count. It creates a new <tt>string</tt> that has that many characters, (up to the end of the <tt>string</tt>) from the target <tt>string</tt>, starting at the given position:</p>
            <p class="docList">使用 substr 操作可在指定 string 对象中检索需要的子串。我们可以给 substr 函数传递查找的起点和一个计数器。该函数将生成一个新的 string 对象，包含原目标 string 对象从指定位置开始的若干个字符（字符数目由计数器决定，但最多只能到原 string 对象的最后一个字符）：</p>
        <pre>
     string s("hello world");
     // <span class="docEmphItalicAlt">return substring of 5 characters starting at position 6</span>
     string s2 = s.substr(6, 5);   // <span class="docEmphItalicAlt">s2 = world</span>
</pre><br>

	    <p class="docText">Alternatively, we could obtain the same result by writing:</p>
	    <p class="docText">可选择另一种方法实现相同的功能：</p>
        <pre>
     // <span class="docEmphItalicAlt">return substring from position 6 to the end of</span> <span class="docEmphasis">s</span>
     string s3 = s.substr(6);      // <span class="docEmphItalicAlt">s3 = world</span>
</pre><br>
        <a name="ch09table16"></a>

        <h5 class="docTableTitle">Table 9.16. Substring Operation</h5>
        <h5 class="docTableTitle">表 9.16 子串操作</h5>

        <table cellspacing="0" class="allBorders" border="1" rules="none" cellpadding="5">
          <colgroup>
            <col width="150">
            <col width="350">
          </colgroup>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.substr(pos, n)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Return a <tt>string</tt> containing <tt>n</tt> characters from <tt>s</tt> starting at <tt>pos</tt>.</p>
              <p class="docText">返回一个 string 类型的字符串，它包含 s 中从下标 pos 开始的 n 个字符</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.substr(pos)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Return a <tt>string</tt> containing characters from <tt>pos</tt> to the end of <tt>s</tt>.</p>
              <p class="docText">返回一个 string 类型的字符串，它包含从下标 pos 开始到 s 末尾的所有字符</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.substr()</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Return a copy of <tt>s</tt>.</p>
              <p class="docText">返回 s 的副本 </p>
            </td>
          </tr>
        </table><br>
        <a name="ch09lev3sec21"></a>

        <h5 class="docSection3Title">The <tt>append</tt> and <tt>replace</tt> Functions</h5>
        <h5 class="docSection3Title">append 和 replace 函数</h5>

        <p class="docText">There are six overloaded versions of <tt>append</tt> and ten versions of <tt>replace</tt>. The <tt>append</tt> and <tt>replace</tt> functions are overloaded using the same set of arguments, which are listed in <a class="docLink" href="ch09lev1sec6.html#ch09table18">Table 9.18</a> on the next page. These arguments specify the characters to add to the <tt>string</tt>. In the case of <tt>append</tt>, the characters are added at the end of the <tt>string</tt>. In the <tt>replace</tt> function, these characters are inserted in place a specified range of existing characters in the <tt>string</tt>.</p>
        <p class="docText">string 类型提供了 6 个 append 重载函数版本和 10 个 replace 版本（见表 9.17）。append 和 replace 函数使用了相同的参数集合实现重载。这些参数如表 9.18 所示，用于指定在 string 对象中添加的字符。对于  append 操作，字符将添加在 string 对象的末尾。而 replace 函数则将这些字符插入到指定位置，从而替换 string 对象中一段已存在的字符。</p>

        <p class="docText">The <tt>append</tt> operation is a shorthand way of inserting at the end:</p>
        <p class="docText"></p>
        <pre>
     string s("C++ Primer");        // <span class="docEmphItalicAlt">initialize</span> <span class="docEmphasis">s</span> <span class="docEmphItalicAlt">to "C++ Primer"</span>
     s.append(" 3rd Ed.");          // <span class="docEmphasis">s == "C++ Primer 3rd Ed."</span>
     // <span class="docEmphItalicAlt">equivalent to</span> <span class="docEmphasis">s.append(" 3rd Ed.")</span>
     s.insert(s.size(), " 3rd Ed.");
</pre><br>

        <p class="docText">The <tt>replace</tt> operations remove an indicated range of characters and insert a new set of characters in their place. The <tt>replace</tt> operations have the same effect as calling <tt>erase</tt> and <tt>insert</tt>.</p>
        <p class="docText"></p>

        <p class="docText">The ten different versions of <tt>replace</tt> differ from each other in how we specify the characters to remove and in how we specify the characters to insert in their place. The first two arguments specify the range of elements to remove. We can specify the range either with an iterator pair or an index and a count. The remaining arguments specify what new characters to insert.</p>
        <p class="docText">string 类型为 replace 操作提供了 10 个不同版本，其差别在于以不同的方式指定要删除的字符和要插入的新字符。前两个参数应指定删除的元素范围，可用迭代器对实现，也可用一个下标和一个计数器实现。其他的参数则用于指定插入的新字符。</p>

        <p class="docText">We can think of <tt>replace</tt> as a shorthand way of erasing some characters and inserting others in their place:</p>
        <p class="docText">可将 replace 视为删除一些字符然后在同一位置插入其他内容的捷径：</p>

	<a name="ch09table17"></a>
        <h5 class="docTableTitle">Table 9.17. Operations to Modify <tt>string</tt>s (<span class="docEmphasis">args</span> defined in <a class="docLink" href="ch09lev1sec6.html#ch09table18">Table 9.18</a>)</h5>
        <h5 class="docTableTitle">表 9.17 修改 string 对象的操作（args 在表 9.18 中定义）</h5>

        <table cellspacing="0" class="allBorders" border="1" rules="none" cellpadding="5">
          <colgroup>
            <col width="200">
            <col width="325">
          </colgroup>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.append(</tt> <span class="docEmphBoldItalic">args</span><tt>)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Append <span class="docEmphasis">args</span> to <tt>s</tt>. Returns reference to <tt>s</tt>.</p>
              <p class="docText">将 args 串接在 s 后面。返回 s 引用</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.replace(pos, len</tt>, <span class="docEmphBoldItalic">args</span><tt>)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Remove <tt>len</tt> characters from <tt>s</tt> starting at <tt>pos</tt> and replace them by characters formed by <span class="docEmphasis">args</span>. Returns reference to <tt>s</tt>.</p>
              <p class="docText">删除 s 中从下标 pos 开始的 len 个字符，用 args 指定的字符替换之。返回 s 的引用</p>

              <p class="docText"><span class="docEmphStrong">This version does not take <span class="docEmphasis">args</span> equal to <tt>b2</tt></span><span class="docEmphStrong">, <tt>e2</tt></span>.</p>
              <p class="docText">在这个版本中，args 不能为 b2，e2</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.replace(b, e</tt>, <span class="docEmphBoldItalic">args</span><tt>)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Remove characters in the range denoted by iterators <tt>b</tt> and <tt>e</tt> and replace them by <span class="docEmphasis">args</span>. Returns reference to <tt>s</tt>.</p>
              <p class="docText">删除迭代器 b 和 e 标记范围内所有的字符，用 args 替换之。返回 s 的引用</p>

              <p class="docText"><span class="docEmphStrong">This version does not take <span class="docEmphasis">args</span> equal to <tt>s2, pos2, len2</tt>.</span></p>
              <p class="docText">在这个版本中，args 不能为 s2，pos2，len2</p>
            </td>
          </tr>
        </table><br>
        <pre>
     // <span class="docEmphItalicAlt">starting at position 11, erase 3 characters and then insert</span> <span class="docEmphasis">"4th"</span>
     s.replace(11, 3, "4th");          // <span class="docEmphasis">s == "C++ Primer 4th Ed."</span>
     // <span class="docEmphItalicAlt">equivalent way to replace</span> <span class="docEmphasis">"3rd" by "4th"</span>
     s.erase(11, 3);                   <span class="docEmphasis">// s == "C++ Primer Ed."</span>
     s.insert(11, "4th");              <span class="docEmphasis">// s == "C++ Primer 4th Ed."</span>
</pre><br>
        <a name="ch09note27"></a>

        <div class="docNote">
          <table width="90%" border="0" cellspacing="0" cellpadding="1">
            <tr>
              <td width="60" valign="top"><img border="0" alt="" align="LEFT" width="50" height="54" src="http://shouce.jb51.net/c++/0201721481/images/0201721481/graphics/note.jpg;400478" ></td>

              <td valign="top">
                <p class="docText">There is no requirement that the size of the text removed and inserted be the same.</p>
              <p class="docText">append 操作提供了在字符串尾部插入的捷径：</p>
              </td>
            </tr>
          </table><br>
        </div><br>

        <p class="docText">In the previous call to <tt>replace</tt>, the text we inserted happens to be the same size as the text we removed. We could insert a larger or smaller <tt>string</tt>:</p>
              <p class="docText">replace 操作用于删除一段指定范围的字符，然后在删除位置插入一组新字符，等效于调用 erase 和 insert 函数。</p>

        <pre>
     s.replace(11, 3, "Fourth"); // <span class="docEmphasis">s == "C++ Primer Fourth Ed."</span>
</pre><br>

        <p class="docText">In this call we remove three characters but insert six in their place.</p>
              <p class="docText">在这个例子中，删除了 3 个字符，但在同一个位置却插入了 6 个字符。</p>

	<a name="ch09table18"></a>
        <h5 class="docTableTitle">Table 9.18. Arguments to <tt>append</tt> and <tt>replace</tt></h5>
        <h5 class="docTableTitle">表 9.18 append 和 replace 操作的参数：args</h5>

        <table cellspacing="0" class="allBorders" border="1" rules="none" cellpadding="5">
          <colgroup>
            <col width="150">
            <col width="370">
          </colgroup>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s2</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">The <tt>string s2</tt>.</p>
              <p class="docText">string 类型的字符串 s2</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s2, pos2, len2</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">up to <tt>len2</tt> characters from <tt>s2</tt> starting at <tt>pos2</tt>.</p>
              <p class="docText">字符串 s2 中从下标 pos2 开始的 len2 个字符</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>cp</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Null-terminated array pointed to by pointer <tt>cp</tt>.</p>
              <p class="docText">指针 cp 指向的以空字符结束的数组</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>cp, len2</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">up to <tt>len2</tt> characters from character array pointed to by <tt>cp</tt>.</p>
              <p class="docText">cp 指向的以空字符结束的数组中前 len2 个字符</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>n, c</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>n</tt> copies of character <tt>c</tt>.</p>
              <p class="docText">字符 c 的 n 个副本</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>b2, e2</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Characters in the range formed by iterators <tt>b2</tt> and <tt>e2</tt>.</p>
              <p class="docText">迭代器 b2 和 e2 标记的范围内所有字符</p>
            </td>
          </tr>
        </table><br>

        <a name="ch09lev2sec21"></a>
        <h4 class="docSection2Title">9.6.4. <tt>string</tt> Search Operations</h4>
        <h4 class="docSection2Title">9.6.4. string 类型的查找操作</h4>

        <p class="docText">The <tt>string</tt> class provides six search functions, each named as a variant of <tt>find</tt>. The operations all return a <tt>string::size_type</tt> value that is the index of where the match occurred, or a special value named <tt>string::npos</tt> if there is no match. The <tt>string</tt> class defines <tt>npos</tt> as a value that is guaranteed to be greater than any valid index.</p>
              <p class="docText">string 类提供了 6 种查找函数（表 9.19），每种函数以不同形式的 find 命名。这些操作全都返回 string::size_type 类型的值，以下标形式标记查找匹配所发生的位置；或者返回一个名为 string::npos 的特殊值，说明查找没有匹配。string 类将 npos 定义为保证大于任何有效下标的值。</p>

        <p class="docText"><a name="idd1e72963"></a><a name="idd1e72970"></a><a name="idd1e72976"></a>There are four versions of each of the search operations, each of which takes a different set of arguments. The arguments to the search operations are listed in <a class="docLink" href="ch09lev1sec6.html#ch09table20">Table 9.20</a>. Basically, these operations differ as to whether they are looking for a single character, another <tt>string</tt>, a C-style, null-terminated string, or a given number of characters from a character array.</p>
              <p class="docText">每种查找操作都有 4 个重载版本，每个版本使用不同的参数集合。表 9.20 列出了查找操作使用的不同参数形式。基本上，这些操作的不同之处在于查找的到底是单个字符、另一个 string 字符串、C 风格的以空字符结束的字符串，还是用字符数组给出的特定数目的字符集合。</p>

<a name="ch09table19"></a>
        <h5 class="docTableTitle">Table 9.19. <tt>string</tt> Search Operations (Arguments in <a class="docLink" href="ch09lev1sec6.html#ch09table20">Table 9.20</a>)</h5>
        <h5 class="docTableTitle"></h5>

        <table cellspacing="0" class="allBorders" border="1" rules="none" cellpadding="5">
          <colgroup>
            <col width="200">
            <col width="325">
          </colgroup>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.find(</tt> <span class="docEmphBoldItalic">args</span><tt>)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Find first occurrence of <span class="docEmphasis">args</span> in <tt>s</tt>.</p>
              <p class="docText">在 s 中查找 args 的第一次出现</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.rfind(</tt> <span class="docEmphBoldItalic">args</span><tt>)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Find last occurrence of <span class="docEmphasis">args</span> in <tt>s</tt>.</p>
              <p class="docText">在 s 中查找 args 的最后一次出现</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.find_first_of(</tt> <span class="docEmphBoldItalic">args</span><tt>)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Find first occurrence of any character from <span class="docEmphasis">args</span> in <tt>s</tt>.</p>
              <p class="docText">在 s 中查找 args 的任意字符的第一次出现</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.find_last_of(</tt> <span class="docEmphBoldItalic">args</span><tt>)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Find last occurrence of any character from <span class="docEmphasis">args</span> in <tt>s</tt>.</p>
              <p class="docText">在 s 中查找 args 的任意字符的最后一次出现</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.find_first_not_of(</tt> <span class="docEmphBoldItalic">args</span><tt>)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Find first character in <tt>s</tt> that is not in <span class="docEmphasis">args</span>.</p>
              <p class="docText">在 s 中查找第一个不属于 args 的字符</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.find_last_not_of(</tt> <span class="docEmphBoldItalic">args</span><tt>)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Find last character in <tt>s</tt> that is not in <span class="docEmphasis">args</span>.</p>
              <p class="docText">在 s 中查找最后一个不属于 args 的字符</p>
            </td>
          </tr>
        </table><br>
        <a name="ch09table20"></a>

        <h5 class="docTableTitle">Table 9.20. Arguments to <tt>string find</tt> Operations</h5>
        <h5 class="docTableTitle">string 类型提供的 find 操作的参数</h5>

        <table cellspacing="0" class="allBorders" border="1" rules="none" cellpadding="5">
          <colgroup>
            <col width="100">
            <col width="400">
          </colgroup>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>c, pos</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Look for the character <tt>c</tt> starting at position <tt>pos</tt> in <tt>s</tt>. <tt>pos</tt> defaults to 0.</p>
              <p class="docText">在 s 中，从下标 pos 标记的位置开始，查找字符 c。pos 的默认值为 0</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s2, pos</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Look for the <tt>string s2</tt> starting at position <tt>pos</tt> in <tt>s</tt>. <tt>pos</tt> defaults to 0.</p>
              <p class="docText">在 s 中，从下标 pos 标记的位置开始，查找 string 对象 s2。pos 的默认值为 0</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>cp, pos</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Look for the C-style null-terminated string pointed to by the pointer <tt>cp</tt>.</p>
              <p class="docText">在 s 中，从下标 pos 标记的位置形参，查找指针 cp 所指向的 C 风格的以空字符结束的字符串。pos 的默认值为 0</p>

              <p class="docText">Start looking starting at position <tt>pos</tt> in <tt>s</tt>. <tt>pos</tt> defaults to 0.</p>
              <p class="docText"></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>cp, pos, n</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Look for the first <tt>n</tt> characters in the array pointed to by the pointer <tt>cp</tt>.</p>
              <p class="docText">在 s 中，从下标 pos 标记的位置开始，查找指针 cp 所指向数组的前 n 个字符。pos 和 n 都没有默认值</p>

              <p class="docText">Start looking starting at position <tt>pos</tt> in <tt>s</tt>. No default for <tt>pos</tt> or <tt>n</tt>.</p>
              <p class="docText"></p>
            </td>
          </tr>
        </table><br>
        <a name="ch09lev3sec22"></a>

        <h5 class="docSection3Title">Finding an Exact Match</h5>
        <h5 class="docSection3Title">精确匹配的查找</h5>

        <p class="docText">The simplest of the search operations is the <tt>find</tt> function. It looks for its argument and returns the index of the first match that is found, or <tt>npos</tt> if there is no match:</p>
              <p class="docText">最简单的查找操作是 find 函数，用于寻找实参指定的内容。如果找到的话，则返回第一次匹配的下标值；如果找不到，则返回 npos：</p>
        <pre>
     string name("AnnaBelle");
     string::size_type pos1 = name.find("Anna"); // <span class="docEmphasis">pos1 == 0</span>
</pre><br>

        <p class="docText">Returns 0, the index at which the substring <tt>"Anna"</tt> is found in <tt>"AnnaBelle"</tt>.</p>
              <p class="docText">返回 0，这是子串“Anna”位于字符串“AnnaBelle”中的下标。</p>

	<a name="ch09note28"></a>
        <div class="docNote">
          <table width="90%" border="0" cellspacing="0" cellpadding="1">
            <tr>
              <td width="60" valign="top"><img border="0" alt="" align="LEFT" width="50" height="54" src="http://shouce.jb51.net/c++/0201721481/images/0201721481/graphics/note.jpg;400478" ></td>

              <td valign="top">
                <p class="docText">By default, the find operations (and other <tt>string</tt> operations that deal with characters) use the built-in operators to compare characters in the <tt>string</tt>. As a result, these operations (and other <tt>string</tt> operations) are case sensitive.</p>
              <p class="docText">默认情况下，find 操作（以及其他处理字符的 string 操作）使用内置操作符比较 string 字符串中的字符。因此，这些操作（以及其他 string 操作）都区分字母的大小写。</p>
              </td>
            </tr>
          </table><br>
        </div><br>

        <p class="docText">When we look for a value in the <tt>string</tt>, case matters:</p>
              <p class="docText">以下程序寻找 string 对象中的某个值，字母的大小写影响了程序结果：</p>
        <pre>
     string lowercase("annabelle");
     pos1 = lowercase.find("Anna"); // <span class="docEmphasis">pos1 == npos</span>
</pre><br>

        <p class="docText">This code will set <tt>pos2</tt> to <tt>npos</tt>the <tt>string Anna</tt> does not match <tt>anna</tt>.</p>
              <p class="docText">这段代码使 pos1 的值为 npos ——字符串 Anna 与 anna 不匹配</p>

<a name="ch09note29"></a>
        <div class="docNote">
          <table width="90%" border="0" cellspacing="0" cellpadding="1">
            <tr>
              <td width="60" valign="top"><img border="0" alt="" align="LEFT" width="116" height="74" src="http://shouce.jb51.net/c++/0201721481/images/0201721481/graphics/bestpractices.jpg;400478" ></td>

              <td valign="top">
                <p class="docText"><a name="idd1e73362"></a><a name="idd1e73369"></a> The <tt>find</tt> operations return a <tt>string::size_type</tt>. Use an object of that type to hold the return from <tt>find</tt>.</p>
              <p class="docText">find 操作的返回类型是 string::size_type，请使用该类型的对象存储 find 的返回值。</p>
              </td>
            </tr>
          </table><br>
        </div><br>
        <a name="ch09lev3sec23"></a>

        <h5 class="docSection3Title">Find Any Character</h5>
        <h5 class="docSection3Title">查找任意字符</h5>

        <p class="docText">A slightly more complicated problem would be if we wanted to match any character in our search string. For example, the following locates the first digit within <tt>name</tt>:</p>
              <p class="docText">如果在查找字符串时希望匹配任意指定的字符，则实现起来稍微复杂一点。例如，下面的程序要在 name 中寻找并定位第一个数字：</p>
        <pre>
     string numerics("0123456789");
     string name("r2d2");
     string::size_type pos = name.find_first_of(numerics);
     cout &lt;&lt; "found number at index: " &lt;&lt; pos
          &lt;&lt; " element is "  &lt;&lt; name[pos] &lt;&lt; endl;
</pre><br>

        <p class="docText">In this example, <tt>pos</tt> is set to a value of 1 (the elements of a <tt>string</tt>, remember, are indexed beginning at 0).</p>
              <p class="docText">在这个例子中，pos 的值被设置为 1（记住，string 对象的元素下标从 0 开始计数）。</p>

<a name="ch09lev3sec24"></a>
        <h5 class="docSection3Title">Specifying Where to Start the Search</h5>
        <h5 class="docSection3Title">指定查找的起点</h5>

        <p class="docText">We can pass an optional starting position to the <tt>find</tt> operations. This optional argument indicates the index position from which to start the search. By default, that position is set to zero. One common programming pattern uses this optional argument to loop through a <tt>string</tt> finding all occurrences. We could rewrite our search of <tt>"r2d2"</tt> to find all the numbers in <tt>name</tt>:</p>
        <p class="docText">程序员可以给 find 操作传递一个可选的起点位置实参，用于指定开始查找的下标位置，该位置实参的默认值为 0。通常的编程模式是使用这个可选的实参循环查找 string 对象中所有的匹配。下面的程序重写了查找“r2d2”的程序，以便找出 name 字符串中出现的所有数字：</p>
        <pre>
     string::size_type pos = 0;
     // <span class="docEmphItalicAlt">each trip reset pos to the next instance in name</span>
     while ((pos = name.find_first_of(numerics, pos))
                   != string::npos) {
         cout &lt;&lt; "found number at index: " &lt;&lt; pos
              &lt;&lt; " element is " &lt;&lt; name[pos] &lt;&lt; endl;
         ++pos; // <span class="docEmphItalicAlt">move to the next character</span>
     }
</pre><br>

        <p class="docText">In this case, we initialize <tt>pos</tt> to zero so that on the first trip through the <tt>while name</tt> is searched, beginning at position 0. The condition in the <tt>while</tt> resets <tt>pos</tt> to the index of the first number encountered, starting from the current value of <tt>pos</tt>. As long as the return from <tt>find_first_of</tt> is a valid index, we print our result and increment <tt>pos</tt>.</p>
        <p class="docText">在这个例子中，首先将 pos 初始化为 0，使第一次循环从 0 号元素开始查找 name。while 的循环条件实现两个功能：从当前 pos 位置开始查找，并将找到的第一个数字出现的下标值赋给 pos。当 find_first_of 函数返回有效的下标值时，输出此次查找的结果，并且让 pos 加 1。</p>

        <p class="docText">Had we neglected to increment <tt>pos</tt> at the end of this loop, then it would never terminate. To see why, consider what would happen if we didn't. On the second trip through the loop. we start looking at the character indexed by <tt>pos</tt>. That character would be a number, so <tt>find_first_of</tt> would (repeatedly) returns <tt>pos</tt>!</p>
        <p class="docText">如果漏掉了循环体末尾让 pos 加 1 的语句，那么循环永远都不会结束。考虑没有该操作时，会发生什么情况？第二次循环时，从 pos 标记的位置开始查找，而此时 pos 标记的就是一个数字，于是 find_first_of 函数将（不断重复地）返回同一个 pos 值。</p>

<a name="ch09note30"></a>
        <div class="docNote">
          <table width="90%" border="0" cellspacing="0" cellpadding="1">
            <tr>
              <td width="60" valign="top"><img border="0" alt="" align="LEFT" width="50" height="54" src="http://shouce.jb51.net/c++/0201721481/images/0201721481/graphics/note.jpg;400478" ></td>

              <td valign="top">
		      <p class="docText">It is essential that we increment <tt>pos</tt>. Doing so ensures that we start looking for the next number at a point <span class="docEmphasis">after</span> the number we just found.</p>
                <p class="docText"></p>
              </td>
            </tr>
          </table><br>
        </div><br>
        <a name="ch09lev3sec25"></a>

        <h5 class="docSection3Title">Looking for a Nonmatch</h5>
        <h5 class="docSection3Title">寻找不匹配点</h5>

	<a name="idd1e73512"></a><a name="idd1e73516"></a><a name="idd1e73520"></a><a name="idd1e73524"></a><a name="idd1e73531"></a><a name="idd1e73538"></a><a name="idd1e73545"></a><a name="idd1e73552"></a>
        <p class="docText">Instead of looking for a match, we might call <tt>find_first_not_of</tt> to find the first position that is <span class="docEmphasis">not</span> in the search argument. For example, to find the first non-numeric character of a <tt>string</tt>, we can write</p>
        <p class="docText">除了寻找匹配的位置外，还可以调用 find_first_not_of 函数查找第一个与实参不匹配的位置。例如，如果要在 string 对象中寻找第一个非数字字符，可以如下编写程序：</p>
        <pre>
     string numbers("0123456789");
     string dept("03714p3");

     // <span class="docEmphItalicAlt">returns</span> <span class="docEmphasis">5</span>, <span class="docEmphItalicAlt">which is the index to the character</span> <span class="docEmphasis">'p'</span>
     string::size_type pos = dept.find_first_not_of(numbers);
</pre><br>

        <a name="ch09lev3sec26"></a>

        <h5 class="docSection3Title">Searching Backward</h5>
        <h5 class="docSection3Title">反向查找</h5>

        <p class="docText">Each of the <tt>find</tt> operations that we've seen so far executes left to right. The library provides an analogous set of operations that look through the <tt>string</tt> from right to left. The <tt>rfind</tt> member searches for the lastthat is, rightmostoccurrence of the indicated substring:</p>
        <p class="docText">迄今为止，我们使用的所有 find 操作都是从左向右查找的。除此之外，标准库还提供了一组类似的从右向左查找 string 对象的操作。rfind 成员函数用于寻找最后一个——也就是是最右边的——指定子串出现的位置：</p>
        <pre>
     string river("Mississippi");
     string::size_type first_pos = river.find("is"); // <span class="docEmphItalicAlt">returns 1</span>
     string::size_type last_pos = river.rfind("is"); // <span class="docEmphItalicAlt">returns 4</span>
</pre><br>

        <p class="docText"><tt>find</tt> returns an index of 1, indicating the start of the first <tt>"is"</tt>, while <tt>rfind</tt> returns an index of 4, indicating the start of the last occurrence of <tt>"is"</tt>.</p>
        <p class="docText">find 函数返回下标 1，标记 river 字符串中第一个“is”的出现位置；而 rfind 函数返回最后一个匹配的位置，而并不是第一个。</p>

	<a name="ch09lev3sec27"></a>
        <h5 class="docSection3Title">The <tt>find_last</tt> Functions</h5>
        <h5 class="docSection3Title"></h5>

        <p class="docText">The <tt>find_last</tt> functions operate like the corresponding <tt>find_first</tt> functions, except that they return the <span class="docEmphasis">last</span> match rather than the first:</p>
        <p class="docText"></p>

        <ul>
          <li>
            <p class="docList"><tt>find_last_of</tt> searches for the last character that matches any element of the search <tt>string</tt>.</p>
            <p class="docList">find_last_of 函数查找与目标字符串的任意字符匹配的最后一个字符。</p>
          </li>

          <li>
            <p class="docList"><tt>find_last_not_of</tt> searches for the last character that does not match any element of the search <tt>string</tt>.</p>
            <p class="docList">find_last_not_of 函数查找最后一个不能跟目标字符串的任何字符匹配的字符。</p>
          </li>
        </ul>

        <p class="docText">Each of these operations takes an optional second argument indicating the position within the <tt>string</tt> to begin searching.</p>
	<p class="docText">这两个操作都提供第二个参数，这个参数是可选的，用于指定在 string 对象中开始查找的位置。</p>
	
	<a name="ch09lev2sec22"></a>
        <h4 class="docSection2Title">9.6.5. Comparing <tt>string</tt>s</h4>
        <h4 class="docSection2Title">9.6.5. </h4>

        <p class="docText">As we saw in <a class="docLink" href="ch03lev1sec2.html#ch03lev2sec4" >Section 3.2.3</a> (p. <a class="docLink" href="ch03lev1sec2.html#ch03lev2sec4" >85</a>), the <tt>string</tt> type defines all the relational operators so that we can compare two <tt>string</tt>s for equality (<tt>==</tt>), inequality (<tt>!=</tt>), and the less- or greater-than operations (<tt>&lt;, &lt;=, &gt;, &gt;=</tt>). Comparison between <tt>string</tt>s is lexicographicalthat is, <tt>string</tt> comparison is the same as a case-sensitive, dictionary ordering:</p>
        <p class="docText">正如在第 3.2.3 节所看到的，string 类型定义了所有关系操作符，使程序员可以比较两个 string 对象是否相等（==）、不等（!=），以及实现小于或大于（<tt>&lt;</tt>、<tt>&lt;=</tt>、<tt>&gt;</tt>、<tt>&gt;=</tt>）运算。string 对象采用字典顺序比较，也就是说，string 对象的比较与大小写敏感的字典顺序比较相同：</p>
        <pre>
     string cobol_program_crash("abend");
     string cplus_program_crash("abort");
</pre><br>
        <a name="ch09sb17"></a>

        <table cellspacing="0" width="90%" border="1" cellpadding="5">
          <tr>
            <td>
              <h2 class="docSidebarTitle">Exercises Section 9.6.4</h2>

              <blockquote>
                <table border="0" cellspacing="16" cellpadding="0">
                  <tr valign="top">
                    <td align="right" class="docText" width="50"><a name="ch09qa15q1"></a><b>Exercise 9.38:</b></td>

                    <td>
			<a name="idd1e73744"></a><a name="idd1e73752"></a><a name="idd1e73760"></a><a name="idd1e73767"></a><a name="idd1e73776"></a><a name="idd1e73785"></a><a name="idd1e73794"></a><a name="idd1e73803"></a><a name="idd1e73810"></a><a name="idd1e73816"></a>
                      <p class="docText">Write a program that, given the <tt>string</tt></p>
                      <p class="docText">已知有如下 string 对象：</p>
                      <pre>
     "ab2c3d7R4E6"
</pre><br>

                      <p class="docText">finds each numeric character and then each alphabetic character. Write two versions of the program. The first should use <tt>find_first_of</tt>, and the second <tt>find_first_not_of</tt>.</p>
                      <p class="docText">编写程序寻找该字符串中所有的数字字符，然后再寻找所有的字母字符。以两种版本编写该程序：第一个版本使用 find_first_of 函数，而第二个版本则使用 find_first_not_of 函数。</p>
                    </td>
                  </tr>

                  <tr valign="top">
                    <td align="right" class="docText" width="50"><a name="ch09qa15q2"></a><b>Exercise 9.39:</b></td>

                    <td>
                      <p class="docText">Write a program that, given the <tt>string</tt>s</p>
                      <p class="docText">已知有如下 string 对象：</p>
                      <pre>
     string line1 = "We were her pride of 10 she named us:";
     string line2 = "Benjamin, Phoenix, the Prodigal"
     string line3 = "and perspicacious pacific Suzanne";

     string sentence = line1 + ' ' + line2 + ' ' + line3;
</pre><br>

                      <p class="docText">counts the number of words in <tt>sentence</tt> and identifies the largest and smallest words. If several words have the largest or smallest length, report all of them.</p>
                      <p class="docText">编写程序计算 sentence 中有多少个单词，并指出其中最长和最短的单词。如果有多个最长或最短的单词，则将它们全部输出。</p>
                    </td>
                  </tr>
                </table>
              </blockquote>
            </td>
          </tr>
        </table><br>

        <p class="docText">Here <tt>cobol_program_crash</tt> is less than the <tt>cplus_program_crash</tt>. The relational operators compare two <tt>string</tt>s character by character until reaching a position where the two <tt>string</tt>s differ. The overall comparison of the <tt>string</tt>s depends on the comparison between these unequal characters. In this case, the first unequal characters are <tt>'e'</tt> and <tt>'o'</tt>. The letter <tt>'e'</tt> occurs before (is less than) <tt>'o'</tt> in the English alphabet and so <tt>"abend"</tt> is less than <tt>"abort"</tt>. If the <tt>string</tt>s are of different length, and one <tt>string</tt> is a substring of the other, then the shorter <tt>string</tt> is less than the longer.</p>
                      <p class="docText">操作符逐个字符地进行比较，直到比较到某个位置上，两个 string 对象对应的字符不相同为止。string 对象的整个比较依赖于不相同字符之间的比较。在本例中，第一个不相等的字符是‘e’和‘o’。由于在英文字母表中，‘e’出现得比‘o’早（即‘e’小于‘o’），于是“abend”小于“abort”。如果要比较的两个 string 对象长度不相同，而且一个 string 对象是另一个 string 对象的子串，则较短的 string 对象小于较长的 string 对象。</p>

	<a name="ch09lev3sec28"></a>
        <h5 class="docSection3Title">The <tt>compare</tt> Functions</h5>
        <h5 class="docSection3Title">compare 函数</h5>

        <p class="docText">In addition to the relational operators, <tt>string</tt> provides a set of <tt>compare</tt> operations that perform lexicographical comparions. The results of these operations are similar to the C library <tt>strcmp</tt> function (<a class="docLink" href="ch04lev1sec3.html#ch04lev1sec3" >Section 4.3</a>, p. <a class="docLink" href="ch04lev1sec3.html#ch04lev1sec3" >132</a>). Given</p>
        <p class="docText">除了关系操作符，string 类型还提供了一组 compare 操作（表 9.21），用于实现字典顺序的比较。这些操作的结果类似于 C 语言中的库函数 strcmp（第 4.3 节）。假设有语句：</p>
        <pre>
     s1.compare <span class="docEmphasis">(args);</span>
</pre><br>

        <p class="docText"><tt>compare</tt> returns one of three possible values:</p>
        <p class="docText">compare 函数返回下面列出的三种可能值之一：</p>

        <div style="font-weight:bold">
          <ol class="docList" type="1">
            <li>
              <div style="font-weight:normal">
                <p class="docList">A positive value if <tt>s1</tt> is greater than the <tt>string</tt> represented by <span class="docEmphasis">args</span></p>
                <p class="docList">正数，此时 s1 大于 args 所代表的 string 对象。</p>
              </div>
            </li>

            <li>
              <div style="font-weight:normal">
                <p class="docList">A negative value if <tt>s1</tt> is less than the <tt>string</tt> represented by <span class="docEmphasis">args</span></p>
                <p class="docList">负数，此时 s1 小于 args 所代表的 string 对象。</p>
              </div>
            </li>

            <li>
              <div style="font-weight:normal">
                <p class="docList">0 if <tt>s1</tt> is equal to the <tt>string</tt> represented by <span class="docEmphasis">args</span></p>
                <p class="docList">0，此时 s1 恰好等于 args 所代表的 string 对象。</p>
              </div>
            </li>
          </ol>
        </div>

        <p class="docText">For example</p>
        <p class="docText">例如：</p>
        <pre>
     // <span class="docEmphItalicAlt">returns a negative value</span>
     cobol_program_crash.compare(cplus_program_crash);
     // <span class="docEmphItalicAlt">returns a positive value</span>
     cplus_program_crash.compare(cobol_program_crash);
</pre><br>
        <a name="ch09table21"></a>

        <h5 class="docTableTitle">Table 9.21. <tt>string compare</tt> Operations</h5>
        <h5 class="docTableTitle">表 9.21 string 类型 compare 操作</h5>

        <table cellspacing="0" class="allBorders" border="1" rules="none" cellpadding="5">
          <colgroup>
            <col width="150">
            <col width="350">
          </colgroup>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.compare(s2)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Compare <tt>s</tt> to <tt>s2</tt>.</p>
        <p class="docText">比较 s 和 s2</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top" colspan="2">
              <p class="docText"><tt>s.compare(pos1, n1, s2)</tt></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top"> </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Compares <tt>n1</tt> characters starting at <tt>pos1</tt> from <tt>s</tt> to <tt>s2</tt>.</p>
        <p class="docText">让 s 中从 pos 下标位置开始的 n1 个字符与 s2 做比较</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top" colspan="2">
              <p class="docText"><tt>s.compare(pos1, n1, s2, pos2, n2)</tt></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top"> </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Compares <tt>n1</tt> characters starting at <tt>pos1</tt> from <tt>s</tt> to the <tt>n2</tt> characters starting at <tt>pos2</tt> in <tt>s2</tt>.</p>
        <p class="docText">让 s 中从 pos1 下标位置开始的 n1 个字符与 s2 中从 pos2 下标位置开始的 n2 个字符做比较</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top">
              <p class="docText"><tt>s.compare(cp)</tt></p>
            </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Compares <tt>s</tt> to the null-terminated string pointed to by <tt>cp</tt>.</p>
        <p class="docText">比较 s 和 cp 所指向的以空字符结束的字符串</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top" colspan="2">
              <p class="docText"><tt>s.compare(pos1, n1, cp)</tt></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top"> </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Compares <tt>n1</tt> characters starting at <tt>pos1</tt> from <tt>s</tt> to <tt>cp</tt>.</p>
        <p class="docText">让 s 中从 pos1 下标位置开始的 n1 个字符与 cp 所指向的字符串做比较</p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top" colspan="2">
              <p class="docText"><tt>s.compare(pos1, n1, cp, n2)</tt></p>
            </td>
          </tr>

          <tr>
            <td class="docTableCell" align="left" valign="top"> </td>

            <td class="docTableCell" align="left" valign="top">
              <p class="docText">Compares <tt>n1</tt> characters starting at <tt>pos1</tt> from <tt>s</tt> to <tt>n2</tt> characters starting from the pointer <tt>cp</tt>.</p>
        <p class="docText">让 s 中从 pos1 下标位置开始的 n1 个字符与 cp 所指向的字符串的前 n2 个字符做比较</p>
            </td>
          </tr>
        </table><br>

	<a name="idd1e74196"></a><a name="idd1e74199"></a><a name="idd1e74204"></a><a name="idd1e74209"></a><a name="idd1e74213"></a><a name="idd1e74219"></a><a name="idd1e74225"></a><a name="idd1e74231"></a>
        <p class="docText">The overloaded set of six <tt>compare</tt> operations allows us to compare a substring of either one or both <tt>string</tt>s for comparison. They also let us compare a <tt>string</tt> to a character array or portion thereof:</p>
        <p class="docText">compare 操作提供了 6 种重载函数版本，以方便程序员实现一个或两个 string 对象的子串的比较，以及 string 对象与字符数组或其中某一部分的比较：</p>
        <pre>
     char second_ed[] = "C++ Primer, 2nd Edition";
     string third_ed("C++ Primer, 3rd Edition");
     string fourth_ed("C++ Primer, 4th Edition");

     // <span class="docEmphItalicAlt">compares C++ library string to C-style string</span>
     fourth_ed.compare(second_ed); // <span class="docEmphItalicAlt">ok,</span> <span class="docEmphasis">second_ed</span> <span class="docEmphItalicAlt">is null-terminated</span>

     // <span class="docEmphItalicAlt">compare substrings of</span> <span class="docEmphasis">fourth_ed</span> <span class="docEmphItalicAlt">and</span> <span class="docEmphasis">third_ed</span>
     fourth_ed.compare(fourth_ed.find("4th"), 3,
                       third_ed, third_ed.find("3rd"), 3);
</pre><br>

        <p class="docText">The second call to <tt>compare</tt> is the most interesting. This call uses the version of <tt>compare</tt> that takes five arguments. We use <tt>find</tt> to locate the position of the beginning of the substring <tt>"4th"</tt>. We compare three characters starting at that position to a substring from <tt>third_ed</tt>. That substring begins at the position returned from <tt>find</tt> when looking for <tt>"3rd"</tt> and again we compare three characters. Essentially, this call compares <tt>"4th"</tt> to <tt>"3rd"</tt>.</p>
        <p class="docText">我们对第二个 compare 函数的调用更感兴趣。这个调用使用了具有 5 个参数的 compare 函数版本。先调用 find 函数找到子串“4th”的起点。让从此起点开始的 3 个字符与 third_ed 的子串做比较。而 third_ed 的子串起始于 find 函数找到的“3rd”的起点，同样取其随后的 3 个字符参加比较。可见这个语句本质上比较的是“4th”和“3rd”。</p>
<a href="21001535.html" ><img src="images/pixel.gif"  alt="" width="1" height="1" border="0"></a>
      </td>
    </tr>
  </table>

        <a name="ch09sb18"></a>

        <table cellspacing="0" width="90%" border="1" cellpadding="5">
          <tr>
            <td>
              <h2 class="docSidebarTitle">Exercises Section 9.6.5</h2>

              <blockquote>
                <table border="0" cellspacing="16" cellpadding="0">
                  <tr valign="top">
                    <td align="right" class="docText" width="50"><a name="ch09qa16q1"></a><b>Exercise 9.40:</b></td>

                    <td>
<a name="idd1e74460"></a><a name="idd1e74466"></a><a name="idd1e74472"></a><a name="idd1e74479"></a><a name="idd1e74485"></a>
                      <p class="docText">Write a program that accepts the following two <tt>string</tt>s:</p>
                      <p class="docText">编写程序接收下列两个 string 对象：</p>
                      <pre>
     string q1("When lilacs last in the dooryard bloom'd");
     string q2("The child is father of the man");
</pre><br>

                      <p class="docText">Using the <tt>assign</tt> and <tt>append</tt> operations, create the <tt>string</tt></p>
                      <p class="docText">然后使用 assign 和 append 操作，创建 string 对象：</p>
                      <pre>
     string sentence("The child is in the dooryard");
</pre><br>
                    </td>
                  </tr>

                  <tr valign="top">
                    <td align="right" class="docText" width="50"><a name="ch09qa16q2"></a><b>Exercise 9.41:</b></td>

                    <td>
                      <p class="docText">Write a program that, given the <tt>string</tt>s</p>
                      <p class="docText">已知有如下 string 对象：</p>
                      <pre>
     string generic1("Dear Ms Daisy:");
     string generic2("MrsMsMissPeople");
</pre><br>

                      <p class="docText">implements the function</p>
                      <p class="docText">编写程序实现下面函数：</p>
                      <pre>
     string greet(string form, string lastname, string title,
                  string::size_type pos, int length);
</pre><br>

                      <p class="docText">using the <tt>replace</tt> operations, where <tt>lastname</tt> replaces <tt>Daisy</tt> and <tt>pos</tt> indexes into <tt>generic2</tt> of <tt>length</tt> characters replacing <tt>Ms</tt>. For example, the following</p>
                      <p class="docText">该函数使用 replace 操作实现以下功能：对于字符串 form，将其中的 Daisy 替换为 lastname，将其中的 Ms 替换为字符串 generic2 中从 pos 下标开始的 length 个字符。例如，下面的语句：</p>
                      <pre>
     string lastName("AnnaP");
     string salute = greet(generic1, lastName, generic2, 5, 4);
</pre><br>

                      <p class="docText">returns the <tt>string</tt></p>
                      <p class="docText">将返回字符串：</p>
                      <pre>
     Dear Miss AnnaP:
</pre><br>
                    </td>
                  </tr>
                </table>
              </blockquote>
            </td>
          </tr>
        </table><br>


  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td>
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="toc.html" ><img src="images/teamlib.gif"  width="62" height="15" border="0" align="absmiddle" alt="Team LiB"></a>
        </div>
      </td>

      <td align="right">
        <div style="MARGIN-LEFT: 0.15in;">
          <a href="ch09lev1sec5.html" ><img src="images/previous.gif"  width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="ch09lev1sec7.html" ><img src="images/next.gif"  width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
        </div>
      </td>
    </tr>
  </table>
</body>
</html>
