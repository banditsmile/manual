<!DOCTYPE html>
    <!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
    <!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
         <title>Loading Data Into MemSQL</title> 
        <link rel="shortcut icon" href="../../../static_star_theme/img/favicon.ico"/>
        <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,700italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="../../../static_star_theme/css/theme.css" type="text/css" /> 
        <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
    </head>

    <body class="wy-body-for-nav" role="document">

    <div class="wy-grid-for-nav">

        <div class="wy-full-navbar" data-swiftype-index="false">
            <a href="http://www.memsql.com" class="logo">
                <img src="../../../static_star_theme/img/memsql_logo_horizontal_white.svg" />
            </a>
            <div class="global nav">
                <div class="pull-left left-links">
                </div>
                <div class="pull-right right-links">
                    <a href="http://www.memsql.com/community/" style="word-spacing: 2px;">Community Edition</a>
                    <a href="http://blog.memsql.com">Blog</a>
                    <a href="http://www.memsql.com/memsql-partners">Partners</a>
                    <a href="http://www.memsql.com/resources">Resources</a>
                    <a href="../../../index.html">Documentation</a>
                    <a href="http://www.memsql.com/contact">Contact</a>
                </div>
            </div>
            <div class="nav-links">
                <a href="http://www.memsql.com/product">Product</a>
                <a href="http://www.memsql.com/solutions">Solutions</a>
                <a href="http://www.memsql.com/case-studies">Case Studies</a>
                <a href="http://www.memsql.com/company">Company</a>
                <a class="download" href="http://www.memsql.com/download/">Download Now</a>
            </div>
        </div>

        <nav data-toggle="wy-nav-shift" class="wy-nav-side" data-swiftype-index="false">
            <div class="wy-side-nav-search">
                <div role="search">
  <form id="search-form" class="wy-form" method="get">
    <input type="text" id="st-search-input" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
            </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                
                 <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">MemSQL Docs Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/index.html">How MemSQL Works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../setup/quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../setup/get_started/index.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../connecting/index.html">How to Connect to MemSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to_run_queries/index.html">How to Run Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multi_insert_examples/index.html">Concurrent Multi-Insert Examples</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="index.html">Loading Data Into MemSQL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#option-1-loading-from-mysql">Option 1: Loading from MySQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#option-2-data-stored-in-a-file">Option 2: Data stored in a file</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#option-3-loading-data-from-s3-or-hdfs">Option 3: Loading data from S3 or HDFS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../porting-apps/index.html">How to Port Your Applications to MemSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../memory_management/index.html">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../distributed_architecture/index.html">Distributed Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../codegen/index.html">Code Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../key_concepts/index.html">Database Key Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../distributed_sql/index.html">Distributed SQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../columnar/index.html">Column Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geospatial/index.html">Geospatial Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../json/json/index.html">Javascript Object Notation (JSON)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../admin/index.html">Operations Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ref/commands_by_type/index.html">SQL Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin/config/index.html">Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ops/index.html">MemSQL Ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../loader/index.html">MemSQL Loader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../editions/index.html">MemSQL Editions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">Frequently Asked Questions</a></li>
</ul>
 
            </div>
            &nbsp;
        </nav>

        <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
            <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
                <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
                <a href="../../../index.html" class="logo">
                    <img src="../../../static_star_theme/img/memsql_logo_horizontal_white.svg" />
                    <span class="subtitle">Documentation</span>
                </a>
            </nav>

            <div class="wy-nav-content">
                <div class="rst-content">
                    <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">MemSQL Documentation</a> &raquo;</li>
      
          <li><a href="../index.html">User Manual</a> &raquo;</li>
      
    <li>Loading Data Into MemSQL</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
                    <div role="main" class="document">
                        
  <div class="section" id="loading-data-into-memsql">
<span id="data-loading"></span><h1>Loading Data Into MemSQL<a class="headerlink" href="index.html#loading-data-into-memsql" title="Permalink to this headline">¶</a></h1>
<p>Now that MemSQL is up and running, we’ll cover how to load data into the
database. This guide covers various ways of loading data into the system:</p>
<ul class="simple">
<li>Loading from MySQL</li>
<li>Loading from a file</li>
<li>Loading from S3 or HDFS using MemSQL Loader.</li>
</ul>
<div class="section" id="option-1-loading-from-mysql">
<h2>Option 1: Loading from MySQL<a class="headerlink" href="index.html#option-1-loading-from-mysql" title="Permalink to this headline">¶</a></h2>
<p>The popular open source tool <cite>mysqldump</cite> is a straightforward way to load data
from MySQL into MemSQL For example, on a machine with a MySQL database <cite>foo</cite>,
issue the following commands.</p>
<div class="highlight"><pre><span class="n">mysqldump</span> <span class="o">-</span><span class="n">h</span> <span class="mi">127</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span> <span class="o">--</span><span class="k">databases</span> <span class="n">foo</span> <span class="o">&gt;</span> <span class="n">foodump</span><span class="p">.</span><span class="k">sql</span>
</pre></div>
<p>You can also dump specific tables by using the <cite>&#8211;tables</cite> option:</p>
<div class="highlight"><pre><span class="n">mysqldump</span> <span class="o">-</span><span class="n">h</span> <span class="mi">127</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span> <span class="o">--</span><span class="k">databases</span> <span class="n">foo</span> <span class="o">--</span><span class="kp">tables</span> <span class="n">tbl_name</span> <span class="o">&gt;</span> <span class="n">foodump</span><span class="p">.</span><span class="k">sql</span>
</pre></div>
<p>Since MemSQL is a distributed database,, we need to tell MemSQL how to shard the
data across the cluster. If all your tables have primary keys, MemSQL will
automatically use the primary keys to shard them, so you can skip this next
step. Otherwise, you need to open up <cite>foodump.sql</cite> in your favorite editor and
either add shard keys or declare the tables as reference tables (for more
details, see <a class="reference internal" href="../distributed_sql/index.html"><em>Distributed SQL</em></a>).</p>
<p>For instance, suppose <cite>foodump.sql</cite> contains</p>
<div class="highlight"><pre><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="ss">`users`</span> <span class="p">(</span>
  <span class="ss">`id`</span> <span class="kt">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">NOT</span> <span class="no">NULL</span><span class="p">,</span>
  <span class="ss">`username`</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="no">NULL</span><span class="p">,</span>
  <span class="ss">`address`</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
<p>To make this a valid MemSQL table, consider changing it to</p>
<div class="highlight"><pre><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="ss">`users`</span> <span class="p">(</span>
  <span class="ss">`id`</span> <span class="kt">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">NOT</span> <span class="no">NULL</span><span class="p">,</span>
  <span class="ss">`username`</span> <span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="no">NULL</span><span class="p">,</span>
  <span class="ss">`address`</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
   <span class="n">SHARD</span> <span class="k">KEY</span><span class="p">(</span><span class="ss">`id`</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
<p>For more information on choosing a shard key, see
<a class="reference internal" href="../distributed_sql/index.html#primary-key-as-the-shard-key"><em>Primary Key as the Shard Key</em></a>. Once all your tables have either shard key
or primary key declarations, you can run the following on the master aggregator:</p>
<div class="highlight"><pre><span class="n">mysql</span> <span class="o">-</span><span class="n">h</span> <span class="mi">127</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span> <span class="o">&lt;</span> <span class="n">foodump</span><span class="p">.</span><span class="k">sql</span>
</pre></div>
<p>All tables and data from <cite>users</cite> will now be loaded into MemSQL.</p>
</div>
<div class="section" id="option-2-data-stored-in-a-file">
<h2>Option 2: Data stored in a file<a class="headerlink" href="index.html#option-2-data-stored-in-a-file" title="Permalink to this headline">¶</a></h2>
<p>MemSQL supports standard SQL loading constructs. For instance, after creating
<tt class="docutils literal"><span class="pre">tbl_name</span></tt>, run:</p>
<div class="highlight-mysql"><div class="highlight"><pre><span class="k">LOAD</span> <span class="n">DATA</span> <span class="k">INFILE</span> <span class="s1">&#39;file_name.tsv&#39;</span> <span class="k">INTO</span> <span class="k">TABLE</span> <span class="n">tbl_name</span>
<span class="n">FIELDS</span> <span class="k">TERMINATED</span> <span class="k">BY</span> <span class="s1">&#39;|&#39;</span>
<span class="k">LINES</span> <span class="k">TERMINATED</span> <span class="k">BY</span> <span class="s1">&#39;\n&#39;</span>
</pre></div>
</div>
<p>For more details see <a class="reference internal" href="../../ref/LOAD_DATA/index.html"><em>LOAD DATA</em></a>.</p>
</div>
<div class="section" id="option-3-loading-data-from-s3-or-hdfs">
<h2>Option 3: Loading data from S3 or HDFS<a class="headerlink" href="index.html#option-3-loading-data-from-s3-or-hdfs" title="Permalink to this headline">¶</a></h2>
<p>If your data lives in S3 or HDFS, you can use <tt class="docutils literal"><span class="pre">memsql-loader</span></tt> to automatically
download and ingest. Simply follow the instructions at <a class="reference internal" href="../../loader/index.html"><em>MemSQL Loader</em></a>.</p>
</div>
</div>


                    </div>
                    <footer data-swiftype-index="false">
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../porting-apps/index.html" class="btn btn-neutral float-right" title="How to Port Your Applications to MemSQL">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../multi_insert_examples/index.html" class="btn btn-neutral" title="Concurrent Multi-Insert Examples"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>&copy; Copyright 2015, MemSQL</p>
  </div>
</footer>
                </div>
            </div>

        </section>
    </div>

    <script type="text/javascript" src="../../../static_star_theme/js/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/underscore-min.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/jquery.ba-hashchange.min.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/jquery.swiftype.search.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/jquery.swiftype.autocomplete.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/theme.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/search.js"></script> 

        <!-- Google Analytics -->
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-21693588-3', 'auto');
            ga('send', 'pageview');
        </script>
        <!-- End Google Analytics -->

        <script type="text/javascript">
            $.ajax({
                url: document.location.protocol + '//munchkin.marketo.net/munchkin.js',
                dataType: 'script',
                cache: true,
                success: function() {
                    Munchkin.init('759-YLI-316');
                }
            });
        </script>
    </body>
</html>