<!DOCTYPE html>
    <!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
    <!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
         <title>Administering a Cluster</title> 
        <link rel="shortcut icon" href="../../../static_star_theme/img/favicon.ico"/>
        <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,700italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="../../../static_star_theme/css/theme.css" type="text/css" /> 
        <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
    </head>

    <body class="wy-body-for-nav" role="document">

    <div class="wy-grid-for-nav">

        <div class="wy-full-navbar" data-swiftype-index="false">
            <a href="http://www.memsql.com" class="logo">
                <img src="../../../static_star_theme/img/memsql_logo_horizontal_white.svg" />
            </a>
            <div class="global nav">
                <div class="pull-left left-links">
                </div>
                <div class="pull-right right-links">
                    <a href="http://www.memsql.com/community/" style="word-spacing: 2px;">Community Edition</a>
                    <a href="http://blog.memsql.com">Blog</a>
                    <a href="http://www.memsql.com/memsql-partners">Partners</a>
                    <a href="http://www.memsql.com/resources">Resources</a>
                    <a href="../../../index.html">Documentation</a>
                    <a href="http://www.memsql.com/contact">Contact</a>
                </div>
            </div>
            <div class="nav-links">
                <a href="http://www.memsql.com/product">Product</a>
                <a href="http://www.memsql.com/solutions">Solutions</a>
                <a href="http://www.memsql.com/case-studies">Case Studies</a>
                <a href="http://www.memsql.com/company">Company</a>
                <a class="download" href="http://www.memsql.com/download/">Download Now</a>
            </div>
        </div>

        <nav data-toggle="wy-nav-shift" class="wy-nav-side" data-swiftype-index="false">
            <div class="wy-side-nav-search">
                <div role="search">
  <form id="search-form" class="wy-form" method="get">
    <input type="text" id="st-search-input" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
            </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                
                 <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">MemSQL Docs Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/index.html">How MemSQL Works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../setup/quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../setup/get_started/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/index.html">User Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Operations Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../upgrade/index.html">Upgrading MemSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin_concepts/index.html">Administrator Key Concepts</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="index.html">Administering a Cluster</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#cluster-administration-commands">Cluster Administration Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#setting-the-redundancy-level">Setting the Redundancy Level</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#adding-and-removing-leaves">Adding and Removing Leaves</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#attaching-and-detaching-leaf-nodes">Attaching and Detaching Leaf Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#rebalancing-the-cluster">Rebalancing the Cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#showing-leaves-in-a-cluster">Showing Leaves in a Cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#showing-partitions-in-a-database">Showing Partitions in a Database</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../security/index.html">Securing MemSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ssl/index.html">SSL Network Encryption</a></li>
<li class="toctree-l2"><a class="reference internal" href="../high_availability/index.html">Managing High Availability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../durability_recovery/index.html">Using Durability and Recovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="../replication/index.html">Using Replication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backup_restore/index.html">Backing Up and Restoring Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_export/index.html">Exporting Data From MemSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tracelog/index.html">Trace Log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../from_mysql/index.html">Transitioning from MySQL to MemSQL</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ref/commands_by_type/index.html">SQL Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config/index.html">Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ops/index.html">MemSQL Ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../loader/index.html">MemSQL Loader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../editions/index.html">MemSQL Editions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">Frequently Asked Questions</a></li>
</ul>
 
            </div>
            &nbsp;
        </nav>

        <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
            <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
                <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
                <a href="../../../index.html" class="logo">
                    <img src="../../../static_star_theme/img/memsql_logo_horizontal_white.svg" />
                    <span class="subtitle">Documentation</span>
                </a>
            </nav>

            <div class="wy-nav-content">
                <div class="rst-content">
                    <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">MemSQL Documentation</a> &raquo;</li>
      
          <li><a href="../index.html">Operations Manual</a> &raquo;</li>
      
    <li>Administering a Cluster</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
                    <div role="main" class="document">
                        
  <div class="section" id="administering-a-cluster">
<span id="cluster"></span><h1>Administering a Cluster<a class="headerlink" href="index.html#administering-a-cluster" title="Permalink to this headline">¶</a></h1>
<p>MemSQL&#8217;s distributed architecture provides commands and settings used to manage a MemSQL cluster.</p>
<div class="section" id="cluster-administration-commands">
<h2>Cluster Administration Commands<a class="headerlink" href="index.html#cluster-administration-commands" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../../ref/ADD_LEAF/index.html"><em>ADD LEAF</em></a></li>
<li><a class="reference internal" href="../../ref/REMOVE_LEAF/index.html"><em>REMOVE LEAF</em></a></li>
<li><a class="reference internal" href="../../ref/ATTACH_LEAF/index.html"><em>ATTACH LEAF</em></a></li>
<li><a class="reference internal" href="../../ref/DETACH_LEAF/index.html"><em>DETACH LEAF</em></a></li>
<li><a class="reference internal" href="../../ref/SHOW_LEAVES/index.html"><em>SHOW LEAVES</em></a></li>
<li><a class="reference internal" href="../../ref/REBALANCE_PARTITIONS/index.html"><em>REBALANCE PARTITIONS</em></a></li>
<li><a class="reference internal" href="../../ref/EXPLAIN_REBALANCE_PARTITIONS/index.html"><em>EXPLAIN REBALANCE PARTITIONS</em></a></li>
<li><a class="reference internal" href="../../ref/SHOW_REBALANCE_STATUS/index.html"><em>SHOW REBALANCE STATUS</em></a></li>
<li><a class="reference internal" href="../../ref/SHOW_PARTITIONS/index.html"><em>SHOW PARTITIONS</em></a></li>
</ul>
</div>
<div class="section" id="setting-the-redundancy-level">
<span id="redundancy-level"></span><h2>Setting the Redundancy Level<a class="headerlink" href="index.html#setting-the-redundancy-level" title="Permalink to this headline">¶</a></h2>
<p>To use <a class="reference internal" href="../../concepts/distributed_architecture/index.html#availability-groups"><em>Availability Groups</em></a> in a cluster, you need to set the <cite>redundancy level</cite>, which specifies the maximum number (1 or 2) of availability groups. By default, this is set to 1. There are two ways in which to change the redundancy level.</p>
<div class="section" id="setting-the-system-variable">
<h3>Setting the System Variable<a class="headerlink" href="index.html#setting-the-system-variable" title="Permalink to this headline">¶</a></h3>
<p>One way is to use the <a class="reference internal" href="../../ref/SET_GLOBAL/index.html"><em>SET GLOBAL</em></a> command to change <tt class="docutils literal"><span class="pre">redundancy_level</span></tt> system variable on the master aggregator at runtime (see <a class="reference internal" href="index.html#redundancy-level"><em>Setting the Redundancy Level</em></a>):</p>
<div class="highlight-none"><div class="highlight"><pre>SET @@GLOBAL.redundancy_level = {1 | 2};
</pre></div>
</div>
<p>You can inspect the current value with the <a class="reference internal" href="../../ref/SELECT_GLOBAL/index.html"><em>SELECT GLOBAL</em></a> command:</p>
<div class="highlight-none"><div class="highlight"><pre>SELECT @@GLOBAL.redundancy_level;
</pre></div>
</div>
</div>
<div class="section" id="adding-redundancy-level-to-memsql-cnf">
<h3>Adding <tt class="docutils literal"><span class="pre">redundancy_level</span></tt> to <tt class="docutils literal"><span class="pre">memsql.cnf</span></tt><a class="headerlink" href="index.html#adding-redundancy-level-to-memsql-cnf" title="Permalink to this headline">¶</a></h3>
<p>Another way is to add the <tt class="docutils literal"><span class="pre">redundancy_level</span></tt> setting anywhere in the <tt class="docutils literal"><span class="pre">memsql.cnf</span></tt> file (see <a class="reference internal" href="../memsql.cnf/index.html"><em>memsql.cnf Settings</em></a>). There are two settings:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">redundancy_level=1</span></tt> (default) - no redundancy</li>
<li><tt class="docutils literal"><span class="pre">redundancy_level=2</span></tt> - to allow up to two availability groups</li>
</ul>
</div>
</div>
<div class="section" id="adding-and-removing-leaves">
<span id="task-adding-leaves"></span><h2>Adding and Removing Leaves<a class="headerlink" href="index.html#adding-and-removing-leaves" title="Permalink to this headline">¶</a></h2>
<p>Use <a class="reference internal" href="../../ref/ADD_LEAF/index.html"><em>ADD LEAF</em></a> and <a class="reference internal" href="../../ref/REMOVE_LEAF/index.html"><em>REMOVE LEAF</em></a> to add leaves to, and remove leaves from, a MemSQL cluster.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These commands must be run against the <a class="reference internal" href="../../concepts/master_aggregator/index.html#master-aggregator"><em>Master Aggregator</em></a>.</p>
</div>
<div class="highlight-none"><div class="highlight"><pre>ADD LEAF user[:&#39;password&#39;]@&#39;host&#39;[:port] [INTO GROUP {1|2}]
</pre></div>
</div>
<p>Password (default &#8220;&#8221;) and port (default 3306) are optional. If you do not explicitly specify a group, MemSQL will
automatically add the leaf into the smallest group less than or equal to <tt class="docutils literal"><span class="pre">redundancy_level</span></tt>.</p>
<div class="highlight-none"><div class="highlight"><pre>REMOVE LEAF &#39;host&#39;:port
</pre></div>
</div>
<p><a class="reference internal" href="../../ref/REMOVE_LEAF/index.html"><em>REMOVE LEAF</em></a> cleanly removes a leaf from the system. If the leaf does not have a pair, MemSQL will rebalance its partitions onto the remaining leaves before removing it.</p>
</div>
<div class="section" id="attaching-and-detaching-leaf-nodes">
<span id="task-attaching-leaves"></span><h2>Attaching and Detaching Leaf Nodes<a class="headerlink" href="index.html#attaching-and-detaching-leaf-nodes" title="Permalink to this headline">¶</a></h2>
<p>Use the <a class="reference internal" href="../../ref/ATTACH_LEAF/index.html"><em>ATTACH LEAF</em></a> and <a class="reference internal" href="../../ref/DETACH_LEAF/index.html"><em>DETACH LEAF</em></a> commands to attach leaves to, or detach leaves from, the system.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These commands must be run against the <a class="reference internal" href="../../concepts/master_aggregator/index.html#master-aggregator"><em>Master Aggregator</em></a>. As of MemSQL 4.0 the master aggregator will automatically attach leaves back into the cluster if they become reachable again so you should never need to run <tt class="docutils literal"><span class="pre">ATTACH</span> <span class="pre">LEAF</span></tt> yourself.</p>
</div>
<div class="highlight-none"><div class="highlight"><pre>ATTACH LEAF &#39;host&#39;[:port] [FORCE] [NO REBALANCE]
</pre></div>
</div>
<p><a class="reference internal" href="../../ref/ATTACH_LEAF/index.html"><em>ATTACH LEAF</em></a> will transition the leaf from the <tt class="docutils literal"><span class="pre">detached</span></tt> state to the <tt class="docutils literal"><span class="pre">online</span></tt> state. <tt class="docutils literal"><span class="pre">ATTACH</span></tt> is used to reintroduce a leaf back into the system. If necessary, <tt class="docutils literal"><span class="pre">ATTACH</span> <span class="pre">LEAF</span></tt> also performs any <a class="reference internal" href="index.html#task-rebalancing-partitions"><em>rebalance</em></a> / resyncing actions needed to bring the leaf up to date with the rest of the cluster.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you wish to reattach many leaves at one time (eg after a restart of the cluster), we recommend you run <tt class="docutils literal"><span class="pre">ATTACH</span> <span class="pre">LEAF</span> <span class="pre">...</span> <span class="pre">NO</span> <span class="pre">REBALANCE</span></tt>, and then run <a class="reference internal" href="index.html#task-rebalancing-partitions"><em>REBALANCE PARTITIONS</em></a> afterward. This will rebalance and sync all partitions in one operation.</p>
</div>
<div class="highlight-none"><div class="highlight"><pre>DETACH LEAF &#39;host&#39;[:port]
</pre></div>
</div>
<p><a class="reference internal" href="../../ref/DETACH_LEAF/index.html"><em>DETACH LEAF</em></a> will transition the leaf from the <tt class="docutils literal"><span class="pre">online</span></tt> to the <tt class="docutils literal"><span class="pre">detached</span></tt> state. While <tt class="docutils literal"><span class="pre">DETACH</span> <span class="pre">LEAF</span></tt> is similar to <a class="reference internal" href="../../ref/REMOVE_LEAF/index.html"><em>REMOVE LEAF</em></a>,
<tt class="docutils literal"><span class="pre">DETACH</span> <span class="pre">LEAF</span></tt> changes the leaf state but does not delete the leaf from aggregator metadata. Once a leaf has been detached, it can be attached once again by running <tt class="docutils literal"><span class="pre">ATTACH_LEAF</span></tt>. <tt class="docutils literal"><span class="pre">DETACH</span> <span class="pre">LEAF</span></tt> is useful if you would like to temporarily take down a leaf for repairs without erasing it from metadata.</p>
<p>Both <tt class="docutils literal"><span class="pre">ATTACH_LEAF</span></tt> and <tt class="docutils literal"><span class="pre">DETACH_LEAF</span></tt> populate <a class="reference internal" href="../../ref/SHOW_REBALANCE_STATUS/index.html"><em>SHOW REBALANCE STATUS</em></a> for each database if they perform any rebalance actions.</p>
</div>
<div class="section" id="rebalancing-the-cluster">
<span id="task-rebalancing-partitions"></span><h2>Rebalancing the Cluster<a class="headerlink" href="index.html#rebalancing-the-cluster" title="Permalink to this headline">¶</a></h2>
<p>In the event of a failure, MemSQL only promotes just enough slave partitions to put the cluster back online. The failed leaves
show up as <tt class="docutils literal"><span class="pre">offline</span></tt> in <a class="reference internal" href="../../ref/SHOW_LEAVES/index.html"><em>SHOW LEAVES</em></a>. When these leaves are once again reachable, they transition to the <tt class="docutils literal"><span class="pre">detached</span></tt> state.
You can run <a class="reference internal" href="../../ref/ATTACH_LEAF/index.html"><em>ATTACH LEAF</em></a> to reintroduce them into the cluster and rebalance their partitions automatically.</p>
<p>If you want to permanently remove or replace these machines, you must remove the leaves with <a class="reference internal" href="../../ref/REMOVE_LEAF/index.html"><em>REMOVE LEAF</em></a> and run the
<tt class="docutils literal"><span class="pre">REBALANCE</span> <span class="pre">PARTITIONS</span> <span class="pre">ON</span> <span class="pre">db</span></tt> command. <a class="reference internal" href="../../ref/REBALANCE_PARTITIONS/index.html"><em>REBALANCE PARTITIONS</em></a> will not automatically remove <tt class="docutils literal"><span class="pre">detached</span></tt> or <tt class="docutils literal"><span class="pre">offline</span></tt>
leaves from the cluster: you must use <a class="reference internal" href="../../ref/REMOVE_LEAF/index.html"><em>REMOVE LEAF</em></a> to remove them explicitly.</p>
<p>You can also use <tt class="docutils literal"><span class="pre">REBALANCE</span> <span class="pre">PARTITIONS</span></tt> to elastically increase the capacity of the cluster. Simply add new leaves with the
<a class="reference internal" href="../../ref/ADD_LEAF/index.html"><em>ADD LEAF</em></a> command and then run <tt class="docutils literal"><span class="pre">REBALANCE</span> <span class="pre">PARTITIONS</span></tt> to move partitions over to the new machines.</p>
<p><a class="reference internal" href="../../ref/REBALANCE_PARTITIONS/index.html"><em>REBALANCE PARTITIONS</em></a> rebalances data for a particular database.</p>
<div class="highlight-none"><div class="highlight"><pre>REBALANCE PARTITIONS ON db [FORCE]
</pre></div>
</div>
<p>This command is responsible for:</p>
<ul class="simple">
<li>Load balancing the number of partitions per leaf.</li>
<li>Load balancing the number of masters / slaves for each leaf within a pair.</li>
</ul>
<p><a class="reference internal" href="../../ref/REBALANCE_PARTITIONS/index.html"><em>REBALANCE PARTITIONS</em></a> first computes what moves to make, and generates a multi-phase plan
of cluster operations. Each step within a given phase can run in parallel. MemSQL lets you preview this plan with the <a class="reference internal" href="../../ref/EXPLAIN_REBALANCE_PARTITIONS/index.html"><em>EXPLAIN REBALANCE PARTITIONS</em></a> command:</p>
<div class="highlight-none"><div class="highlight"><pre>EXPLAIN REBALANCE PARTITIONS ON db [FORCE]
</pre></div>
</div>
<p>After computing what moves to make, <a class="reference internal" href="../../ref/REBALANCE_PARTITIONS/index.html"><em>REBALANCE PARTITIONS</em></a> runs each phase. Although the command blocks until the <a class="reference internal" href="../../ref/REBALANCE_PARTITIONS/index.html"><em>REBALANCE PARTITIONS</em></a> operation completes, you can view the progress of the <a class="reference internal" href="../../ref/REBALANCE_PARTITIONS/index.html"><em>REBALANCE PARTITIONS</em></a> command with <a class="reference internal" href="../../ref/SHOW_REBALANCE_STATUS/index.html"><em>SHOW REBALANCE STATUS</em></a>:</p>
<div class="highlight-none"><div class="highlight"><pre>SHOW REBALANCE STATUS ON db
</pre></div>
</div>
<p>In the event of any concurrent, higher priority failures, <a class="reference internal" href="../../ref/REBALANCE_PARTITIONS/index.html"><em>REBALANCE PARTITIONS</em></a> will error out and leave the cluster in
a working state. Run <a class="reference internal" href="../../ref/SHOW_WARNINGS/index.html"><em>SHOW WARNINGS</em></a> to see a log of issues encountered by <a class="reference internal" href="../../ref/REBALANCE_PARTITIONS/index.html"><em>REBALANCE PARTITIONS</em></a>. These issues are also mirrored in <a class="reference internal" href="../../ref/SHOW_REBALANCE_STATUS/index.html"><em>SHOW REBALANCE STATUS</em></a>.</p>
<p>By default, if partitions are irrecoverably lost (both machines in a pair are missing), <a class="reference internal" href="../../ref/REBALANCE_PARTITIONS/index.html"><em>REBALANCE PARTITIONS</em></a> will fail with an error. You can override this error by specifying the <tt class="docutils literal"><span class="pre">FORCE</span></tt> flag.</p>
</div>
<div class="section" id="showing-leaves-in-a-cluster">
<span id="task-showing-leaves"></span><h2>Showing Leaves in a Cluster<a class="headerlink" href="index.html#showing-leaves-in-a-cluster" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../../ref/SHOW_LEAVES/index.html"><em>SHOW LEAVES</em></a> displays the state of all the leaves in the cluster.</p>
<div class="highlight-none"><div class="highlight"><pre>memsql&gt; SHOW LEAVES;
+---------------+-------+--------------------+---------------+-----------+--------+--------------------+---------------------------+
| Host          | Port  | Availability_Group | Pair_Host     | Pair_Port | State  | Opened_Connections | Average_Roundtrip_Latency |
+---------------+-------+--------------------+---------------+-----------+--------+--------------------+---------------------------+
| 192.168.1.110 |  3306 |                  1 | 192.168.1.112 |      3306 | online |                  5 |                     0.299 |
| 192.168.1.111 |  3306 |                  1 | 192.168.1.113 |      3306 | online |                  5 |                     0.293 |
| 192.168.1.112 |  3306 |                  2 | 192.168.1.110 |      3306 | online |                  1 |                     0.271 |
| 192.168.1.113 |  3306 |                  2 | 192.168.1.111 |      3306 | online |                  1 |                     0.264 |
+---------------+-------+--------------------+---------------+-----------+--------+--------------------+---------------------------+
4 rows in set (0.00 sec)
</pre></div>
</div>
<p>The columns produced by <a class="reference internal" href="../../ref/SHOW_LEAVES/index.html"><em>SHOW LEAVES</em></a> are the following:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Host</span></tt>, <tt class="docutils literal"><span class="pre">Port</span></tt>. The host and port for a leaf are its unique identifier.</li>
<li><tt class="docutils literal"><span class="pre">Availability_Group</span></tt>. This must be either 1 or 2. See <a class="reference internal" href="../../concepts/distributed_architecture/index.html#availability-groups"><em>Availability Groups</em></a> for details about this column.</li>
<li><tt class="docutils literal"><span class="pre">Pair_Host</span></tt>, <tt class="docutils literal"><span class="pre">Pair_Port</span></tt>. The host and port for the leaf&#8217;s pair. These columns are <tt class="docutils literal"><span class="pre">NULL</span></tt> if the leaf does not have a pair.</li>
<li><tt class="docutils literal"><span class="pre">State</span></tt>. The current state of the leaf. Is one of <tt class="docutils literal"><span class="pre">online</span></tt> (healthy and part of the system), <tt class="docutils literal"><span class="pre">offline</span></tt> (currently unreachable), or <tt class="docutils literal"><span class="pre">detached</span></tt> (reachable, but not part of the system).</li>
<li><tt class="docutils literal"><span class="pre">Opened_Connections</span></tt>. The number of opened connections to the server from the given aggregator.</li>
<li><tt class="docutils literal"><span class="pre">Average_Roundtrip_Latency</span></tt>. An exponential moving average of the ping latency (in milliseconds) to the leaf. This column is only populated on the master aggregator since it is the only aggregator that pings the leaves.</li>
</ul>
</div>
<div class="section" id="showing-partitions-in-a-database">
<span id="task-showing-partitions"></span><h2>Showing Partitions in a Database<a class="headerlink" href="index.html#showing-partitions-in-a-database" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../../ref/SHOW_PARTITIONS/index.html"><em>SHOW PARTITIONS</em></a> displays each partition for a specified database.</p>
<div class="highlight-none"><div class="highlight"><pre>SHOW PARTITIONS ON db
</pre></div>
</div>
<p>For example,</p>
<div class="highlight-mysql"><div class="highlight"><pre><span class="n">memsql</span><span class="o">&gt;</span> <span class="k">SHOW</span> <span class="n">PARTITIONS</span> <span class="k">ON</span> <span class="n">web</span><span class="p">;</span>
<span class="o">+---------+---------------+-------+--------+</span>
<span class="o">|</span> <span class="n">Ordinal</span> <span class="o">|</span> <span class="n">Host</span>          <span class="o">|</span> <span class="n">Port</span>  <span class="o">|</span> <span class="n">Role</span>   <span class="o">|</span>
<span class="o">+---------+---------------+-------+--------+</span>
<span class="o">|</span>       <span class="mi">0</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">110</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Master</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">0</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">112</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Slave</span>  <span class="o">|</span>
<span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">113</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Master</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">111</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Slave</span>  <span class="o">|</span>
<span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">113</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Master</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">111</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Slave</span>  <span class="o">|</span>
<span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">111</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Master</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">113</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Slave</span>  <span class="o">|</span>
<span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">110</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Master</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">112</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Slave</span>  <span class="o">|</span>
<span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">111</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Master</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">113</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Slave</span>  <span class="o">|</span>
<span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">112</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Master</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">110</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Slave</span>  <span class="o">|</span>
<span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">112</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Master</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">110</span> <span class="o">|</span>  <span class="mi">3306</span> <span class="o">|</span> <span class="n">Slave</span>  <span class="o">|</span>
<span class="o">+---------+---------------+-------+--------+</span>
<span class="mi">16</span> <span class="n">rows</span> <span class="k">in</span> <span class="kt">set</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>
</div>
<p>The columns produced by <a class="reference internal" href="../../ref/SHOW_PARTITIONS/index.html"><em>SHOW PARTITIONS</em></a> are the following:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Ordinal</span></tt>. The numeric ordinal of the partition.</li>
<li><tt class="docutils literal"><span class="pre">Host</span></tt>, <tt class="docutils literal"><span class="pre">Port</span></tt>. The host and port for the leaf on which the partition lives.</li>
<li><tt class="docutils literal"><span class="pre">Role</span></tt>. This column is either <tt class="docutils literal"><span class="pre">Master</span></tt> or <tt class="docutils literal"><span class="pre">Slave</span></tt>. <tt class="docutils literal"><span class="pre">Slave</span></tt> partitions replicate from <tt class="docutils literal"><span class="pre">Master</span></tt> partitions. MemSQL pushes all read and write queries to the <tt class="docutils literal"><span class="pre">Master</span></tt> partition and promotes the <tt class="docutils literal"><span class="pre">Slave</span></tt> partition in the event of a failure.</li>
</ul>
<p><strong>Related Topics</strong></p>
<ul class="simple">
<li><a class="reference internal" href="../index.html"><em>Operations Manual</em></a></li>
</ul>
</div>
</div>


                    </div>
                    <footer data-swiftype-index="false">
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../security/index.html" class="btn btn-neutral float-right" title="Securing MemSQL">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../admin_concepts/index.html" class="btn btn-neutral" title="Administrator Key Concepts"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>&copy; Copyright 2015, MemSQL</p>
  </div>
</footer>
                </div>
            </div>

        </section>
    </div>

    <script type="text/javascript" src="../../../static_star_theme/js/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/underscore-min.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/jquery.ba-hashchange.min.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/jquery.swiftype.search.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/jquery.swiftype.autocomplete.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/theme.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/search.js"></script> 

        <!-- Google Analytics -->
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-21693588-3', 'auto');
            ga('send', 'pageview');
        </script>
        <!-- End Google Analytics -->

        <script type="text/javascript">
            $.ajax({
                url: document.location.protocol + '//munchkin.marketo.net/munchkin.js',
                dataType: 'script',
                cache: true,
                success: function() {
                    Munchkin.init('759-YLI-316');
                }
            });
        </script>
    </body>
</html>