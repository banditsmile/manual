<!DOCTYPE html>
    <!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
    <!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
         <title>Offline Installation</title> 
        <link rel="shortcut icon" href="../../../static_star_theme/img/favicon.ico"/>
        <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,700italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="../../../static_star_theme/css/theme.css" type="text/css" /> 
        <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
    </head>

    <body class="wy-body-for-nav" role="document">

    <div class="wy-grid-for-nav">

        <div class="wy-full-navbar" data-swiftype-index="false">
            <a href="http://www.memsql.com" class="logo">
                <img src="../../../static_star_theme/img/memsql_logo_horizontal_white.svg" />
            </a>
            <div class="global nav">
                <div class="pull-left left-links">
                </div>
                <div class="pull-right right-links">
                    <a href="http://www.memsql.com/community/" style="word-spacing: 2px;">Community Edition</a>
                    <a href="http://blog.memsql.com">Blog</a>
                    <a href="http://www.memsql.com/memsql-partners">Partners</a>
                    <a href="http://www.memsql.com/resources">Resources</a>
                    <a href="../../../index.html">Documentation</a>
                    <a href="http://www.memsql.com/contact">Contact</a>
                </div>
            </div>
            <div class="nav-links">
                <a href="http://www.memsql.com/product">Product</a>
                <a href="http://www.memsql.com/solutions">Solutions</a>
                <a href="http://www.memsql.com/case-studies">Case Studies</a>
                <a href="http://www.memsql.com/company">Company</a>
                <a class="download" href="http://www.memsql.com/download/">Download Now</a>
            </div>
        </div>

        <nav data-toggle="wy-nav-shift" class="wy-nav-side" data-swiftype-index="false">
            <div class="wy-side-nav-search">
                <div role="search">
  <form id="search-form" class="wy-form" method="get">
    <input type="text" id="st-search-input" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
            </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                
                 <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">MemSQL Docs Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/index.html">How MemSQL Works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../get_started/index.html">Installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../requirements/index.html">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../best_practices/index.html">Installation Best Practices</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="index.html">Offline Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/index.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin/index.html">Operations Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ref/commands_by_type/index.html">SQL Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin/config/index.html">Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ops/index.html">MemSQL Ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../loader/index.html">MemSQL Loader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../editions/index.html">MemSQL Editions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">Frequently Asked Questions</a></li>
</ul>
 
            </div>
            &nbsp;
        </nav>

        <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
            <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
                <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
                <a href="../../../index.html" class="logo">
                    <img src="../../../static_star_theme/img/memsql_logo_horizontal_white.svg" />
                    <span class="subtitle">Documentation</span>
                </a>
            </nav>

            <div class="wy-nav-content">
                <div class="rst-content">
                    <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">MemSQL Documentation</a> &raquo;</li>
      
          <li><a href="../get_started/index.html">Installation</a> &raquo;</li>
      
    <li>Offline Installation</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
                    <div role="main" class="document">
                        
  <div class="section" id="offline-installation">
<h1>Offline Installation<a class="headerlink" href="index.html#offline-installation" title="Permalink to this headline">Â¶</a></h1>
<p>You may need to perform a partial or full installation of MemSQL offline if one of these conditions are met:</p>
<ul>
<li><p class="first">The primary agent host does not have internet access</p>
</li>
<li><p class="first">Certain system limitations prevent users from having full access to hosts such as limitations on:</p>
<blockquote>
<div><ul class="simple">
<li>sudo</li>
<li>ssh</li>
<li>port access</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>The degree to which you may need to perform an offline installation will depend on the extent to which your system access is limited.</p>
<p>This section lists all the steps needed to do a fully offline cluster installation. This section also assumes that you have read the steps to install MemSQL online, which is described in the <a class="reference internal" href="../setup_onprem/index.html"><em>On-Premises Deployment</em></a> section of the Quick Start Guide.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If any manual actions are required, it is recommended to familiarize yourself with the <a class="reference internal" href="../../ops/agent/index.html"><em>MemSQL Ops command line interface</em></a> before proceeding with an installation.</p>
</div>
<p>Follow the steps below to set up your MemSQL cluster:</p>
<ol class="arabic">
<li><p class="first">Download the MemSQL Ops installer from <a class="reference external" href="http://www.memsql.com/download">memsql.com/download</a> using a machine with internet access. This downloaded file should be a compressed tar.gz file. After downloading, copy the file to your chosen primary agent host.</p>
</li>
<li><p class="first">Unpack the compressed MemSQL Ops installer inside your primary host, which expands into the MemSQL Ops folder, <tt class="docutils literal"><span class="pre">memsql-ops-&lt;version&gt;</span></tt>.</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre>tar xvf memsql-ops-&lt;version&gt;.tar.gz
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Install MemSQL Ops on your primary agent.</p>
<p><strong>With sudo access</strong></p>
<blockquote>
<div><p>Within that MemSQL Ops folder, run <tt class="docutils literal"><span class="pre">sudo</span> <span class="pre">./install.sh</span></tt>. This will install MemSQL Ops on the primary host.</p>
</div></blockquote>
<p><strong>Without sudo access</strong></p>
<blockquote>
<div><p>If you do not have sudo access on the machine, do the following:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Ensure the <tt class="docutils literal"><span class="pre">memsql-ops-&lt;version&gt;</span></tt> directory is in a directory you have access to. <em>(required)</em></p>
</li>
<li><p class="first">Set up <tt class="docutils literal"><span class="pre">memsql-ops</span></tt> to initialize at system startup (i.e. ensure <tt class="docutils literal"><span class="pre">/path/to/memsql-ops/memsql-ops</span> <span class="pre">start</span></tt> runs at system start). Refer to your distribution&#8217;s guides for more information on how to do this. <em>(recommended)</em></p>
</li>
<li><p class="first">Configure Linux settings for your host as described in the <a class="reference internal" href="../best_practices/index.html"><em>Installation Best Practices</em></a> section. <em>(recommended)</em></p>
</li>
<li><p class="first">Start the MemSQL Ops agent and web interface. This does not configure any system-wide permissions or settings. <em>(required)</em></p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre>/path/to/memsql-ops/memsql-ops start
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first">Once MemSQL Ops is installed on the primary host, the MemSQL Ops web interface will be accessible on <tt class="docutils literal"><span class="pre">http://&lt;primary_host_name&gt;:9000</span></tt>. Point your browser to that URL and follow the steps to configure additional MemSQL Ops hosts and finish configuring your MemSQL cluster.</p>
<blockquote>
<div><p><strong>Without port 9000 accessible from your browser</strong></p>
<blockquote>
<div><ul>
<li><p class="first">By default, MemSQL Ops will expose its web interface on port 9000.  The web interface is the recommended way of installing MemSQL and MemSQL Ops, so restart MemSQL Ops on an exposed port if possible.</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre>/path/to/memsql-ops/memsql-ops stop
/path/to/memsql-ops/memsql-ops start --port NNN
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first">Provide MemSQL Ops with a license file and a build of MemSQL.  If internet access is not available on your primary agent or the web GUI is not available, the license and binary files must be downloaded manually.</p>
<blockquote>
<div><p><strong>Through the web interface and with internet access on the primary agent</strong></p>
<blockquote>
<div><ul>
<li><p class="first">Choose to deploy either the Enterprise or Community Edition of MemSQL.</p>
<blockquote>
<div><div id="offline-memsql-file-add"></div><div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If you select the <em>Enterprise Edition</em>, the MemSQL Ops web interface will prompt you for a valid license key. If you do not have one already, you can obtain a license key either through <a class="reference external" href="http://www.memsql.com/download">memsql.com/download</a> or by contacting your MemSQL sales representative.</p>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p><strong>Through the command line interface (without web interface or without internet access)</strong></p>
<blockquote>
<div><ul>
<li><p class="first">Download the MemSQL database binary on a machine with internet access and copy it to your primary agent.</p>
<blockquote>
<div><ul class="simple">
<li>For Community Edition: <cite>http://download.memsql.com/releases/latest/memsqlbin_amd64.tar.gz</cite></li>
<li>For Enterprise Edition: <cite>http://download.memsql.com/&lt;LICENSE_KEY&gt;/memsqlbin_amd64.tar.gz</cite></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Add the MemSQL binary to your primary agent.</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre>memsql-ops file-add -t memsql /path/to/memsqlbin.tar.gz
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first">Deploy MemSQL Ops to the remaining machines in your cluster.  By default, MemSQL Ops uses SSH to deploy agents to new hosts in your cluster.  If SSH is not available between the hosts in your cluster, you must add each host to the MemSQL Ops cluster manually.</p>
<blockquote>
<div><p><strong>With ssh access</strong></p>
<blockquote>
<div><p><strong>From the web interface</strong></p>
<blockquote>
<div><ul>
<li><p class="first">MemSQL Ops will ask for information about other hosts in your cluster. Provide valid SSH credentials for each of the hosts in your cluster. Through SSH, the primary MemSQL Ops agent will install itself into those other hosts.</p>
<blockquote>
<div><img alt="../../_images/provision-hosts.png" src="../../_images/provision-hosts.png" />
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p><strong>From the command line</strong></p>
<blockquote>
<div><ul>
<li><p class="first">Deploy MemSQL Ops to each host in your cluster manually. This will use SSH to set the cluster up.</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre>/path/to/memsql-ops/memsql-ops deploy-agent -h &lt;SSH HOST&gt; -P &lt;SSH PORT&gt; -u &lt;SSH USER&gt; -p &lt;SSH PASSWORD&gt; -i &lt;SSH PRIVATE KEY&gt;
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If sudo is not accessible, you may be required to add <tt class="docutils literal"><span class="pre">--allow-no-sudo</span></tt>.</p>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div></blockquote>
<p><strong>Without ssh access</strong></p>
<blockquote>
<div><ul>
<li><p class="first">Deploy MemSQL Ops to each host in your cluster manually. Repeat steps 1 - 4 of this guide on each host in your cluster. Inform each of your new hosts about the location of the primary agent.</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre>/path/to/memsql-ops/memsql-ops follow -h &lt;primary_hostname&gt; -P &lt;primary_host_port&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">After deploying to a host, MemSQL Ops communicates with other agents exclusively over the agent port, so SSH will not be required.</p>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first">After the MemSQL Ops agent is installed into each of the other hosts, you can add MemSQL nodes into those hosts.</p>
<blockquote>
<div><p><strong>From the web interface</strong></p>
<blockquote>
<div><ul>
<li><p class="first">In the MemSQL Ops web interface, click on the &#8220;+&#8221; button, and select &#8220;Add MemSQL Nodes&#8221;:</p>
<blockquote>
<div><img alt="../../_images/plus_button.png" src="../../_images/plus_button.png" />
</div></blockquote>
</li>
<li><p class="first">You will see a prompt that recommends a possible configuration (master aggregator, child aggregators, leaf nodes) for your cluster. Once you are satisfied with the configuration, click &#8220;Deploy MemSQL Cluster&#8221;.</p>
<blockquote>
<div><img alt="../../_images/confirm-memsql-nodes.png" src="../../_images/confirm-memsql-nodes.png" />
</div></blockquote>
</li>
<li><p class="first">MemSQL Ops will take the following steps to deploy MemSQL to each host:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Retrieve the MemSQL database binary. If you have a working internet connection, it will download the binary from <cite>memsql.com/download</cite>. Otherwise, it will look to see if a file has been added locally.</li>
<li>Install the MemSQL database on each host</li>
<li>Set up the MemSQL cluster according to your desired configuration.</li>
</ol>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p><strong>From the command line</strong></p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Decide on a cluster configuration. For more information, see the documentation on <a class="reference internal" href="../../concepts/distributed_architecture/index.html#cluster-components"><em>Cluster Components</em></a>.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is recommended to deploy the primary agent as the MemSQL master aggregator.</p>
</div>
</div></blockquote>
</li>
<li><p class="first">From each host in your cluster, deploy a MemSQL node using MemSQL Ops</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre>/path/to/memsql-ops/memsql-ops memsql-deploy --role <span class="o">{</span>master,aggregator,leaf,single_box<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</div></blockquote>
</li>
</ol>
<ol class="arabic" start="8">
<li><p class="first">Connect to the master aggregator using any valid MySQL client driver. For example:</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre>mysql -u root -h &lt;master_aggregator_hostname&gt; -P 3306 --prompt<span class="o">=</span><span class="s2">&quot;memsql&gt; &quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<p>You can now start creating databases and querying MemSQL! Here&#8217;s a set of sample commands to get you started. You can copy-paste these directly into your MemSQL session.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="c1">-- create a new user</span>
<span class="k">grant</span> <span class="k">all</span> <span class="k">on</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">to</span> <span class="s1">&#39;myuser&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span> <span class="n">identified</span> <span class="k">by</span> <span class="s1">&#39;mypassword&#39;</span><span class="p">;</span>
<span class="c1">-- show all memsql leaf nodes</span>
<span class="k">show</span> <span class="n">leaves</span><span class="p">;</span>
<span class="c1">-- create a new database</span>
<span class="k">create</span> <span class="k">database</span> <span class="n">mymemsqldb</span><span class="p">;</span>
<span class="k">show</span> <span class="n">databases</span><span class="p">;</span>
<span class="n">use</span> <span class="n">mymemsqldb</span><span class="p">;</span>
<span class="c1">-- create a new table</span>
<span class="k">create</span> <span class="k">table</span> <span class="n">mytable</span> <span class="p">(</span><span class="n">id</span> <span class="nb">INT</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span> <span class="n">name</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">));</span>
<span class="k">show</span> <span class="n">tables</span><span class="p">;</span>
<span class="k">describe</span> <span class="n">mytable</span><span class="p">;</span>
<span class="c1">-- perform data query operations</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">mytable</span> <span class="k">values</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;hello&#39;</span><span class="p">);</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">mytable</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Next Steps</strong></p>
<ul class="simple">
<li><a class="reference internal" href="../../concepts/multi_insert_examples/index.html"><em>Concurrent Multi-Insert Examples</em></a></li>
<li><a class="reference internal" href="../../concepts/how_to_run_queries/index.html"><em>How to Run Queries</em></a></li>
<li><a class="reference internal" href="../../../index.html"><em>MemSQL Docs Home</em></a></li>
<li><a class="reference internal" href="../../intro/index.html"><em>How MemSQL Works</em></a></li>
<li><a class="reference internal" href="../../concepts/index.html"><em>User Manual</em></a></li>
<li><a class="reference internal" href="../../admin/index.html"><em>Operations Manual</em></a></li>
<li><a class="reference internal" href="../../ops/index.html"><em>MemSQL Ops</em></a></li>
</ul>
</div>


                    </div>
                    <footer data-swiftype-index="false">
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../concepts/index.html" class="btn btn-neutral float-right" title="User Manual">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../best_practices/index.html" class="btn btn-neutral" title="Installation Best Practices"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>&copy; Copyright 2015, MemSQL</p>
  </div>
</footer>
                </div>
            </div>

        </section>
    </div>

    <script type="text/javascript" src="../../../static_star_theme/js/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/underscore-min.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/jquery.ba-hashchange.min.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/jquery.swiftype.search.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/jquery.swiftype.autocomplete.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/theme.js"></script>
    <script type="text/javascript" src="../../../static_star_theme/js/search.js"></script> 

        <!-- Google Analytics -->
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-21693588-3', 'auto');
            ga('send', 'pageview');
        </script>
        <!-- End Google Analytics -->

        <script type="text/javascript">
            $.ajax({
                url: document.location.protocol + '//munchkin.marketo.net/munchkin.js',
                dataType: 'script',
                cache: true,
                success: function() {
                    Munchkin.init('759-YLI-316');
                }
            });
        </script>
    </body>
</html>