<!DOCTYPE html>
    <!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
    <!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
         <title>MemSQL Loader</title> 
        <link rel="shortcut icon" href="../../static_star_theme/img/favicon.ico"/>
        <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,700italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="../../static_star_theme/css/theme.css" type="text/css" /> 
        <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
    </head>

    <body class="wy-body-for-nav" role="document">

    <div class="wy-grid-for-nav">

        <div class="wy-full-navbar" data-swiftype-index="false">
            <a href="http://www.memsql.com" class="logo">
                <img src="../../static_star_theme/img/memsql_logo_horizontal_white.svg" />
            </a>
            <div class="global nav">
                <div class="pull-left left-links">
                </div>
                <div class="pull-right right-links">
                    <a href="http://www.memsql.com/community/" style="word-spacing: 2px;">Community Edition</a>
                    <a href="http://blog.memsql.com">Blog</a>
                    <a href="http://www.memsql.com/memsql-partners">Partners</a>
                    <a href="http://www.memsql.com/resources">Resources</a>
                    <a href="../../index.html">Documentation</a>
                    <a href="http://www.memsql.com/contact">Contact</a>
                </div>
            </div>
            <div class="nav-links">
                <a href="http://www.memsql.com/product">Product</a>
                <a href="http://www.memsql.com/solutions">Solutions</a>
                <a href="http://www.memsql.com/case-studies">Case Studies</a>
                <a href="http://www.memsql.com/company">Company</a>
                <a class="download" href="http://www.memsql.com/download/">Download Now</a>
            </div>
        </div>

        <nav data-toggle="wy-nav-shift" class="wy-nav-side" data-swiftype-index="false">
            <div class="wy-side-nav-search">
                <div role="search">
  <form id="search-form" class="wy-form" method="get">
    <input type="text" id="st-search-input" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
            </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                
                 <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">MemSQL Docs Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">How MemSQL Works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../setup/quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../setup/get_started/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/index.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Operations Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref/commands_by_type/index.html">SQL Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin/config/index.html">Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops/index.html">MemSQL Ops</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="index.html">MemSQL Loader</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#background">Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#basic-usage">Basic Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#downloading-the-loader">Downloading the Loader</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#running-the-loader">Running the Loader</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#file-pattern-syntax">File Pattern Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#file-parsing-options">File Parsing Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#automatic-deduplication">Automatic Deduplication</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spec-files">Spec Files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../archive/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../editions/index.html">MemSQL Editions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Frequently Asked Questions</a></li>
</ul>
 
            </div>
            &nbsp;
        </nav>

        <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
            <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
                <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
                <a href="../../index.html" class="logo">
                    <img src="../../static_star_theme/img/memsql_logo_horizontal_white.svg" />
                    <span class="subtitle">Documentation</span>
                </a>
            </nav>

            <div class="wy-nav-content">
                <div class="rst-content">
                    <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">MemSQL Documentation</a> &raquo;</li>
      
    <li>MemSQL Loader</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
                    <div role="main" class="document">
                        
  <div class="section" id="memsql-loader">
<h1>MemSQL Loader<a class="headerlink" href="index.html#memsql-loader" title="Permalink to this headline">¶</a></h1>
<p>MemSQL Loader is an open-source tool that lets you load sets of files from Amazon S3, the Hadoop Distributed
File System (HDFS), and the local filesystem into MemSQL (or MySQL) with just one command. You can
specify all of the files you want to load with one command, and MemSQL Loader will take care of
deduplicating files, parallelizing the workload, retrying files if they fail to load, and more.</p>
<div class="section" id="background">
<h2>Background<a class="headerlink" href="index.html#background" title="Permalink to this headline">¶</a></h2>
<p>One of the most common tasks with any database is loading large amounts of data into
it from an external data store. Both MemSQL and MySQL provide the LOAD DATA command
for this task; this command is very powerful, but by itself, it has a number of restrictions:</p>
<blockquote>
<div><ul class="simple">
<li>It can only read from the local filesystem, so loading data from a remote store like
Amazon S3 requires first downloading the files you need.</li>
<li>Since it can only read from a single file at a time, if you want to load from multiple
files, you need to issue multiple LOAD DATA commands. If you want to perform this work
in parallel, you have to write your own scripts.</li>
<li>If you are loading multiple files, it’s up to you to make sure that you’ve deduplicated
the files and their contents.</li>
</ul>
</div></blockquote>
<p>At MemSQL, we’ve acutely felt all of these limitations. That’s why we developed MemSQL Loader,
which solves all of the above problems and more.</p>
</div>
<div class="section" id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="index.html#basic-usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="downloading-the-loader">
<h3>Downloading the Loader<a class="headerlink" href="index.html#downloading-the-loader" title="Permalink to this headline">¶</a></h3>
<p>The loader is a standalone binary that you can download and run directly.
Downloading the loader binary is the easiest way to get started with <tt class="docutils literal"><span class="pre">memsql-loader</span></tt>.
We keep the latest version hosted at <a class="reference external" href="https://github.com/memsql/memsql-loader/releases">our GitHub repository</a>.
The binary is produced by compiling this Python project with PyInstaller.</p>
<p>To get started with the binary, just run</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>tar -xzf memsql-loader
<span class="nv">$ </span><span class="nb">cd </span>memsql-loader
<span class="nv">$ </span>./memsql-loader --help
</pre></div>
</div>
<p>If you would like to download and run the source code directly, you can download the repository
from GitHub and run the manual steps outlined in the <a class="reference external" href="https://github.com/memsql/memsql-loader/blob/master/README.md">README</a>.</p>
</div>
<div class="section" id="running-the-loader">
<h3>Running the Loader<a class="headerlink" href="index.html#running-the-loader" title="Permalink to this headline">¶</a></h3>
<p>The primary interface to the loader is the <cite>memsql-loader load</cite> command. The command takes arguments
that specify the source, parsing options, and destination server. For example, to load some files
from S3, you can run</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>./memsql-loader load -h 127.0.0.1 -u root --database db --table t <span class="se">\</span>
    s3://memsql-loader-examples/sanity/*
</pre></div>
</div>
<p>The loader automatically daemonizes and runs the load process in a background server. You can monitor its
progress with</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>./memsql-loader ps --watch
</pre></div>
</div>
<p>If you would like to run this example against MemSQL or MySQL, run</p>
<div class="highlight-mysql"><div class="highlight"><pre><span class="n">memsql</span><span class="o">&gt;</span> <span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">db</span><span class="p">;</span>
<span class="n">memsql</span><span class="o">&gt;</span> <span class="k">CREATE</span> <span class="k">TABLE</span>    <span class="n">db</span><span class="p">.</span><span class="nf">t</span> <span class="p">(</span><span class="n">a</span> <span class="kt">int</span><span class="p">,</span> <span class="n">b</span> <span class="kt">int</span><span class="p">,</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">a</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="file-pattern-syntax">
<h3>File Pattern Syntax<a class="headerlink" href="index.html#file-pattern-syntax" title="Permalink to this headline">¶</a></h3>
<p>The loader supports loading files from Amazon S3, HDFS, and the local filesystem. The file&#8217;s prefix
determines the source. You can specify &#8220;s3://&#8221;, &#8220;hdfs://&#8221;, or &#8220;file://&#8221;. If you omit the prefix,
then the loader defaults to the local filesystem.</p>
<p>The loader also supports glob syntax (with semantics similar to bash). A single <cite>*</cite> matches files
in the current directory, and <cite>**</cite> matches files recursively. MemSQL Loader uses the glob2 library
under the hood to facilitate this.</p>
</div>
<div class="section" id="file-parsing-options">
<h3>File Parsing Options<a class="headerlink" href="index.html#file-parsing-options" title="Permalink to this headline">¶</a></h3>
<p>MemSQL Loader&#8217;s command line options mirror the LOAD DATA command&#8217;s syntax. See the <cite>load data options</cite>
section in <cite>./memsql-loader load &#8211;help</cite> for reference.</p>
</div>
<div class="section" id="automatic-deduplication">
<h3>Automatic Deduplication<a class="headerlink" href="index.html#automatic-deduplication" title="Permalink to this headline">¶</a></h3>
<p>MemSQL Loader is designed to support one-time loads as well as synchronizing behavior. You can use this
functionality to effectively sync a table&#8217;s data to the set of files matching a path. The loader will automatically
deduplicate files that it knows it does not need to load (by using the MD5 feature on S3), and transactionally
delete and reload data when the contents of a file have changed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This reload behavior requires specifying a column to use as a <cite>file_id</cite>.</p>
</div>
</div>
<div class="section" id="spec-files">
<h3>Spec Files<a class="headerlink" href="index.html#spec-files" title="Permalink to this headline">¶</a></h3>
<p>We found with usage that it was really convenient to be able to define a load job as a JSON file, instead of
just command line options. MemSQL Loader lets you use &#8220;spec files&#8221; to accomplish this. To generate one, just
append <cite>&#8211;print-spec</cite> to the <cite>./memsql-loader load</cite> command. It will generate a spec file that you can
use with <cite>&#8211;spec</cite>. Any command line options that you provide along with <cite>&#8211;spec</cite> will override options
in the spec file.</p>
</div>
</div>
</div>


                    </div>
                    <footer data-swiftype-index="false">
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../archive/index.html" class="btn btn-neutral float-right" title="Release Notes">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../ops/cli/REPORT/index.html" class="btn btn-neutral" title="REPORT"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>&copy; Copyright 2015, MemSQL</p>
  </div>
</footer>
                </div>
            </div>

        </section>
    </div>

    <script type="text/javascript" src="../../static_star_theme/js/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="../../static_star_theme/js/underscore-min.js"></script>
    <script type="text/javascript" src="../../static_star_theme/js/jquery.ba-hashchange.min.js"></script>
    <script type="text/javascript" src="../../static_star_theme/js/jquery.swiftype.search.js"></script>
    <script type="text/javascript" src="../../static_star_theme/js/jquery.swiftype.autocomplete.js"></script>
    <script type="text/javascript" src="../../static_star_theme/js/theme.js"></script>
    <script type="text/javascript" src="../../static_star_theme/js/search.js"></script> 

        <!-- Google Analytics -->
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-21693588-3', 'auto');
            ga('send', 'pageview');
        </script>
        <!-- End Google Analytics -->

        <script type="text/javascript">
            $.ajax({
                url: document.location.protocol + '//munchkin.marketo.net/munchkin.js',
                dataType: 'script',
                cache: true,
                success: function() {
                    Munchkin.init('759-YLI-316');
                }
            });
        </script>
    </body>
</html>