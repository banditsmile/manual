<html><HEAD><TITLE>Programming Ruby: The Pragmatic Programmer's Guide</TITLE>
<META http-equiv=Content-Type content="text/html; charset=iso-8859-1"><LINK media=screen href="120_files/pr_style[1].css"  type=text/css rel=StyleSheet></head>
<BODY bgColor=white>
<TABLE cellSpacing=0 cellPadding=3 width="100%" bgColor=#c09090 border=0>
<TBODY>
<TR>
<TD colSpan=3>
<TABLE cellPadding=20 width="100%" bgColor=#701a1a>
<TBODY>
<TR>
<TD width=6>
<H1 class=header>Programming Ruby</H1>
<H3 class=subheader>The Pragmatic Programmer's Guide</H3></TD></TR></TBODY></TABLE></TD></TR>
<TR>
<TD align=left width="33%"><A class=subheader href="119.html" >Previous &lt;</A> </TD>
<TD vAlign=center align=middle width="33%"><A class=subheader href="95.html" >Contents ^</A> <BR></TD>
<TD align=right width="33%"><A class=subheader href="121.html" >Next &gt;</A> <BR></TD></TR></TBODY></TABLE><!--
Copyright (c) 2001 by Addison Wesley Longman, Inc. This material may
be distributed only subject to the terms and conditions set forth in
the Open Publication License, v1.0 or later (the latest version is
presently available at http://www.opencontent.org/openpub/).
<P></P>
Distribution of substantively modified versions of this document is
prohibited without the explicit permission of the copyright holder.
<P></P>
Distribution of the work or derivative of the work in any standard
(paper) book form is prohibited unless prior permission is obtained
from the copyright holder.
-->
<H1>Standard Library</H1>
<HR>
<BR>
<P></P>Ruby comes ``out of the box'' with a large and useful library of modules and classes. This chapter contains a sampling of the more useful of these. 
<P></P>Interestingly, and unlike some of the code in later chapters, all of these libraries are written in Ruby. You'll find the source in the <CODE>lib</CODE> subdirectory of the standard Ruby distribution. 
<P></P>
<TABLE>
<TBODY>
<TR>
<TD height=20><IMG height=20 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<TABLE cellPadding=10 width="100%" bgColor=#660066 border=0>
<TBODY>
<TR>
<TD vAlign=center><FONT color=white size=7>class Complex</FONT> </TD>
<TD>
<TABLE border=0>
<TBODY>
<TR>
<TD><FONT color=white>Parent: </FONT></TD>
<TD><FONT color=white>Numeric</FONT> </TD></TR>
<TR>
<TD><FONT color=white>Version: </FONT></TD>
<TD><FONT color=white>1.6 </FONT></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<P></P>
<H3>Index:</H3><A href="120.html#Complex.new">new</A> <I><A href="120.html#Complex.Arithmeticoperations">Arithmetic operations</A> </I><I><A href="120.html#Complex._lt_eq_lt">&lt;=&gt;</A> </I><I><A href="120.html#Complex._eq_eq">==</A> </I><I><A href="120.html#Complex.abs">abs</A> </I><I><A href="120.html#Complex.abs2">abs2</A> </I><I><A href="120.html#Complex.arg">arg</A> </I><I><A href="120.html#Complex.conjugate">conjugate</A> </I><I><A href="120.html#Complex.image">image</A> </I><I><A href="120.html#Complex.polar">polar</A> </I><I><A href="120.html#Complex.real">real</A> </I><I><A href="120.html#Complex.to_f">to_f</A> </I><I><A href="120.html#Complex.to_i">to_i</A> </I><I><A href="120.html#Complex.to_r">to_r</A> </I><I><A href="120.html#Complex.to_s">to_s</A> </I>
<P></P>
<HR>

<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=500 border=0>
<TBODY>
<TR>
<TD vAlign=top colSpan=3><CODE>require&nbsp;"complex"</CODE> </TD></TR>
<TR>
<TD vAlign=top colSpan=3><CODE></CODE></TD></TR>
<TR>
<TD vAlign=top><CODE>v1&nbsp;=&nbsp;Complex(2,3)</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>Complex(2,&nbsp;3)</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>v2&nbsp;=&nbsp;2.im</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>Complex(0,&nbsp;2)</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>v1&nbsp;+&nbsp;v2</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>Complex(2,&nbsp;5)</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>v1&nbsp;*&nbsp;v2</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>Complex(-6,&nbsp;4)</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>v2**2</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>Complex(-4,&nbsp;0)</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>Math.sin(v1)</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>Complex(9.154499147,&nbsp;-4.16890696)</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>v1&nbsp;&lt;&nbsp;v2</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>false</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>v2**2&nbsp;==&nbsp;-4</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>true</CODE> </TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=3><FONT color=white size=6>constants </FONT></TD></TR></TBODY></TABLE>
<TABLE cellPadding=5 border=2>
<TBODY>
<TR>
<TD vAlign=top>
<TR>
<TD><A name=Complex.Complex::I><CODE>Complex::I</CODE> </A></TD>
<TD></TD>
<TD>0 +1<SUB>i</SUB> </TD></TR></TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>class methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Complex.new>new</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>Complex.new( <I>a</I>, <I>b</I> ) -&gt; <I>aComplex</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns a + b<SUB>i</SUB>. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>In addition to the <CODE>Complex.new</CODE> constructor, the <CODE>Complex</CODE> library defines the method <A href="http://www.ruby-cn.org/book/ProgrammingRuby/ref_c_numeric.html#Numeric.im" ><CODE>Numeric.im</CODE> </A>, such that <I>aNumeric</I> <CODE>.im</CODE> returns 0 + <I>aNumeric</I> <SUB>i</SUB>. Complex numbers are also constructed using the global method <CODE>Complex</CODE>, which takes one or two arguments. The value it returns depends on the type of its arguments: 
<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 border=0>
<TBODY>
<TR bgColor=#ff9999>
<TD vAlign=top><B>a</B> </TD>
<TD vAlign=top><B>b</B> </TD>
<TD vAlign=top><B>Result</B> </TD></TR>
<TR>
<TD vAlign=top>Number</TD>
<TD vAlign=top>Number</TD>
<TD vAlign=top>a + b<SUB>i</SUB> </TD></TR>
<TR>
<TD vAlign=top>Complex</TD>
<TD vAlign=top>0</TD>
<TD vAlign=top><I>a</I> </TD></TR>
<TR>
<TD vAlign=top>Complex</TD>
<TD vAlign=top>Complex</TD>
<TD vAlign=top><CODE>Complex( <I>a</I>.real - <I>b</I>.image, <I>a</I>.image + <I>b</I>.real )</CODE> </TD></TR>
<TR>
<TD vAlign=top>Number</TD>
<TD vAlign=top>Complex</TD>
<TD vAlign=top><CODE>Complex( <I>a</I> - <I>b</I>.image, <I>b</I>.real )</CODE> </TD></TR>
<TR>
<TD bgColor=#ff9999 colSpan=9 height=2><IMG height=1 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>instance methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Complex.Arithmeticoperations>Arithmetic operations</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>
<P></P></TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Performs various arithmetic operations on <I>ref</I>. 
<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 border=0>
<TBODY>
<TR>
<TD vAlign=top><I>ref</I> </TD>
<TD vAlign=top>+</TD>
<TD vAlign=top><I>aNumeric</I> -&gt; <I>aComplex</I> </TD>
<TD vAlign=top>Addition</TD></TR>
<TR>
<TD vAlign=top><I>ref</I> </TD>
<TD vAlign=top>-</TD>
<TD vAlign=top><I>aNumeric</I> -&gt; <I>aComplex</I> </TD>
<TD vAlign=top>Subtraction</TD></TR>
<TR>
<TD vAlign=top><I>ref</I> </TD>
<TD vAlign=top>*</TD>
<TD vAlign=top><I>aNumeric</I> -&gt; <I>aComplex</I> </TD>
<TD vAlign=top>Multiplication</TD></TR>
<TR>
<TD vAlign=top><I>ref</I> </TD>
<TD vAlign=top>/</TD>
<TD vAlign=top><I>aNumeric</I> -&gt; <I>aComplex</I> </TD>
<TD vAlign=top>Division</TD></TR>
<TR>
<TD vAlign=top><I>ref</I> </TD>
<TD vAlign=top>%</TD>
<TD vAlign=top><I>aNumeric</I> -&gt; <I>aComplex</I> </TD>
<TD vAlign=top>Remainder</TD></TR>
<TR>
<TD vAlign=top><I>ref</I> </TD>
<TD vAlign=top>**</TD>
<TD vAlign=top><I>aNumeric</I> -&gt; <I>aComplex</I> </TD>
<TD vAlign=top>Exponentiation (real and complex power)</TD></TR></TBODY></TABLE>
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Complex._lt_eq_lt>&lt;=&gt;</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I> &lt;=&gt; <I>other</I> -&gt; -1, 0, +1 </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns <I>ref</I>.abs <CODE>&lt;=&gt;</CODE> <I>other</I>.abs. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Complex._eq_eq>==</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I> == <I>anObject</I> -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>If <I>anObject</I> is a complex number, returns <CODE>true</CODE> if its real and imaginary parts match <I>ref</I>. If <I>anObject</I> is a simple number, returns <CODE>true</CODE> if <I>ref</I>.<CODE>real</CODE> equals <I>anObject</I> and <I>ref</I>.<CODE>image</CODE> is zero. Otherwise, attempts to coerce <I>anObject</I> to a complex number and compares the result. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Complex.abs>abs</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.abs -&gt; <I>aFloat</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Absolute value. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Complex.abs2>abs2</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.abs2 -&gt; <I>aFloat</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Square of absolute value. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Complex.arg>arg</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.arg -&gt; <I>aFloat</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Argument (angle from (1,0)). 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Complex.conjugate>conjugate</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.conjugate -&gt; <I>aComplex</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Complex conjugate. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Complex.image>image</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.image -&gt; <I>aNumeric</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>The imaginary part of <I>ref</I>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Complex.polar>polar</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.polar -&gt; <I>anArray</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns the two-element array: [<I>c</I>.abs, <I>c</I>.arg]. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Complex.real>real</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.real -&gt; <I>aNumeric</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>The real part of <I>ref</I>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Complex.to_f>to_f</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.to_f -&gt; <I>aComplex</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns <CODE>Complex(real.to_f, image.to_f)</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Complex.to_i>to_i</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.to_i -&gt; <I>aComplex</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns <CODE>Complex(real.to_i, image.to_i)</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Complex.to_r>to_r</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.to_r -&gt; <I>aComplex</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns <CODE>Complex(real.to_r, image.to_r)</CODE>, converting both parts of the complex to a rational number. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Complex.to_s>to_s</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.to_s -&gt; <I>aString</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>String representation of <I>ref</I>. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>In addition, the <CODE>Math</CODE> functions <CODE>sqrt</CODE>, <CODE>exp</CODE>, <CODE>cos</CODE>, <CODE>sin</CODE>, <CODE>tan</CODE>, <CODE>log</CODE>, <CODE>log10</CODE>, and <CODE>atan2</CODE> are extended to support a <CODE>Complex</CODE> argument. 
<P></P>
<TABLE>
<TBODY>
<TR>
<TD height=20><IMG height=20 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<TABLE cellPadding=10 width="100%" bgColor=#660066 border=0>
<TBODY>
<TR>
<TD vAlign=center><FONT color=white size=7>class Date</FONT> </TD>
<TD>
<TABLE border=0>
<TBODY>
<TR>
<TD><FONT color=white>Parent: </FONT></TD>
<TD><FONT color=white>Object</FONT> </TD></TR>
<TR>
<TD><FONT color=white>Version: </FONT></TD>
<TD><FONT color=white>1.6 </FONT></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<P></P>
<H3>Index:</H3><A href="120.html#Date.exist2_qm">exist2?</A> <A href="120.html#Date.exist_qm">exist?</A> <A href="120.html#Date.existw_qm">existw?</A> <A href="120.html#Date.gregorian_leap_qm">gregorian_leap?</A> <A href="120.html#Date.julian_leap_qm">julian_leap?</A> <A href="120.html#Date.leap_qm">leap?</A> <A href="120.html#Date.new">new</A> <A href="120.html#Date.new1">new1</A> <A href="120.html#Date.new2">new2</A> <A href="120.html#Date.new3">new3</A> <A href="120.html#Date.neww">neww</A> <A href="120.html#Date.today">today</A> <I><A href="120.html#Date.Accessors">Accessors</A> </I><I><A href="120.html#Date._pl">+</A> </I><I><A href="120.html#Date._mi_mi">--</A> </I><I><A href="120.html#Date._lt_lt">&lt;&lt;</A> </I><I><A href="120.html#Date._lt_eq_lt">&lt;=&gt;</A> </I><I><A href="120.html#Date._eq_eq_eq">===</A> </I><I><A href="120.html#Date._lt_lt">&gt;&gt;</A> </I><I><A href="120.html#Date.downto">downto</A> </I><I><A href="120.html#Date.england">england</A> </I><I><A href="120.html#Date.gregorian">gregorian</A> </I><I><A href="120.html#Date.italy">italy</A> </I><I><A href="120.html#Date.jd">jd</A> </I><I><A href="120.html#Date.julian">julian</A> </I><I><A href="120.html#Date.leap_qm">leap?</A> </I><I><A href="120.html#Date.mjd">mjd</A> </I><I><A href="120.html#Date.newsg">newsg</A> </I><I><A href="120.html#Date.next">next</A> </I><I><A href="120.html#Date.ns_qm">ns?</A> </I><I><A href="120.html#Date.os_qm">os?</A> </I><I><A href="120.html#Date.sg">sg</A> </I><I><A href="120.html#Date.step">step</A> </I><I><A href="120.html#Date.succ">succ</A> </I><I><A href="120.html#Date.to_s">to_s</A> </I><I><A href="120.html#Date.upto">upto</A> </I>
<P></P>
<HR>

<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=500 border=0>
<TBODY>
<TR>
<TD vAlign=top colSpan=3><CODE>require&nbsp;'date'</CODE> </TD></TR>
<TR>
<TD vAlign=top colSpan=3><CODE></CODE></TD></TR>
<TR>
<TD vAlign=top><CODE>d&nbsp;=&nbsp;Date.new(2000,&nbsp;3,&nbsp;31)</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>#&lt;Date:&nbsp;2451635,2299161&gt;</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>[d.year,&nbsp;d.yday,&nbsp;d.wday]</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>[2000,&nbsp;91,&nbsp;5]</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>[d.month,&nbsp;d.mday]</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>[3,&nbsp;31]</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>[d.cwyear,&nbsp;d.cweek,&nbsp;d.cwday]</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>[2000,&nbsp;13,&nbsp;5]</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>[d.jd,&nbsp;d.mjd]</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>[2451635,&nbsp;51634.5]</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>(d&nbsp;&lt;&lt;&nbsp;1).to_s</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>"2000-02-29"</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>d.succ.to_s</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>"2000-04-01"</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>(d&nbsp;+&nbsp;100).to_s</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>"2000-07-09"</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>d.leap?</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>true</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>Date.new(2000,&nbsp;3,&nbsp;-10).to_s</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>"2000-03-22"</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>d1&nbsp;=&nbsp;Date.neww(2000,&nbsp;13,&nbsp;7)</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>#&lt;Date:&nbsp;2451637,2299161&gt;</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>d1.to_s</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>"2000-04-02"</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>[d1.cwday,&nbsp;d1.wday]</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>[7,&nbsp;0]</CODE> </TD></TR></TBODY></TABLE>
<P></P>
<P></P>The <CODE>date</CODE> library implements class <CODE>Date</CODE>, which provides a comprehensive set of facilities for storing, manipulating, and converting dates. To document its options, we need to take a brief historical detour to establish some vocabulary. 
<P></P>Internally a date is stored as a Julian day number, the number of days since midday, January 1st, 4713&nbsp;BCE.<EM>[In the code, you may find references to the year -4712. As astronomical dates include a year zero, 4713&nbsp;BCE is the same year as -4712.]</EM> The rules for converting a Julian day number to a calendar date are complicated because the Romans estimated the length of a year incorrectly. In the Julian calendar (often called Old Style, or O.S.), every year divisible by 4 is a leap year. The <CODE>Date</CODE> class has options to convert dates using this as an assumption. 
<P></P>By the sixteenth century, the inaccuracies in this measurement had become apparent. An edict from Pope Gregory&nbsp;XIII in 1582 created the New Style (N.S.) or Gregorian calendar, where years divisible by 100 were no longer leap years unless they were also divisible by 400. This system was adopted by most Catholic countries immediately, but religious differences held up a wider adoption. England (and several other countries) switched in 1752, with some countries following later. The <CODE>Date</CODE> class allows you to determine whether to implement the cutover in 1582 (the <CODE>Date::ITALY</CODE> option), 1752 (<CODE>Date::ENGLAND</CODE>), or another date of your choosing. 
<P></P>The <CODE>Date</CODE> class also provides conversions to Modified Julian Day (MJD) numbers. MJD values count from midnight, November 17, 1858. Because these values count from midnight, not midday, there is a half-day added to the conversion factor. 
<P></P>The descriptions that follow use the abbreviations listed in Table 24.1 on page 441. 
<P></P>
<TABLE width=500 bgColor=#ffe0e0 border=2>
<TBODY>
<TR>
<TD><B>Abbreviations used describing dates</B> 
<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 border=0>
<TBODY>
<TR bgColor=#ff9999>
<TD vAlign=top><B>Field</B> </TD>
<TD vAlign=top><B>Meaning</B> </TD></TR>
<TR>
<TD vAlign=top>cwday</TD>
<TD vAlign=top>An ISO&nbsp;8601 calendar weekday. 1 is Monday, 7 is Sunday.</TD></TR>
<TR>
<TD vAlign=top>cweek</TD>
<TD vAlign=top>An ISO&nbsp;8601 calendar week. Week 1 is the week containing the first Thursday (or equivalently the week that contains January&nbsp;4th).</TD></TR>
<TR>
<TD vAlign=top>cwyear</TD>
<TD vAlign=top>An ISO&nbsp;8601 calendar-week-based year. May be different from <I>year</I>, as it rolls forward only on a Monday.</TD></TR>
<TR>
<TD vAlign=top>jd</TD>
<TD vAlign=top>The Julian day number---the number of days since January 1st, 4713&nbsp;BCE.</TD></TR>
<TR>
<TD vAlign=top>mday</TD>
<TD vAlign=top>The day of the month (1..31).</TD></TR>
<TR>
<TD vAlign=top>mjd</TD>
<TD vAlign=top>A modified Julian day number.</TD></TR>
<TR>
<TD vAlign=top>mon</TD>
<TD vAlign=top>The month of the year (1..12).</TD></TR>
<TR>
<TD vAlign=top>sg</TD>
<TD vAlign=top>The start of the Gregorian correction: <CODE>Date::ITALY</CODE> (the default) for 1582, <CODE>Date::ENGLAND</CODE> for 1752, or <CODE>JULIAN</CODE>, meaning no correction. You may also provide an arbitrary Julian day number for this parameter, in which case the correction will start from this date.</TD></TR>
<TR>
<TD vAlign=top>wday</TD>
<TD vAlign=top>The day of the week (0 is Sunday).</TD></TR>
<TR>
<TD vAlign=top>week</TD>
<TD vAlign=top>The week number into a year (1..53).</TD></TR>
<TR>
<TD vAlign=top>yday</TD>
<TD vAlign=top>The day into the year (1..366).</TD></TR>
<TR>
<TD vAlign=top>year</TD>
<TD vAlign=top>A year (1966, 2001, and the like).</TD></TR>
<TR>
<TD bgColor=#ff9999 colSpan=9 height=2><IMG height=1 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<P></P></TD></TR></TBODY></TABLE>
<P></P>Class <CODE>Date</CODE> exports the constant arrays <CODE>Date::MONTHNAMES</CODE> and <CODE>Date::DAYNAMES</CODE>, which can be indexed by <I>mon</I> and <I>wday</I> values to return the corresponding English names. 
<P></P>The <CODE>Date</CODE> class also provides low-level date-conversion methods: 
<P></P>
<CENTER>
<TABLE class=codebox cellSpacing=0 cellPadding=3 border=0>
<TBODY>
<TR>
<TD vAlign=top>*&nbsp;<CODE>civil_to_jd</CODE> </TD>
<TD vAlign=top>*&nbsp;<CODE>jd_to_civil</CODE> </TD></TR>
<TR>
<TD vAlign=top>*&nbsp;<CODE>commercial_to_jd</CODE> </TD>
<TD vAlign=top>*&nbsp;<CODE>jd_to_commercial</CODE> </TD></TR>
<TR>
<TD vAlign=top>*&nbsp;<CODE>ordinal_to_jd</CODE> </TD>
<TD vAlign=top>*&nbsp;<CODE>jd_to_ordinal</CODE> </TD></TR>
<TR>
<TD vAlign=top>*&nbsp;<CODE>jd_to_mjd</CODE> </TD>
<TD vAlign=top>*&nbsp;<CODE>mjd_to_jd</CODE> </TD></TR></TBODY></TABLE>
<P></P></CENTER>
<P></P>These methods perform limited error checking of their parameters, and are not documented here. The somewhat confusingly named <CODE>exist..?</CODE> routines perform conversions from different formats into a Julian day number with error checking. These routines also automatically normalize their parameters. 
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>mixins </FONT></TD></TR>
<TR>
<TD>Comparable: </TD>
<TD>&lt;, &lt;=, ==, &gt;=, &gt;, between?</TD></TR></TBODY></TABLE>
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>class methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.exist2_qm>exist2?</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>Date.exist2?( <I>year</I>, <I>yday</I>, <I>sg</I>=<CODE>Date::ITALY</CODE>) -&gt; <I>jd</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Converts a <I>year</I> and <I>yday</I> into a Julian day number, returning <CODE>nil</CODE> on error. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.exist_qm>exist?</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>Date.exist?( <I>year</I>, <I>mon</I>, <I>mday</I>, <I>sg</I>=<CODE>Date::ITALY</CODE>) -&gt; <I>jd</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Converts a <I>year</I>, <I>mon</I>, and <I>mday</I> into a Julian day number, or <CODE>nil</CODE> if the parameters are invalid. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.existw_qm>existw?</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>Date.existw?( <I>cyear</I>, <I>cweek</I>, <I>cwday</I>, <I>sg</I>=<CODE>Date::ITALY</CODE>) -&gt; <I>jd</I> </TD></TR>
<TR>
<TD></TD>
<TD>Converts a <I>cyear</I>, <I>cweek</I>, and <I>cwday</I> into a Julian day number. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.gregorian_leap_qm>gregorian_leap?</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>Date.gregorian_leap?( <I>year</I> ) -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>If <I>year</I> does not end with ``00'', returns <CODE>true</CODE> if <I>year</I> is divisible by 4, otherwise returns <CODE>true</CODE> if <I>year</I> is divisible by 400. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.julian_leap_qm>julian_leap?</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>Date.julian_leap?( <I>year</I> ) -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns <CODE>true</CODE> if <I>year</I> is divisible by 4. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.leap_qm>leap?</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>Date.leap?( <I>year</I> ) -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Synonym for <CODE>Date.gregorian_leap?</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.new>new</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>Date.new( <I>year</I>=-4712, <I>mon</I>=1, <I>mday</I>=1, <I>sg</I>=<CODE>Date::ITALY</CODE>) -&gt; <I>aNewDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns a <CODE>Date</CODE> for the given <I>year</I>, <I>mon</I>, and <I>mday</I>. If <I>mon</I> is negative, it counts back from the end of the year. If <I>mday</I> is negative, it counts back from the end of the month. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.new1>new1</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>Date.new1( <I>jd</I>, <I>sg</I>=<CODE>Date::ITALY</CODE>) -&gt; <I>aNewDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Creates a <CODE>Date</CODE> corresponding to the given Julian day number. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.new2>new2</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>Date.new2( <I>year</I>=-4712, <I>yday</I>=1, <I>sg</I>=<CODE>Date::ITALY</CODE>) -&gt; <I>aNewDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns a <CODE>Date</CODE> for the given <I>year</I> and <I>yday</I>. If <I>yday</I> is negative, it counts back from the end of the year. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.new3>new3</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>Date.new3( <I>year</I>=-4712, <I>mon</I>=1, <I>mday</I>=1, <I>sg</I>=<CODE>Date::ITALY</CODE>) -&gt; <I>aNewDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Synonym for <CODE>Date.new</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.neww>neww</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>Date.neww( <I>cyear</I>=1582, <I>cweek</I>=41, <I>cwday</I>=5, <I>sg</I>=<CODE>Date::ITALY</CODE>) -&gt; <I>aNewDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns a <CODE>Date</CODE> for the given <I>cyear</I>, <I>cweek</I>, and <I>cwday</I>. If <I>cweek</I> is negative, it counts back from the end of the year. If <I>cwday</I> is negative, it counts back from the end of the week. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.today>today</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>Date.today( <I>sg</I>=<CODE>Date::ITALY</CODE>) -&gt; <I>aNewDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns a <CODE>Date</CODE> for today. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>instance methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.Accessors>Accessors</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.year -&gt; <I>year</I> <BR><I>ref</I>.yday -&gt; <I>yday</I> <BR><I>ref</I>.mjd -&gt; <I>mjd</I> <BR><I>ref</I>.mon -&gt; <I>mon</I> <BR><I>ref</I>.month -&gt; <I>mon</I> <BR><I>ref</I>.mday -&gt; <I>mday</I> <BR><I>ref</I>.day -&gt; <I>mday</I> <BR><I>ref</I>.cwyear -&gt; <I>cwyear</I> <BR><I>ref</I>.cweek -&gt; <I>cweek</I> <BR><I>ref</I>.cwday -&gt; <I>cwday</I> <BR><I>ref</I>.wday -&gt; <I>wday</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns the given component of <I>ref</I> as a number. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date._pl>+</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I> + <I>anInteger</I> -&gt; <I>aNewDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns a new <CODE>Date</CODE> <I>anInteger</I> days from <I>ref</I>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date._mi_mi>--</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I> <CODE>-</CODE> <I>anInteger</I> -&gt; <I>aNewDate</I> <BR><I>ref</I> <CODE>-</CODE> <I>anOtherDate</I> -&gt; <I>anInteger</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>The first form returns a new <CODE>Date</CODE> <I>anInteger</I> days before <I>ref</I>. The second form returns the number of days between <I>ref</I> and <I>anOtherDate</I>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date._lt_lt>&lt;&lt;</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I> &lt;&lt; <I>anInteger</I> -&gt; <I>aNewDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns a new <CODE>Date</CODE> formed by subtracting <I>anInteger</I> months to <I>ref</I>, adjusting the <I>mday</I> value back to the last day of the month if it otherwise exceeds it. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date._lt_eq_lt>&lt;=&gt;</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I> &lt;=&gt; <I>anOther</I> -&gt; -1, 0, +1 </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P><I>anOther</I> must be a <CODE>Numeric</CODE>, in which case it is treated as a Julian day number, or a <CODE>Date</CODE>. Returns -1, 0, +1 if <I>ref</I> is less than, equal to, or greater than <I>anOther</I>. See module <CODE>Comparable</CODE> on page 402. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date._eq_eq_eq>===</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I> === <I>anOther</I> -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P><I>anOther</I> must be a <CODE>Numeric</CODE>, in which case it is treated as a Julian day number, or a <CODE>Date</CODE>. Returns <CODE>true</CODE> if the Julian day number of <I>anOther</I> is the same as <I>ref</I>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date._lt_lt>&gt;&gt;</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I> &gt;&gt; <I>anInteger</I> -&gt; <I>aNewDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns a new <CODE>Date</CODE> formed by adding <I>anInteger</I> months to <I>ref</I>, adjusting the <I>mday</I> value back to the last day of the month if it otherwise exceeds it. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.downto>downto</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.downto( <I>aDateMin</I> ) {| date | block } 
<P></P>-&gt; <I>ref</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Invokes block with dates from <I>ref</I> down to <I>aDateMin</I>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.england>england</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.england -&gt; <I>aDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Equivalent to <I>ref</I> <CODE>.newsg(Date::ENGLAND)</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.gregorian>gregorian</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.gregorian -&gt; <I>aDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Equivalent to <I>ref</I> <CODE>.newsg(Date::GREGORIAN)</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.italy>italy</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.italy -&gt; <I>aDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Equivalent to <I>ref</I> <CODE>.newsg(Date::ITALY)</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.jd>jd</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.jd -&gt; <I>jd</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns the Julian day number for <I>ref</I>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.julian>julian</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.julian -&gt; <I>aDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Equivalent to <I>ref</I> <CODE>.newsg(Date::JULIAN)</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.leap_qm>leap?</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.leap? -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns <CODE>true</CODE> if <I>ref</I> falls within a leap year. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.mjd>mjd</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.mjd -&gt; <I>mjd</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns the Julian day number of <I>ref</I> converted to a modified Julian day number. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.newsg>newsg</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.newsg( <I>sg</I>=<CODE>Date::ITALY</CODE> ) -&gt; <I>aNewDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns a new <CODE>Date</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.next>next</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.next -&gt; <I>aNewDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Synonym for <I>ref</I>.succ. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.ns_qm>ns?</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.ns? -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns <CODE>true</CODE> if <I>ref</I> falls in the period of New Style dates. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.os_qm>os?</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.os? -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns <CODE>true</CODE> if <I>ref</I> falls in the period of Old Style dates. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.sg>sg</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.sg -&gt; <I>anInteger</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns the Julian day number of the start of New Style dates for <I>ref</I>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.step>step</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.step( <I>aDateLimit</I>, <I>step</I> ) {| date | block } 
<P></P>-&gt; <I>ref</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Invokes block with dates starting at <I>ref</I>, incrementing by <I>step</I> days, ending at the first date greater than <I>aDateLimit</I> (less than for a negative step). 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.succ>succ</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.succ -&gt; <I>aNewDate</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns the date of <I>ref</I> plus one day. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.to_s>to_s</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.to_s -&gt; <I>aString</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns <CODE>self</CODE> as ``year-mon-mday.'' 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Date.upto>upto</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.upto( <I>aDateMax</I> ) {| date | block } 
<P></P>-&gt; <I>ref</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Invokes block with dates from <I>ref</I> to <I>aDateMax</I>. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE cellPadding=10 width="100%" bgColor=#660066 border=0>
<TBODY>
<TR>
<TD vAlign=center><FONT color=white size=7>Library: English</FONT> </TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>require&nbsp;"English"
<P></P>
$OUTPUT_FIELD_SEPARATOR&nbsp;=&nbsp;'&nbsp;--&nbsp;'
"waterbuffalo"&nbsp;=~&nbsp;/buff/
print&nbsp;$LOADED_FEATURES,&nbsp;$POSTMATCH,&nbsp;$PID,&nbsp;"\n"
print&nbsp;$",&nbsp;$',&nbsp;$$,&nbsp;"\n"
</PRE></TD></TR></TBODY></TABLE><EM>produces:</EM> 
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>English.rb&nbsp;--&nbsp;alo&nbsp;--&nbsp;32130&nbsp;--
English.rb&nbsp;--&nbsp;alo&nbsp;--&nbsp;32130&nbsp;--
</PRE></TD></TR></TBODY></TABLE>
<P></P>Include the English library file in a Ruby script, and you can reference the global variables such as <CODE>$_</CODE> using less cryptic names, listed in the following table. 
<TABLE class=codebox cellSpacing=0 cellPadding=3 border=0>
<P></P>
<TBODY>
<TR>
<TD bgColor=#ff9999 colSpan=9 height=3><IMG height=1 src="120_files/dot[1].gif"  width=1></TD></TR>
<TR>
<TD vAlign=top><CODE>$*</CODE> </TD>
<TD vAlign=top>$ARGV</TD>
<TD vAlign=top><CODE>$"</CODE> </TD>
<TD vAlign=top>$LOADED_FEATURES</TD></TR>
<TR>
<TD vAlign=top><CODE>$?</CODE> </TD>
<TD vAlign=top>$CHILD_STATUS</TD>
<TD vAlign=top><CODE>$&amp;</CODE> </TD>
<TD vAlign=top>$MATCH</TD></TR>
<TR>
<TD vAlign=top><CODE>$&lt;</CODE> </TD>
<TD vAlign=top>$DEFAULT_INPUT</TD>
<TD vAlign=top><CODE>$.</CODE> </TD>
<TD vAlign=top>$NR</TD></TR>
<TR>
<TD vAlign=top><CODE>$&gt;</CODE> </TD>
<TD vAlign=top>$DEFAULT_OUTPUT</TD>
<TD vAlign=top><CODE>$,</CODE> </TD>
<TD vAlign=top>$OFS</TD></TR>
<TR>
<TD vAlign=top><CODE>$!</CODE> </TD>
<TD vAlign=top>$ERROR_INFO</TD>
<TD vAlign=top><CODE>$\</CODE> </TD>
<TD vAlign=top>$ORS</TD></TR>
<TR>
<TD vAlign=top><CODE>$@</CODE> </TD>
<TD vAlign=top>$ERROR_POSITION</TD>
<TD vAlign=top><CODE>$\</CODE> </TD>
<TD vAlign=top>$OUTPUT_RECORD_SEPARATOR</TD></TR>
<TR>
<TD vAlign=top><CODE>$;</CODE> </TD>
<TD vAlign=top>$FIELD_SEPARATOR</TD>
<TD vAlign=top><CODE>$,</CODE> </TD>
<TD vAlign=top>$OUTPUT_FIELD_SEPARATOR</TD></TR>
<TR>
<TD vAlign=top><CODE>$;</CODE> </TD>
<TD vAlign=top>$FS</TD>
<TD vAlign=top><CODE>$$</CODE> </TD>
<TD vAlign=top>$PID</TD></TR>
<TR>
<TD vAlign=top><CODE>$=</CODE> </TD>
<TD vAlign=top>$IGNORECASE</TD>
<TD vAlign=top><CODE>$'</CODE> </TD>
<TD vAlign=top>$POSTMATCH</TD></TR>
<TR>
<TD vAlign=top><CODE>$.</CODE> </TD>
<TD vAlign=top>$INPUT_LINE_NUMBER</TD>
<TD vAlign=top><CODE>$`</CODE> </TD>
<TD vAlign=top>$PREMATCH</TD></TR>
<TR>
<TD vAlign=top><CODE>$/</CODE> </TD>
<TD vAlign=top>$INPUT_RECORD_SEPARATOR</TD>
<TD vAlign=top><CODE>$$</CODE> </TD>
<TD vAlign=top>$PROCESS_ID</TD></TR>
<TR>
<TD vAlign=top><CODE>$~</CODE> </TD>
<TD vAlign=top>$LAST_MATCH_INFO</TD>
<TD vAlign=top><CODE>$0</CODE> </TD>
<TD vAlign=top>$PROGRAM_NAME</TD></TR>
<TR>
<TD vAlign=top><CODE>$+</CODE> </TD>
<TD vAlign=top>$LAST_PAREN_MATCH</TD>
<TD vAlign=top><CODE>$/</CODE> </TD>
<TD vAlign=top>$RS</TD></TR>
<TR>
<TD vAlign=top><CODE>$_</CODE> </TD>
<TD vAlign=top>$LAST_READ_LINE</TD></TR>
<TR>
<TD bgColor=#ff9999 colSpan=9 height=2><IMG height=1 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE>
<TBODY>
<TR>
<TD height=20><IMG height=20 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<TABLE cellPadding=10 width="100%" bgColor=#660066 border=0>
<TBODY>
<TR>
<TD vAlign=center><FONT color=white size=7>module Find</FONT> </TD></TR></TBODY></TABLE>
<P></P>
<H3>Index:</H3><A href="120.html#Find.find">find</A> <A href="120.html#Find.prune">prune</A> 
<P></P>
<HR>

<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>require&nbsp;"find"
Find.find("/etc/passwd",&nbsp;"/var/spool/lp1",&nbsp;".")&nbsp;do&nbsp;|f|
&nbsp;&nbsp;Find.prune&nbsp;if&nbsp;f&nbsp;==&nbsp;"."
&nbsp;&nbsp;puts&nbsp;f
end
</PRE></TD></TR></TBODY></TABLE><EM>produces:</EM> 
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>/etc/passwd
/var/spool/lp1
/var/spool/lp1/status
/var/spool/lp1/lock
/var/spool/lp1/.seq
</PRE></TD></TR></TBODY></TABLE>
<P></P>The <CODE>Find</CODE> module supports the top-down traversal of a set of file paths. 
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>class methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Find.find>find</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.find( <I>[</I> <I>aName</I> <I>]<SUP>*</SUP> </I>) {| aFileName | block } 
<P></P></TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Calls the associated block with the name of every file and directory listed as arguments, then recursively on their subdirectories, and so on. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Find.prune>prune</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.prune </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Skips the current file or directory, restarting the loop with the next entry. If the current file is a directory, that directory will not be recursively entered. Meaningful only within the block associated with <CODE>Find::find</CODE>. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE>
<TBODY>
<TR>
<TD height=20><IMG height=20 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<TABLE cellPadding=10 width="100%" bgColor=#660066 border=0>
<TBODY>
<TR>
<TD vAlign=center><FONT color=white size=7>class File</FONT> </TD>
<TD>
<TABLE border=0>
<TBODY>
<TR>
<TD><FONT color=white>Parent: </FONT></TD>
<TD><FONT color=white>IO</FONT> </TD></TR>
<TR>
<TD><FONT color=white>Version: </FONT></TD>
<TD><FONT color=white>1.6 </FONT></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<P></P>
<H3>Index:</H3><A href="120.html#File.cmp">cmp</A> <A href="120.html#File.compare">compare</A> <A href="120.html#File.copy">copy</A> <A href="120.html#File.cp">cp</A> <A href="120.html#File.install">install</A> <A href="120.html#File.makedirs">makedirs</A> <A href="120.html#File.mkpath">mkpath</A> <A href="120.html#File.move">move</A> <A href="120.html#File.mv">mv</A> <A href="120.html#File.rm_f">rm_f</A> <A href="120.html#File.safe_unlink">safe_unlink</A> <A href="120.html#File.syscopy">syscopy</A> 
<P></P>
<HR>

<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=500 border=0>
<TBODY>
<TR>
<TD vAlign=top colSpan=3><CODE>require&nbsp;'ftools'</CODE> </TD></TR>
<TR>
<TD vAlign=top colSpan=3><CODE></CODE></TD></TR>
<TR>
<TD vAlign=top><CODE>File.copy&nbsp;'testfile',&nbsp;'testfile1'</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>true</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>File.compare&nbsp;'testfile',&nbsp;'testfile1'</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>true</CODE> </TD></TR></TBODY></TABLE>
<P></P>
<P></P>The <CODE>FTools</CODE> library adds several methods to the built-in <CODE>File</CODE> class. These methods are particularly useful to programs that move and copy files, such as installers. 
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>class methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=File.cmp>cmp</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.cmp( <I>name1</I>, <I>name2</I>, <I>verbose</I>=<CODE>false</CODE> ) -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Synonym for <A href="http://www.ruby-cn.org/book/ProgrammingRuby/ref_c_file.html#File.compare" ><CODE>File.compare</CODE> </A>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=File.compare>compare</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.compare( <I>name1</I>, <I>name2</I>, <I>verbose</I>=<CODE>false</CODE> ) -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns <CODE>true</CODE> only if the contents of files <I>name1</I> and <I>name2</I> are identical. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=File.copy>copy</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.copy( <I>fromName</I>, <I>toName</I>, <I>verbose</I>=<CODE>false</CODE> ) -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Equivalent to calling <A href="http://www.ruby-cn.org/book/ProgrammingRuby/ref_c_file.html#File.syscopy" ><CODE>File.syscopy</CODE> </A>, but logs the attempt to <CODE>$stderr</CODE> if <I>verbose</I> is not <CODE>false</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=File.cp>cp</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.cp( <I>fromName</I>, <I>toName</I>, <I>verbose</I>=<CODE>false</CODE> ) -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Synonym for <A href="http://www.ruby-cn.org/book/ProgrammingRuby/ref_c_file.html#File.copy" ><CODE>File.copy</CODE> </A>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=File.install>install</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.install( <I>fromName</I>, <I>toName</I>, <I>aMode</I>=<CODE>nil</CODE>, <I>verbose</I>=<CODE>false</CODE> ) </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Copies file <I>fromName</I> to file <I>toName</I> using <A href="http://www.ruby-cn.org/book/ProgrammingRuby/ref_c_file.html#File.syscopy" ><CODE>File.syscopy</CODE> </A>, unless <I>toName</I> already exists and has the same content as <I>fromName</I>. Sets the mode of the resulting file to <I>aMode</I> unless <I>aMode</I> is <CODE>nil</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=File.makedirs>makedirs</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.makedirs( <I>[</I> <I>dirName</I> <I>]<SUP>*</SUP> </I><I>[</I>, <I>aBoolean</I> <I>]</I> ) </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Creates the given directories, logging each attempt to <CODE>$stderr</CODE> if the last parameter is <CODE>true</CODE>. Creates any missing parent directories as required. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=File.mkpath>mkpath</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.mkpath( <I>[</I> <I>dirName</I> <I>]<SUP>*</SUP> </I><I>[</I>, <I>aBoolean</I> <I>]</I> ) </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Synonym for <A href="http://www.ruby-cn.org/book/ProgrammingRuby/ref_c_file.html#File.makedirs" ><CODE>File.makedirs</CODE> </A>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=File.move>move</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.move( <I>fromName</I>, <I>toName</I>, <I>verbose</I>=<CODE>false</CODE> ) -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Effectively renames <I>fromName</I> to <I>toName</I>, logging to <CODE>$stderr</CODE> if <I>verbose</I> is not <CODE>false</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=File.mv>mv</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.mv( <I>fromName</I>, <I>toName</I>, <I>verbose</I>=<CODE>false</CODE> ) -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Synonym for <A href="http://www.ruby-cn.org/book/ProgrammingRuby/ref_c_file.html#File.move" ><CODE>File.move</CODE> </A>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=File.rm_f>rm_f</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.rm_f( <I>[</I> <I>fileName</I> <I>]<SUP>*</SUP> </I><I>[</I>, <I>aBoolean</I> <I>]</I> ) -&gt; <I>anInteger</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Synonym for <A href="http://www.ruby-cn.org/book/ProgrammingRuby/ref_c_file.html#File.safe_unlink" ><CODE>File.safe_unlink</CODE> </A>(the name refers to the Unix <CODE>rm&nbsp;-f</CODE> command). 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=File.safe_unlink>safe_unlink</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.safe_unlink( <I>[</I> <I>fileName</I> <I>]<SUP>*</SUP> </I><I>[</I>, <I>aBoolean</I> <I>]</I> ) -&gt; <I>anInteger</I> or <CODE>nil</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Unlinks (deletes) the given files, logging to <CODE>$stderr</CODE> if the last parameter is <CODE>true</CODE>. The method attempts to make all files writable before unlinking them, so no errors will occur deleting read-only files. Returns the number of files deleted, or <CODE>nil</CODE> on error. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=File.syscopy>syscopy</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.syscopy( <I>fromName</I>, <I>toName</I> ) -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Efficiently copies the file named <I>fromName</I> to <I>toName</I>. If <I>toName</I> names a directory, the destination will be a file in that directory with the same basename as <I>fromName</I>. After the copy, the file mode of <I>toName</I> will be the same as that of <I>fromName</I>. Returns <CODE>true</CODE> on success. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE>
<TBODY>
<TR>
<TD height=20><IMG height=20 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<TABLE cellPadding=10 width="100%" bgColor=#660066 border=0>
<TBODY>
<TR>
<TD vAlign=center><FONT color=white size=7>class GetoptLong</FONT> </TD>
<TD>
<TABLE border=0>
<TBODY>
<TR>
<TD><FONT color=white>Parent: </FONT></TD>
<TD><FONT color=white>Object</FONT> </TD></TR>
<TR>
<TD><FONT color=white>Version: </FONT></TD>
<TD><FONT color=white>1.6 </FONT></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<P></P>
<H3>Index:</H3><A href="120.html#GetoptLong.new">new</A> <I><A href="120.html#GetoptLong.each">each</A> </I><I><A href="120.html#GetoptLong.error_qm">error?</A> </I><I><A href="120.html#GetoptLong.error_message">error_message</A> </I><I><A href="120.html#GetoptLong.get">get</A> </I><I><A href="120.html#GetoptLong.get_option">get_option</A> </I><I><A href="120.html#GetoptLong.ordering">ordering</A> </I><I><A href="120.html#GetoptLong.ordering_eq">ordering=</A> </I><I><A href="120.html#GetoptLong.quiet">quiet</A> </I><I><A href="120.html#GetoptLong.quiet_eq">quiet=</A> </I><I><A href="120.html#GetoptLong.quiet_qm">quiet?</A> </I><I><A href="120.html#GetoptLong.set_options">set_options</A> </I><I><A href="120.html#GetoptLong.terminate">terminate</A> </I><I><A href="120.html#GetoptLong.terminated_qm">terminated?</A> </I>
<P></P>
<HR>

<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>#&nbsp;Call&nbsp;using&nbsp;"ruby&nbsp;example.rb&nbsp;--size&nbsp;10k&nbsp;-v&nbsp;-q&nbsp;a.txt&nbsp;b.doc"
<P></P>
require&nbsp;'getoptlong'
<P></P>
#&nbsp;specify&nbsp;the&nbsp;options&nbsp;we&nbsp;accept&nbsp;and&nbsp;initialize
#&nbsp;the&nbsp;option&nbsp;parser
<P></P>
opts&nbsp;=&nbsp;GetoptLong.new(
&nbsp;&nbsp;[&nbsp;"--size",&nbsp;&nbsp;&nbsp;&nbsp;"-s",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetoptLong::REQUIRED_ARGUMENT&nbsp;],
&nbsp;&nbsp;[&nbsp;"--verbose",&nbsp;"-v",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetoptLong::NO_ARGUMENT&nbsp;],
&nbsp;&nbsp;[&nbsp;"--query",&nbsp;&nbsp;&nbsp;"-q",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetoptLong::NO_ARGUMENT&nbsp;],
&nbsp;&nbsp;[&nbsp;"--check",&nbsp;&nbsp;&nbsp;"--valid",&nbsp;"-c",&nbsp;GetoptLong::NO_ARGUMENT&nbsp;]
)
<P></P>
#&nbsp;process&nbsp;the&nbsp;parsed&nbsp;options
<P></P>
opts.each&nbsp;do&nbsp;|opt,&nbsp;arg|
&nbsp;&nbsp;puts&nbsp;"Option:&nbsp;#{opt},&nbsp;arg&nbsp;#{arg.inspect}"
end
<P></P>
puts&nbsp;"Remaining&nbsp;args:&nbsp;#{ARGV.join(',&nbsp;')}"
</PRE></TD></TR></TBODY></TABLE><EM>produces:</EM> 
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>Option:&nbsp;--size,&nbsp;arg&nbsp;"10k"
Option:&nbsp;--verbose,&nbsp;arg&nbsp;""
Option:&nbsp;--query,&nbsp;arg&nbsp;""
Remaining&nbsp;args:&nbsp;a.txt,&nbsp;b.doc
</PRE></TD></TR></TBODY></TABLE>
<P></P>Class <CODE>GetoptLong</CODE> supports GNU-style command-line option parsing. Options may be a minus sign (`-') followed by a single character, or two minus signs (`--') followed by a name (a long option). Long options may be abbreviated to their shortest unambiguous lengths. 
<P></P>A single internal option may have multiple external representations. For example, the option to control verbose output could be any of <CODE>-v</CODE>, <CODE>--verbose</CODE>, or <CODE>--details</CODE>. Some options may also take an associated value. 
<P></P>Each internal option is passed to <CODE>GetoptLong</CODE> as an array, containing strings representing the option's external forms and a flag. The flag (<CODE>NO_ARGUMENT</CODE>, <CODE>REQUIRED_ARGUMENT</CODE>, or <CODE>OPTIONAL_ARGUMENT</CODE>) specifies how <CODE>GetoptLong</CODE> is to associate an argument with the option. 
<P></P>If the environment variable <CODE>POSIXLY_CORRECT</CODE> is set, all options must precede nonoptions on the command line. Otherwise, the default behavior of <CODE>GetoptLong</CODE> is to reorganize the command line to put the options at the front. This behavior may be changed by setting <CODE>GetoptLong#ordering=</CODE> to one of the constants <CODE>PERMUTE</CODE>, <CODE>REQUIRE_ORDER</CODE>, or <CODE>RETURN_IN_ORDER</CODE>. <CODE>POSIXLY_CORRECT</CODE> may not be overridden. 
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=3><FONT color=white size=6>constants </FONT></TD></TR></TBODY></TABLE>
<TABLE cellPadding=5 border=2>
<TBODY>
<TR bgColor=#ff9999>
<TD vAlign=top><EM><B>Per-option constants</B> </EM></TD></TR>
<P></P>
<TR>
<TD><A name=GetoptLong.NO_ARGUMENT><CODE>NO_ARGUMENT</CODE> </A></TD>
<TD></TD>
<TD>Flags an option that takes no argument.</TD></TR>
<P></P>
<TR>
<TD><A name=GetoptLong.OPTIONAL_ARGUMENT><CODE>OPTIONAL_ARGUMENT</CODE> </A></TD>
<TD></TD>
<TD>A nonoption following this option will be used as this option's argument.</TD></TR>
<P></P>
<TR>
<TD><A name=GetoptLong.REQUIRED_ARGUMENT><CODE>REQUIRED_ARGUMENT</CODE> </A></TD>
<TD></TD>
<TD>This option must be followed by an argument.</TD></TR>
<P></P>
<TR>
<TD bgColor=#ff9999 colSpan=9 height=3><IMG height=1 src="120_files/dot[1].gif"  width=1></TD></TR>
<TR>
<TD vAlign=top><EM><B>Overall constants</B> </EM></TD></TR>
<P></P>
<TR>
<TD><A name=GetoptLong.PERMUTE><CODE>PERMUTE</CODE> </A></TD>
<TD></TD>
<TD>Options and their arguments will be shuffled to the front of the command line.</TD></TR>
<P></P>
<TR>
<TD><A name=GetoptLong.REQUIRE_ORDER><CODE>REQUIRE_ORDER</CODE> </A></TD>
<TD></TD>
<TD>Options and their arguments must appear at the start of the command line. The first nonoption terminates option processing.</TD></TR>
<P></P>
<TR>
<TD><A name=GetoptLong.RETURN_IN_ORDER><CODE>RETURN_IN_ORDER</CODE> </A></TD>
<TD></TD>
<TD>Return options in the order in which they occur on the command line.</TD></TR>
<P></P>
<TR>
<TD bgColor=#ff9999 colSpan=9 height=2><IMG height=1 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>class methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=GetoptLong.new>new</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>GetoptLong.new( <I>[</I> <I>options</I> <I>]<SUP>*</SUP> </I>) -&gt; <I>ref</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns a new option parser. Any <I>options</I> are passed to <I>ref</I>.<CODE>set_options</CODE>. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>instance methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=GetoptLong.each>each</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.each {| anOption, anArgument | block } 
<P></P></TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Loops calling <CODE>GetoptLong#get</CODE>, passing the returned option and argument to the associated block. The loop ends when <CODE>get</CODE> returns <CODE>nil</CODE> for <I>anOption</I>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=GetoptLong.error_qm>error?</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.error? -&gt; <I>anException</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns an <CODE>Exception</CODE> object documenting any error that has occurred, or <CODE>nil</CODE> if there has not been an error. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=GetoptLong.error_message>error_message</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.error_message -&gt; <I>aString</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns the text of the last error message. </TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=GetoptLong.get>get</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.get -&gt; [ <I>anOption</I>, <I>anArgument</I> ] </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns the next option, along with any associated argument. If there is no argument, <CODE>nil</CODE> is returned for <I>anArgument</I>. If there are no remaining unprocessed options, or if there is an error in option processing and <CODE>quiet</CODE> has been set, <CODE>nil</CODE> is returned for <I>anOption</I>. Otherwise, if there is an error, a message is written to <CODE>$stderr</CODE> and an exception (a subclass of <CODE>StandardError</CODE>) is raised. 
<P></P>The option string returned is the first option that was given in the corresponding array passed to <CODE>set_options</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=GetoptLong.get_option>get_option</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.get_option -&gt; [ <I>anOption</I>, <I>anArgument</I> ] </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Synonym for <CODE>GetoptLong#get</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=GetoptLong.ordering>ordering</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.ordering -&gt; <I>aFixnum</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns the current ordering. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=GetoptLong.ordering_eq>ordering=</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.ordering = <I>aFixnum</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Sets the ordering to one of <CODE>PERMUTE</CODE>, <CODE>REQUIRE_ORDER</CODE>, or <CODE>RETURN_IN_ORDER</CODE>. Quietly ignored if the environment variable <CODE>POSIXLY_CORRECT</CODE> is set. Ordering may not be changed once option processing has been started. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=GetoptLong.quiet>quiet</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.quiet -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns the current value of the <CODE>quiet</CODE> attribute. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=GetoptLong.quiet_eq>quiet=</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.quiet = <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Sets the current value of the <CODE>quiet</CODE> attribute. If <CODE>false</CODE>, any errors encountered are reported to <CODE>$stderr</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=GetoptLong.quiet_qm>quiet?</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.quiet? -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Synonym for <CODE>GetoptLong#quiet</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=GetoptLong.set_options>set_options</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.set_options( <I>[</I> <I>anOptArray</I> <I>]<SUP>*</SUP> </I>) -&gt; <I>ref</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Each parameter is an array specifying a single internal option. The array contains one or more strings specifying the external form(s) of the option, and one of the flags <CODE>NO_ARGUMENT</CODE>, <CODE>OPTIONAL_ARGUMENT</CODE>, or <CODE>REQUIRED_ARGUMENT</CODE>. See the sample code on page 448 for examples of use. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=GetoptLong.terminate>terminate</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.terminate -&gt; <I>ref</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Terminates option processing. Any remaining arguments are written back to <CODE>ARGV</CODE>. This may be called from within a <CODE>GetoptLong#each</CODE> or on its own. For example, calling the following program using ``<CODE>ruby example.rb --size 10k -v -term -q a.txt b.doc</CODE>'' will leave the <CODE>-q</CODE> and filenames in <CODE>ARGV</CODE>. 
<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>require&nbsp;'getoptlong'
<P></P>
opts&nbsp;=&nbsp;GetoptLong.new(
&nbsp;&nbsp;[&nbsp;"--size",&nbsp;&nbsp;&nbsp;&nbsp;"-s",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetoptLong::REQUIRED_ARGUMENT&nbsp;],
&nbsp;&nbsp;[&nbsp;"--verbose",&nbsp;"-v",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetoptLong::NO_ARGUMENT&nbsp;],
&nbsp;&nbsp;[&nbsp;"--term",&nbsp;&nbsp;&nbsp;&nbsp;"-t",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetoptLong::NO_ARGUMENT&nbsp;],
&nbsp;&nbsp;[&nbsp;"--query",&nbsp;&nbsp;&nbsp;"-q",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetoptLong::NO_ARGUMENT&nbsp;],
&nbsp;&nbsp;[&nbsp;"--check",&nbsp;&nbsp;&nbsp;"--valid",&nbsp;"-c",&nbsp;GetoptLong::NO_ARGUMENT&nbsp;]
&nbsp;&nbsp;)
<P></P>
opts.each&nbsp;do&nbsp;|opt,&nbsp;arg|
&nbsp;&nbsp;puts&nbsp;"Option:&nbsp;#{opt},&nbsp;arg&nbsp;#{arg.inspect}"
&nbsp;&nbsp;opts.terminate&nbsp;if&nbsp;(opt&nbsp;==&nbsp;'--term')
end
<P></P>
puts&nbsp;"Remaining&nbsp;args:&nbsp;#{ARGV.join(',&nbsp;')}"
</PRE></TD></TR></TBODY></TABLE><EM>produces:</EM> 
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>Option:&nbsp;--size,&nbsp;arg&nbsp;"10k"
Option:&nbsp;--verbose,&nbsp;arg&nbsp;""
Option:&nbsp;--term,&nbsp;arg&nbsp;""
Remaining&nbsp;args:&nbsp;-q,&nbsp;a.txt,&nbsp;b.doc
</PRE></TD></TR></TBODY></TABLE>
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=GetoptLong.terminated_qm>terminated?</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.terminated? -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns <CODE>true</CODE> if option processing has been terminated. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE>
<TBODY>
<TR>
<TD height=20><IMG height=20 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<TABLE cellPadding=10 width="100%" bgColor=#660066 border=0>
<TBODY>
<TR>
<TD vAlign=center><FONT color=white size=7>module mkmf</FONT> </TD></TR></TBODY></TABLE>
<P></P>
<H3>Index:</H3><I><A href="120.html#mkmf.create_makefile">create_makefile</A> </I><I><A href="120.html#mkmf.dir_config">dir_config</A> </I><I><A href="120.html#mkmf.find_library">find_library</A> </I><I><A href="120.html#mkmf.have_func">have_func</A> </I><I><A href="120.html#mkmf.have_header">have_header</A> </I><I><A href="120.html#mkmf.have_library">have_library</A> </I>
<P></P>
<HR>

<P></P>The <CODE>mkmf</CODE> library is used by Ruby extension modules to help create <CODE>Makefiles</CODE>. When writing an extension, you create a program named ``<CODE>extconf.rb</CODE>'', which may be as simple as: 
<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>require&nbsp;'mkmf'
create_makefile("Test")
</PRE></TD></TR></TBODY></TABLE>
<P></P>When run, this script will produce a <CODE>Makefile</CODE> suited to the target platform. <CODE>mkmf</CODE> contains several methods you can use to find libraries and include files and to set compiler flags. 
<P></P>For more information on creating extension modules, see Chapter 17, which begins on page 169. 
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=3><FONT color=white size=6>constants </FONT></TD></TR></TBODY></TABLE>
<TABLE cellPadding=5 border=2>
<TBODY>
<TR>
<TD vAlign=top>
<TR>
<TD><A name=mkmf.PLATFORM><CODE>PLATFORM</CODE> </A></TD>
<TD>varies</TD>
<TD>A constant string that describes the platform on which Ruby is running, such as ``mswin32'' or ``i686-linux.''</TD></TR>
<P></P>
<TR>
<TD><A name=mkmf.$CFLAGS><CODE>$CFLAGS</CODE> </A></TD>
<TD></TD>
<TD>Global variable for compiler flags.</TD></TR>
<P></P>
<TR>
<TD><A name=mkmf.$LDFLAGS><CODE>$LDFLAGS</CODE> </A></TD>
<TD></TD>
<TD>Global variable for linker flags.</TD></TR></TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>instance methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=mkmf.create_makefile>create_makefile</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>create_makefile( <I>target</I> ) </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Creates a <CODE>Makefile</CODE> for an extension named <EM>target</EM>. If this method is not called, no <CODE>Makefile</CODE> is created. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=mkmf.dir_config>dir_config</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>dir_config( <I>name</I> ) </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Looks for directory configuration options for <EM>name</EM> given as arguments to this program or to the original build of Ruby. These arguments may be one of: 
<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 border=0>
<TBODY>
<TR>
<TD vAlign=top><CODE>--with-</CODE> <EM>name</EM> <CODE>-dir</CODE>=<EM>directory</EM> </TD></TR>
<TR>
<TD vAlign=top><CODE>--with-</CODE> <EM>name</EM> <CODE>-include</CODE>=<EM>directory</EM> </TD></TR>
<TR>
<TD vAlign=top><CODE>--with-</CODE> <EM>name</EM> <CODE>-lib</CODE>=<EM>directory</EM> </TD></TR></TBODY></TABLE>
<P></P>The given directories will be added to the appropriate search paths (include or link) in the <CODE>Makefile</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=mkmf.find_library>find_library</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>find_library( <I>name</I>, <I>function</I>, <I>[</I> <I>path</I> <I>]<SUP>+</SUP> </I>) -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Same as <CODE>have_library</CODE>, but will also search in the given directory paths. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=mkmf.have_func>have_func</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>have_func( <I>function</I> ) -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>If the named function exists in the standard compile environment, adds the directive -DHAVE_<EM>FUNCTION</EM> to the compile command in the <CODE>Makefile</CODE> and returns <CODE>true</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=mkmf.have_header>have_header</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>have_header( <I>header</I> ) -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>If the given header file can be found in the standard search path, adds the directive -DHAVE_<EM>HEADER</EM> to the compile command in the <CODE>Makefile</CODE> and returns <CODE>true</CODE>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=mkmf.have_library>have_library</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>have_library( <I>library</I>, <I>function</I> ) -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>If the given function exists in the named library, which must exist in the standard search path or in a directory added with <CODE>dir_config</CODE>, adds the library to the link command in the <CODE>Makefile</CODE> and returns <CODE>true</CODE>. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE>
<TBODY>
<TR>
<TD height=20><IMG height=20 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<TABLE cellPadding=10 width="100%" bgColor=#660066 border=0>
<TBODY>
<TR>
<TD vAlign=center><FONT color=white size=7>module ParseDate</FONT> </TD></TR></TBODY></TABLE>
<P></P>
<H3>Index:</H3><A href="120.html#ParseDate.parsedate">parsedate</A> 
<P></P>
<HR>

<P></P>The <CODE>ParseDate</CODE> module defines a single method, <CODE>ParseDate::parsedate</CODE>, which converts a date and/or time string into its constituents. It uses heuristics that handle a wide variety of date and time formats, including a subset of ISO&nbsp;8601, Unix <CODE>ctime</CODE>, and most common written variants. The following table shows some examples.&nbsp; 
<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 border=0>
<TBODY>
<TR bgColor=#ff9999>
<TD vAlign=top colSpan=2><B>StringGuess?</B> </TD>
<TD vAlign=top><B>yy</B> </TD>
<TD vAlign=top><B>mm</B> </TD>
<TD vAlign=top><B>dd</B> </TD>
<TD vAlign=top><B>hh</B> </TD>
<TD vAlign=top><B>min</B> </TD>
<TD vAlign=top><B>sec</B> </TD>
<TD vAlign=top><B>zone</B> </TD>
<TD vAlign=top><B>wd</B> </TD></TR>
<TR>
<TD vAlign=top>1999-09-05 23:55:21+0900</TD>
<TD vAlign=top>F</TD>
<TD vAlign=top>1999</TD>
<TD vAlign=top>9</TD>
<TD vAlign=top>5</TD>
<TD vAlign=top>23</TD>
<TD vAlign=top>55</TD>
<TD vAlign=top>21</TD>
<TD vAlign=top>+0900</TD>
<TD vAlign=top>--</TD></TR>
<TR>
<TD vAlign=top>1983-12-25</TD>
<TD vAlign=top>F</TD>
<TD vAlign=top>1983</TD>
<TD vAlign=top>12</TD>
<TD vAlign=top>25</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD></TR>
<TR>
<TD vAlign=top>1965-11-10 T13:45</TD>
<TD vAlign=top>F</TD>
<TD vAlign=top>1965</TD>
<TD vAlign=top>11</TD>
<TD vAlign=top>10</TD>
<TD vAlign=top>13</TD>
<TD vAlign=top>45</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD></TR>
<TR>
<TD vAlign=top>10/9/75 1:30pm</TD>
<TD vAlign=top>F</TD>
<TD vAlign=top>75</TD>
<TD vAlign=top>10</TD>
<TD vAlign=top>9</TD>
<TD vAlign=top>13</TD>
<TD vAlign=top>30</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD></TR>
<TR>
<TD vAlign=top>10/9/75 1:30pm</TD>
<TD vAlign=top>T</TD>
<TD vAlign=top>1975</TD>
<TD vAlign=top>10</TD>
<TD vAlign=top>9</TD>
<TD vAlign=top>13</TD>
<TD vAlign=top>30</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD></TR>
<TR>
<TD vAlign=top>Mon Feb 28 17:15:49 CST 2000</TD>
<TD vAlign=top>F</TD>
<TD vAlign=top>2000</TD>
<TD vAlign=top>2</TD>
<TD vAlign=top>28</TD>
<TD vAlign=top>17</TD>
<TD vAlign=top>15</TD>
<TD vAlign=top>49</TD>
<TD vAlign=top>CST</TD>
<TD vAlign=top>1</TD></TR>
<TR>
<TD vAlign=top>Tue, 02-Mar-99 11:20:32 GMT</TD>
<TD vAlign=top>F</TD>
<TD vAlign=top>99</TD>
<TD vAlign=top>3</TD>
<TD vAlign=top>2</TD>
<TD vAlign=top>11</TD>
<TD vAlign=top>20</TD>
<TD vAlign=top>32</TD>
<TD vAlign=top>GMT</TD>
<TD vAlign=top>2</TD></TR>
<TR>
<TD vAlign=top>Tue, 02-Mar-99 11:20:32 GMT</TD>
<TD vAlign=top>T</TD>
<TD vAlign=top>1999</TD>
<TD vAlign=top>3</TD>
<TD vAlign=top>2</TD>
<TD vAlign=top>11</TD>
<TD vAlign=top>20</TD>
<TD vAlign=top>32</TD>
<TD vAlign=top>GMT</TD>
<TD vAlign=top>2</TD></TR>
<TR>
<TD vAlign=top>12-January-1990, 04:00 WET</TD>
<TD vAlign=top>F</TD>
<TD vAlign=top>1990</TD>
<TD vAlign=top>1</TD>
<TD vAlign=top>12</TD>
<TD vAlign=top>4</TD>
<TD vAlign=top>0</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>WET</TD>
<TD vAlign=top>--</TD></TR>
<TR>
<TD vAlign=top>4/3/99</TD>
<TD vAlign=top>F</TD>
<TD vAlign=top>99</TD>
<TD vAlign=top>4</TD>
<TD vAlign=top>3</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD></TR>
<TR>
<TD vAlign=top>4/3/99</TD>
<TD vAlign=top>T</TD>
<TD vAlign=top>1999</TD>
<TD vAlign=top>4</TD>
<TD vAlign=top>3</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD></TR>
<TR>
<TD vAlign=top>10th February, 1976</TD>
<TD vAlign=top>F</TD>
<TD vAlign=top>1976</TD>
<TD vAlign=top>2</TD>
<TD vAlign=top>10</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD></TR>
<TR>
<TD vAlign=top>March 1st, 84</TD>
<TD vAlign=top>T</TD>
<TD vAlign=top>1984</TD>
<TD vAlign=top>3</TD>
<TD vAlign=top>1</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD></TR>
<TR>
<TD vAlign=top>Friday</TD>
<TD vAlign=top>F</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>--</TD>
<TD vAlign=top>5</TD></TR>
<TR>
<TD bgColor=#ff9999 colSpan=9 height=2><IMG height=1 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>class methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=ParseDate.parsedate>parsedate</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.parsedate( <I>aString</I>, <I>guessYear</I>=<CODE>false</CODE> )<BR>-&gt; [ <I>year</I>, <I>mon</I>, <I>mday</I>, <I>hour</I>, <I>min</I>, <I>sec</I>, <I>zone</I>, <I>wday</I> ] </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Parses a string containing a date and/or a time, returning an array of <CODE>Fixnum</CODE> objects containing the various components. <CODE>nil</CODE> is returned for fields that cannot be parsed from <I>aString</I>. If the result contains a year that is less than 100 and <I>guessYear</I> is true, <CODE>parsedate</CODE> will return a year value equal to <I>year</I> plus 2000 if <I>year</I> is less than 69, <I>year</I> plus 1900 otherwise. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE cellPadding=10 width="100%" bgColor=#660066 border=0>
<TBODY>
<TR>
<TD vAlign=center><FONT color=white size=7>Library: profile</FONT> </TD></TR></TBODY></TABLE>
<P></P>
<P></P>The <CODE>profile</CODE> library prints to <CODE>$stderr</CODE> a summary of the number of calls to, and the time spent in, each method in a Ruby program. The output is sorted by the total time spent in each method. Profiling can be enabled from the command line using the <CODE>-r</CODE> <CODE>profile</CODE> option, or from within a source program by requiring the <CODE>profile</CODE> module. 
<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>require&nbsp;'profile'
def&nbsp;ackerman(m,&nbsp;n)
&nbsp;&nbsp;if&nbsp;m&nbsp;==&nbsp;0&nbsp;then&nbsp;&nbsp;n+1
&nbsp;&nbsp;elsif&nbsp;n&nbsp;==&nbsp;0&nbsp;and&nbsp;m&nbsp;&gt;&nbsp;0&nbsp;then&nbsp;ackerman(m-1,&nbsp;1)
&nbsp;&nbsp;else&nbsp;ackerman(m-1,&nbsp;ackerman(m,&nbsp;n-1))
&nbsp;&nbsp;end
end
ackerman(3,3)
</PRE></TD></TR></TBODY></TABLE>
<P></P><EM>produces:</EM> 
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=500 border=0>
<TBODY>
<TR>
<TD><PRE> time   seconds   seconds    calls  ms/call  ms/call  name
 74.17     2.47      2.47     2432     1.02    41.95  Object#ackerman
 17.42     3.05      0.58     3676     0.16     0.16  Fixnum#==
  5.71     3.24      0.19     2431     0.08     0.08  Fixnum#-
  2.70     3.33      0.09     1188     0.08     0.08  Fixnum#+
  0.00     3.33      0.00        1     0.00     0.00  Module#method_added
  0.00     3.33      0.00       57     0.00     0.00  Fixnum#&gt;
  0.00     3.33      0.00        1     0.00  3330.00  #toplevel
</PRE></TD></TR></TBODY></TABLE>
<P></P>
<TABLE>
<TBODY>
<TR>
<TD height=20><IMG height=20 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<TABLE cellPadding=10 width="100%" bgColor=#660066 border=0>
<TBODY>
<TR>
<TD vAlign=center><FONT color=white size=7>class PStore</FONT> </TD>
<TD>
<TABLE border=0>
<TBODY>
<TR>
<TD><FONT color=white>Parent: </FONT></TD>
<TD><FONT color=white>Object</FONT> </TD></TR>
<TR>
<TD><FONT color=white>Version: </FONT></TD>
<TD><FONT color=white>1.6 </FONT></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<P></P>
<H3>Index:</H3><A href="120.html#PStore.new">new</A> <I><A href="120.html#PStore._ob_cb">[ ]</A> </I><I><A href="120.html#PStore._ob_cb_eq">[ ]=</A> </I><I><A href="120.html#PStore.abort">abort</A> </I><I><A href="120.html#PStore.commit">commit</A> </I><I><A href="120.html#PStore.path">path</A> </I><I><A href="120.html#PStore.root_qm">root?</A> </I><I><A href="120.html#PStore.roots">roots</A> </I><I><A href="120.html#PStore.transaction">transaction</A> </I>
<P></P>
<HR>

<P></P>The <CODE>PStore</CODE> class provides transactional, file-based persistent storage of Ruby objects. The following example stores two hierarchies in a PStore. The first, identified by the key ``<CODE>names</CODE>'', is an array of Strings. The second, identified by ``<CODE>tree</CODE>'', is a simple binary tree. 
<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>require&nbsp;"pstore"
<P></P>
class&nbsp;T
&nbsp;&nbsp;def&nbsp;initialize(val,&nbsp;left=nil,&nbsp;right=nil)
&nbsp;&nbsp;&nbsp;&nbsp;@val,&nbsp;@left,&nbsp;@right&nbsp;=&nbsp;val,&nbsp;left,&nbsp;right
&nbsp;&nbsp;end
&nbsp;&nbsp;def&nbsp;to_a
&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;@val,&nbsp;@left.to_a,&nbsp;@right.to_a&nbsp;]
&nbsp;&nbsp;end
end
<P></P>
store&nbsp;=&nbsp;PStore.new("/tmp/store")
store.transaction&nbsp;do
&nbsp;&nbsp;&nbsp;store['names']&nbsp;=&nbsp;[&nbsp;'Douglas',&nbsp;'Barenberg',&nbsp;'Meyer'&nbsp;]
&nbsp;&nbsp;&nbsp;store['tree']&nbsp;&nbsp;=&nbsp;T.new('top',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T.new('A',&nbsp;T.new('B')),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T.new('C',&nbsp;T.new('D',&nbsp;nil,&nbsp;T.new('E'))))
end
<P></P>
#&nbsp;now&nbsp;read&nbsp;it&nbsp;back&nbsp;in
<P></P>
store.transaction&nbsp;do
&nbsp;&nbsp;&nbsp;puts&nbsp;"Roots:&nbsp;#{store.roots.join(',&nbsp;')}"
&nbsp;&nbsp;&nbsp;puts&nbsp;store['names'].join(',&nbsp;')
&nbsp;&nbsp;&nbsp;puts&nbsp;store['tree'].to_a.inspect
end
</PRE></TD></TR></TBODY></TABLE><EM>produces:</EM> 
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>Roots:&nbsp;names,&nbsp;tree
Douglas,&nbsp;Barenberg,&nbsp;Meyer
["top",&nbsp;["A",&nbsp;["B",&nbsp;[],&nbsp;[]],&nbsp;[]],&nbsp;["C",&nbsp;["D",&nbsp;[],&nbsp;["E",&nbsp;[],&nbsp;[]]],&nbsp;[]]]
</PRE></TD></TR></TBODY></TABLE>
<P></P>Each <CODE>PStore</CODE> can store several object hierarchies. Each hierarchy has a root, identified by a key (often a string). At the start of a <CODE>PStore</CODE> transaction, these hierarchies are read from a disk file and made available to the Ruby program. At the end of the transaction, the hierarchies are written back to the file. Any changes made to objects in these hierarchies are therefore saved on disk, to be read at the start of the next transaction that uses that file. 
<P></P>In normal use, a <CODE>PStore</CODE> object is created and then is used one or more times to control a transaction. Within the body of the transaction, any object hierarchies that had previously been saved are made available, and any changes to object hierarchies, and any new hierarchies, are written back to the file at the end. 
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>class methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=PStore.new>new</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>PStore.new( <I>aFilename</I> ) -&gt; <I>aPStore</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns a new <CODE>PStore</CODE> object associated with the given file. If the file exists, its contents must have been previously written by <CODE>PStore</CODE>. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>instance methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=PStore._ob_cb>[ ]</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>[ <I>anObject</I> ] -&gt; <I>anOtherObject</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Root Access---Returns the root of an object hierarchy identified by <I>anObject</I>. An exception is raised if <I>anObject</I> does not identify a root. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=PStore._ob_cb_eq>[ ]=</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>[ <I>anObject</I> ] = <I>anOtherObject</I> -&gt; <I>anOtherObject</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Root Creation---Sets <I>anOtherObject</I> as the base of the object hierarchy to be identified using <I>anObject</I>. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=PStore.abort>abort</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.abort </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Terminates this transaction, losing any changes made to the object hierarchies. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=PStore.commit>commit</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.commit </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Terminates the current transaction, saving the object hierarchies into the store's file. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=PStore.path>path</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.path -&gt; <I>aString</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns the name of the file associated with this store. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=PStore.root_qm>root?</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.root?( <I>anObject</I> ) -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns <CODE>true</CODE> if <I>anObject</I> is the key of a root in this store. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=PStore.roots>roots</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.roots -&gt; <I>anArray</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns an array containing the keys of the root objects available in this store. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=PStore.transaction>transaction</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.transaction {| <I>ref</I> | block } 
<P></P>-&gt; <I>anObject</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>If the file associated with <I>ref</I> exists, reads in the object hierarchies from it. It then executes the associated block, passing in <I>ref</I>. The block may use this parameter to access the roots of the hierarchies and hence access the persistent objects. If the block calls <CODE>PStore#abort</CODE>, or if it raises an exception, no data is saved back to the associated file. Otherwise, if it invokes <CODE>PStore#commit</CODE>, or if it terminates normally, the object hierarchies are written back to the file. The value returned is the value returned by the block. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE>
<TBODY>
<TR>
<TD height=20><IMG height=20 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<TABLE cellPadding=10 width="100%" bgColor=#660066 border=0>
<TBODY>
<TR>
<TD vAlign=center><FONT color=white size=7>class Tempfile</FONT> </TD>
<TD>
<TABLE border=0>
<TBODY>
<TR>
<TD><FONT color=white>Parent: </FONT></TD>
<TD><FONT color=white>[IO]</FONT> </TD></TR>
<TR>
<TD><FONT color=white>Version: </FONT></TD>
<TD><FONT color=white>1.6 </FONT></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<P></P>
<H3>Index:</H3><A href="120.html#Tempfile.new">new</A> <I><A href="120.html#Tempfile.close">close</A> </I><I><A href="120.html#Tempfile.open">open</A> </I><I><A href="120.html#Tempfile.path">path</A> </I>
<P></P>
<HR>

<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=500 border=0>
<TBODY>
<TR>
<TD vAlign=top colSpan=3><CODE>require&nbsp;"tempfile"</CODE> </TD></TR>
<TR>
<TD vAlign=top colSpan=3><CODE></CODE></TD></TR>
<TR>
<TD vAlign=top colSpan=3><CODE>tf&nbsp;=&nbsp;Tempfile.new("afile")</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>tf.path</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>"/tmp/afile32146.0"</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>tf.puts("Cosi&nbsp;Fan&nbsp;Tutte")</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>nil</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>tf.close</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>nil</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>tf.open</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>#&lt;File:0x40196fc8&gt;</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>tf.gets</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>"Cosi&nbsp;Fan&nbsp;Tutte\n"</CODE> </TD></TR>
<TR>
<TD vAlign=top><CODE>tf.close(true)</CODE> </TD>
<TD vAlign=top></TD>
<TD vAlign=top><CODE>#&lt;File:0x40196fc8&gt;</CODE> </TD></TR></TBODY></TABLE>
<P></P>
<P></P>Class <CODE>Tempfile</CODE> creates managed temporary files. Although they behave the same as any other <CODE>IO</CODE> objects, temporary files are automatically deleted when the Ruby program terminates. Once a <CODE>Tempfile</CODE> object has been created, the underlying file may be opened and closed a number of times in succession. 
<P></P><CODE>Tempfile</CODE> does not directly inherit from <CODE>IO</CODE>. Instead, it delegates calls to a <CODE>File</CODE> object. From the programmer's perspective, apart from the unusual <CODE>new</CODE>, <CODE>open,</CODE> and <CODE>close</CODE> semantics, a <CODE>Tempfile</CODE> object behaves as if it were an <CODE>IO</CODE> object. 
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>class methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Tempfile.new>new</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>Tempfile.new( <I>basename</I>, <I>tmpdir</I>=&lt;see below&gt; ) -&gt; <I>ref</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Constructs a temporary file in the given directory. The file name is built by concatenating <I>basename</I>, the current process id and (as an extension) a unique sequence number. If the <I>tmpdir</I> parameter is not supplied, it defaults to the value of one of the environment variables <CODE>TMPDIR</CODE>, <CODE>TMP</CODE>, or <CODE>TEMP</CODE>, or to the directory <CODE>/tmp</CODE>. 
<P></P>The file is then opened using mode ``w+'', which allows reading and writing and deletes any existing content (see Table 22.5 on page 326). 
<P></P></TD></TR></TBODY></TABLE>
<P></P><TR><TD bgcolor="#ff9999" valign="center"><FONT size=4><B><A name=Tempfile.open>open</A> </B></FONT></TD><TD bgcolor="#ffaaaa">Tempfile.open( <I>basename</I>, <I>tmpdir</I> ) -&gt; <I>ref</I> </TD></TR><TD></TD><TD>
<P></P>Synonym for <CODE>Tempfile.new</CODE>. 
<P></P></TD>
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>instance methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Tempfile.close>close</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.close( <I>final</I>=<CODE>false</CODE> ) </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Closes <I>ref</I>. If <I>final</I> is <CODE>true</CODE>, deletes the underlying real file. If <I>final</I> is <CODE>false</CODE>, <I>ref</I> may be subsequently reopened. In all cases, the underlying file is deleted when the program terminates. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Tempfile.open>open</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.open </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Reopens <I>ref</I> using mode ``r+'', which allows reading and writing but does not delete existing content. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Tempfile.path>path</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.path -&gt; <I>aString</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns the full path of the underlying file. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE>
<TBODY>
<TR>
<TD height=20><IMG height=20 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<TABLE cellPadding=10 width="100%" bgColor=#660066 border=0>
<TBODY>
<TR>
<TD vAlign=center><FONT color=white size=7>class Mutex</FONT> </TD>
<TD>
<TABLE border=0>
<TBODY>
<TR>
<TD><FONT color=white>Parent: </FONT></TD>
<TD><FONT color=white>Object</FONT> </TD></TR>
<TR>
<TD><FONT color=white>Version: </FONT></TD>
<TD><FONT color=white>1.6 </FONT></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<P></P>
<H3>Index:</H3><I><A href="120.html#Mutex.lock">lock</A> </I><I><A href="120.html#Mutex.locked_qm">locked?</A> </I><I><A href="120.html#Mutex.synchronize">synchronize</A> </I><I><A href="120.html#Mutex.try_lock">try_lock</A> </I><I><A href="120.html#Mutex.unlock">unlock</A> </I>
<P></P>
<HR>

<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>require&nbsp;'thread'
sema4&nbsp;=&nbsp;Mutex.new
<P></P>
a&nbsp;=&nbsp;Thread.new&nbsp;{
&nbsp;&nbsp;sema4.synchronize&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;access&nbsp;shared&nbsp;resource
&nbsp;&nbsp;}
}
<P></P>
b&nbsp;=&nbsp;Thread.new&nbsp;{
&nbsp;&nbsp;sema4.synchronize&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;access&nbsp;shared&nbsp;resource
&nbsp;&nbsp;}
}
</PRE></TD></TR></TBODY></TABLE>
<P></P><CODE>Mutex</CODE> implements a simple semaphore that can be used to coordinate access to shared data from multiple concurrent threads. 
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>instance methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Mutex.lock>lock</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.lock -&gt; <I>ref</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Attempts to grab the lock and waits if it isn't available. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Mutex.locked_qm>locked?</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.locked? -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns <CODE>true</CODE> if this lock is currently held by some thread. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Mutex.synchronize>synchronize</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.synchronize { block } -&gt; <I>ref</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Obtains a lock (using <CODE>Mutex#lock</CODE>), runs the block, and releases the lock when the block completes. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Mutex.try_lock>try_lock</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.try_lock -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Attempts to obtain the lock and returns immediately. Returns <CODE>true</CODE> if the lock was granted. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=Mutex.unlock>unlock</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.unlock -&gt; <I>ref</I> or <CODE>nil</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Releases the lock. Returns <CODE>nil</CODE> if <I>ref</I> wasn't locked. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE>
<TBODY>
<TR>
<TD height=20><IMG height=20 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<TABLE cellPadding=10 width="100%" bgColor=#660066 border=0>
<TBODY>
<TR>
<TD vAlign=center><FONT color=white size=7>class ConditionVariable</FONT> </TD>
<TD>
<TABLE border=0>
<TBODY>
<TR>
<TD><FONT color=white>Parent: </FONT></TD>
<TD><FONT color=white>Object</FONT> </TD></TR>
<TR>
<TD><FONT color=white>Version: </FONT></TD>
<TD><FONT color=white>1.6 </FONT></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<P></P>
<H3>Index:</H3><I><A href="120.html#ConditionVariable.broadcast">broadcast</A> </I><I><A href="120.html#ConditionVariable.signal">signal</A> </I><I><A href="120.html#ConditionVariable.wait">wait</A> </I>
<P></P>
<HR>

<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>require&nbsp;'thread'
mutex&nbsp;=&nbsp;Mutex.new
resource&nbsp;=&nbsp;ConditionVariable.new
<P></P>
a&nbsp;=&nbsp;Thread.new&nbsp;{
&nbsp;&nbsp;mutex.synchronize&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Thread&nbsp;'a'&nbsp;now&nbsp;needs&nbsp;the&nbsp;resource
&nbsp;&nbsp;&nbsp;&nbsp;resource.wait(mutex)
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;'a'&nbsp;can&nbsp;now&nbsp;have&nbsp;the&nbsp;resource
&nbsp;&nbsp;}
}
<P></P>
b&nbsp;=&nbsp;Thread.new&nbsp;{
&nbsp;&nbsp;mutex.synchronize&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Thread&nbsp;'b'&nbsp;has&nbsp;finished&nbsp;using&nbsp;the&nbsp;resource
&nbsp;&nbsp;&nbsp;&nbsp;resource.signal
&nbsp;&nbsp;}
}
</PRE></TD></TR></TBODY></TABLE>
<P></P><CODE>ConditionVariable</CODE> objects augment class <CODE>Mutex</CODE>. Using condition variables, it is possible to suspend while in the middle of a critical section until a resource becomes available (see the discussion on page 117). 
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>instance methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=ConditionVariable.broadcast>broadcast</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.broadcast </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Wakes up all threads waiting for this lock. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=ConditionVariable.signal>signal</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.signal </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Wakes up the first thread in line waiting for this lock. 
<P></P></TD>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=ConditionVariable.wait>wait</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.wait( <I>aMutex</I> ) -&gt; <I>aMutex</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Releases the lock held in <I>aMutex</I> and waits; reacquires the lock on wakeup. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE cellPadding=10 width="100%" bgColor=#660066 border=0>
<TBODY>
<TR>
<TD vAlign=center><FONT color=white size=7>Library: timeout</FONT> </TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>require&nbsp;"timeout"
<P></P>
for&nbsp;snooze&nbsp;in&nbsp;1..2
&nbsp;&nbsp;puts&nbsp;"About&nbsp;to&nbsp;sleep&nbsp;for&nbsp;#{snooze}"
&nbsp;&nbsp;timeout(1.5)&nbsp;do
&nbsp;&nbsp;&nbsp;&nbsp;sleep(snooze)
&nbsp;&nbsp;end
&nbsp;&nbsp;puts&nbsp;"That&nbsp;was&nbsp;refreshing"
end
</PRE></TD></TR></TBODY></TABLE><EM>produces:</EM> 
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>About&nbsp;to&nbsp;sleep&nbsp;for&nbsp;1
That&nbsp;was&nbsp;refreshing
About&nbsp;to&nbsp;sleep&nbsp;for&nbsp;2
/tc/usr/lib/ruby/1.6/timeout.rb:37:&nbsp;execution&nbsp;expired&nbsp;(TimeoutError)
	from&nbsp;prog.rb:5:in&nbsp;`timeout'
	from&nbsp;prog.rb:5
	from&nbsp;prog.rb:3:in&nbsp;`each'
	from&nbsp;prog.rb:3
</PRE></TD></TR></TBODY></TABLE>
<P></P>The <CODE>timeout</CODE> method takes a single parameter, representing a timeout period in seconds, and a block. The block is executed, and a timer is run concurrently. If the block terminates before the timeout, <CODE>timeout</CODE> returns <CODE>true</CODE>. Otherwise, a <CODE>TimeoutError</CODE> exception is raised. 
<P></P>
<P></P>
<TABLE>
<TBODY>
<TR>
<TD height=20><IMG height=20 src="120_files/dot[1].gif"  width=1></TD></TR></TBODY></TABLE>
<TABLE cellPadding=10 width="100%" bgColor=#660066 border=0>
<TBODY>
<TR>
<TD vAlign=center><FONT color=white size=7>class WeakRef</FONT> </TD>
<TD>
<TABLE border=0>
<TBODY>
<TR>
<TD><FONT color=white>Parent: </FONT></TD>
<TD><FONT color=white>Delegator</FONT> </TD></TR>
<TR>
<TD><FONT color=white>Version: </FONT></TD>
<TD><FONT color=white>1.6 </FONT></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<P></P>
<H3>Index:</H3><A href="120.html#WeakRef.new">new</A> <I><A href="120.html#WeakRef.weakref_alive_qm">weakref_alive?</A> </I>
<P></P>
<HR>

<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>require&nbsp;"weakref"
<P></P>
ref&nbsp;=&nbsp;"fol&nbsp;de&nbsp;rol"
puts&nbsp;"Initial&nbsp;object&nbsp;is&nbsp;#{ref}"
ref&nbsp;=&nbsp;WeakRef.new(ref)
puts&nbsp;"Weak&nbsp;reference&nbsp;is&nbsp;#{ref}"
ObjectSpace.garbage_collect
puts&nbsp;"But&nbsp;then&nbsp;it&nbsp;is&nbsp;#{ref}"
</PRE></TD></TR></TBODY></TABLE><EM>produces:</EM> 
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>Initial&nbsp;object&nbsp;is&nbsp;fol&nbsp;de&nbsp;rol
Weak&nbsp;reference&nbsp;is&nbsp;fol&nbsp;de&nbsp;rol
prog.rb:8:&nbsp;Illegal&nbsp;Reference&nbsp;-&nbsp;probably&nbsp;recycled&nbsp;(WeakRef::RefError)
</PRE></TD></TR></TBODY></TABLE>
<P></P>In Ruby, objects are not eligible for garbage collection if there are still references to them. Normally, this is a Good Thing---it would be disconcerting to have an object simply evaporate while you were using it. However, sometimes you may need more flexibility. For example, you might want to implement an in-memory cache of commonly used file contents. As you read more files, the cache grows. At some point, you may run low on memory. The garbage collector will be invoked, but the objects in the cache are all referenced by the cache data structures, and so will not be deleted. 
<P></P>A weak reference behaves exactly as any normal object reference with one important exception---the referenced object may be garbage collected, even while references to it exist. In the cache example, if the cached files were accessed using weak references, once memory runs low they will be garbage collected, freeing memory for the rest of the application. 
<P></P>Weak references introduce a slight complexity. As the object referenced can be deleted by garbage collection at any time, code that accesses these objects must take care to ensure that the references are valid. Two techniques can be used. First, the code can reference the objects normally. Any attempt to reference an object that has been garbage collected will raise a <CODE>WeakRef::RefError</CODE> exception. 
<P></P>An alternative approach is to use the <CODE>WeakRef#weakref_alive?</CODE> method to check that a reference is valid before using it. Garbage collection must be disabled during the test and subsequent reference to the object. In a single-threaded program, you could use something like: 
<P></P>
<TABLE class=codebox cellSpacing=0 cellPadding=3 width=400 border=0>
<TBODY>
<TR>
<TD><PRE>ref&nbsp;=&nbsp;WeakRef.new(someObject)
#
#&nbsp;..&nbsp;some&nbsp;time&nbsp;later
#
<P></P>
gcWasDisabled&nbsp;=&nbsp;GC.disable
if&nbsp;ref.weakref_alive?
&nbsp;&nbsp;#&nbsp;do&nbsp;stuff&nbsp;with&nbsp;'ref'
end
GC.enable&nbsp;unless&nbsp;gcWasDisabled
</PRE></TD></TR></TBODY></TABLE>
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>class methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=WeakRef.new>new</A> </B></FONT></TD>
<TD bgColor=#ffaaaa>WeakRef.new( <I>anObject</I> ) -&gt; <I>ref</I> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Creates and returns a weak reference to <I>anObject</I>. All future references to <I>anObject</I> should be made using <I>ref</I>. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>
<TABLE cellPadding=10 width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=center bgColor=#990066 colSpan=2><FONT color=white size=6>instance methods </FONT></TD></TR>
<TR>
<TD vAlign=center bgColor=#ff9999><FONT size=4><B><A name=WeakRef.weakref_alive_qm>weakref_alive?</A> </B></FONT></TD>
<TD bgColor=#ffaaaa><I>ref</I>.weakref_alive? -&gt; <CODE>true</CODE> or <CODE>false</CODE> </TD></TR>
<TR>
<TD></TD>
<TD>
<P></P>Returns <CODE>false</CODE> if the object referenced by <I>ref</I> has been garbage collected. 
<P></P></TD></TR></TBODY></TABLE>
<P></P>
<P></P>
<P></P>
<HR>

<TABLE cellSpacing=0 cellPadding=10 bgColor=#a03030 border=0>
<TBODY>
<TR>
<TD align=left width="33%"><A class=subheader href="119.html" >Previous &lt;</A> </TD>
<TD vAlign=center align=middle width="33%"><A class=subheader href="95.html" >Contents ^</A> <BR></TD>
<TD align=right width="33%"><A class=subheader href="121.html" >Next &gt;</A> <BR></TD></TR></TBODY></TABLE>
<P></P><FONT size=-1>Extracted from the book "Programming Ruby - The Pragmatic Programmer's Guide"</FONT> <BR><FONT size=-3>Copyright  2001 by Addison Wesley Longman, Inc. This material may be distributed only subject to the terms and conditions set forth in the Open Publication License, v1.0 or later (the latest version is presently available at <A href="http://www.opencontent.org/openpub/" >http://www.opencontent.org/openpub/</A>)). 
<P></P>Distribution of substantively modified versions of this document is prohibited without the explicit permission of the copyright holder. 
<P></P>Distribution of the work or derivative of the work in any standard (paper) book form is prohibited unless prior permission is obtained from the copyright holder. <BR></FONT></BODY>