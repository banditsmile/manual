<html><HEAD><TITLE>21、全局变量 - RUBY文档中心</TITLE>
<STYLE type=text/css>
<!--
.code2 {font-size:14.7px;font-family:arial;color:#00009a;line-height:150%;background-color:#EFEFEF;height=25px;vertical-align=middle;margin-left: 20px;}
.code {font-size:14.7px;font-family:arial;color:#00009a;background-color:#EFEFEF;line-height: 150%}
.quote {font-size:14.7px;font-family:arial;color:#666666;line-height:150%;}
-->
</STYLE>

<META http-equiv=Content-Type content="text/html; charset=gb2312"><LINK href="32_files/news[1].css"  rel=stylesheet></head>
<BODY topMargin=0>
<STYLE type=text/css>
<!--
body {
	margin-top: 50px;
}
.style12 {font-size: 33px}
.style15 {
	font-family: Georgia, "Times New Roman", Times, serif;
	font-weight: bold;
}
.style17 {font-family: "黑体", "楷体_GB2312", "新宋体"}
.style18 {font-size: 12px}
-->
</STYLE>

<TABLE style="BORDER-RIGHT: #929292 1px groove; BORDER-LEFT: #929292 1px groove" cellSpacing=0 cellPadding=3 width=772 align=center bgColor=#ffffff border=0>
<TBODY>
<TR>
<TD height=20></TD></TR>
<TR>
<TD bgColor=#8acd38 height=30>&nbsp;</TD></TR>
<TR>
<TD height=50></TD></TR></TBODY></TABLE>
<TABLE style="BORDER-RIGHT: #929292 1px groove; BORDER-LEFT: #ffffff 1px groove" borderColor=#ffffff cellSpacing=0 cellPadding=3 width=772 align=center bgColor=#ffffff border=0>
<TBODY>
<TR>
<TD align=middle>
<DIV class=moer-title><IMG src="51_files/logo_read[1].gif" > 21、全局变量</DIV>
<P>转帖：oasis_me　　发表时间：2005-6-15 21:27:59　　点击次数：290 </P></TD></TR>
<TR>
<TD height=50></TD></TR></TBODY></TABLE>
<TABLE style="BORDER-RIGHT: #929292 1px groove; BORDER-LEFT: #ffffff 1px groove" borderColor=#ffffff cellSpacing=0 cellPadding=3 width=772 align=center bgColor=#ffffff border=0>
<TBODY>
<TR>
<TD width="10%" bgColor=#ffffff>&nbsp;</TD>
<TD class=moer-ask vAlign=top align=left width="5%" bgColor=#ffffff>&nbsp;</TD>
<TD vAlign=top align=left width="75%">
<TABLE cellSpacing=0 cellPadding=0>
<TBODY>
<TR>
<TD class=moer-content vAlign=top align=left>全局变量由$开头.它们可以在程序的任何位置访问到.在初始化前,全局变量有一个特殊的值&nbsp;nil.<BR><BR>
<TABLE cellSpacing=0 cellPadding=5 width="100%">
<TBODY>
<TR>
<TD class=code id=code>ruby&gt;&nbsp;$foo<BR>&nbsp;&nbsp;&nbsp;nil<BR>ruby&gt;&nbsp;$foo&nbsp;=&nbsp;5<BR>&nbsp;&nbsp;&nbsp;5<BR>ruby&gt;&nbsp;$foo<BR>&nbsp;&nbsp;&nbsp;5&nbsp;</TD></TR></TBODY></TABLE><BR><BR>应谨慎使用全局变量.由于在任何地方都可以被写因此他们相当危险.滥用全局变量会导致很难隔离臭虫;同时也视为程序的设计未经严格考虑.当你发现必须要使用全局变量时,记得给它一个不会在其它地方一不小心就用到的描述性名字(像上面那样叫$foo可能不是一个好想法).<BR><BR>全局变量的好处是其可以被跟踪;你可以做一个当变量值改变时被调用的过程.<BR><BR>
<TABLE cellSpacing=0 cellPadding=5 width="100%">
<TBODY>
<TR>
<TD class=code id=code>ruby&gt;&nbsp;trace_var&nbsp;:$x,&nbsp;proc{print&nbsp;"$x&nbsp;is&nbsp;now&nbsp;",&nbsp;$x,&nbsp;"\n"}<BR>&nbsp;&nbsp;&nbsp;nil<BR>ruby&gt;&nbsp;$x&nbsp;=&nbsp;5<BR>$x&nbsp;is&nbsp;now&nbsp;5<BR>&nbsp;&nbsp;&nbsp;5&nbsp;</TD></TR></TBODY></TABLE><BR><BR>当一个全局变量(改变时)作为一个过程的激发器,我们也管它叫活动变量(active&nbsp;variable).比如说,它可用于保持GUI显示的更新.<BR><BR>这里列出了一些以$打头并跟单个字符的特殊变量.比如,$$包含了Ruby解释器的进程id,它是只读的.这里是主要的系统变量以及它们的含义(细节可在Ruby的参考手册中查到):<BR><BR>$!&nbsp;&nbsp;最近一次的错误信息&nbsp;<BR>$@&nbsp;&nbsp;错误产生的位置&nbsp;<BR>$_&nbsp;&nbsp;gets最近读的字符串&nbsp;&nbsp;<BR>$.&nbsp;&nbsp;解释器最近读的行数(line&nbsp;number)&nbsp;<BR>$&amp;&nbsp;&nbsp;最近一次与正则表达式匹配的字符串&nbsp;<BR>$~&nbsp;&nbsp;作为子表达式组的最近一次匹配&nbsp;&nbsp;<BR>$n&nbsp;&nbsp;最近匹配的第n个子表达式(和$~[n]一样)&nbsp;&nbsp;<BR>$=&nbsp;&nbsp;是否区别大小写的标志&nbsp;&nbsp;<BR>$/&nbsp;&nbsp;输入记录分隔符&nbsp;<BR>$\&nbsp;&nbsp;输出记录分隔符&nbsp;<BR>$0&nbsp;&nbsp;Ruby脚本的文件名&nbsp;<BR>$*&nbsp;&nbsp;命令行参数&nbsp;<BR>$$&nbsp;&nbsp;解释器进程ID&nbsp;<BR>$?&nbsp;&nbsp;最近一次执行的子进程退出状态&nbsp;<BR><BR>上面的&nbsp;$_&nbsp;和&nbsp;$~&nbsp;都有作用范围.它们的名字暗示其为全局的,但它们一般都是这样用的,关于它们的命名有历史上的原因.</TD></TR>
<TR>
<TD class=moer-content vAlign=top align=left height=30></TD></TR>
<TR>
<TD vAlign=top align=left><SPAN style="FONT-WEIGHT: bold; FONT-SIZE: 12px">版权声明：</SPAN>RUBY文档中心的所有文章标明[<B>原创</B>]的均为本站作品，版权属RUBY中文化计划，若转载请注明；标明[<B>翻译</B>]的其外文版权归原作者，译文版权属RUBY中文化计划；标明[<B>转贴</B>]的，若原作者感到侵犯了他的著作权，那么请及时跟主持人联系，我们会尽快更正。</TD></TR></TBODY></TABLE></TD>
<TD width="10%" bgColor=#ffffff>&nbsp;</TD></TR></TBODY></TABLE>
<STYLE type=text/css>
<!--
body {
	margin-bottom: 20px;
}
-->
</STYLE>

<TABLE style="BORDER-RIGHT: #929292 1px groove; BORDER-LEFT: #929292 1px groove; BORDER-BOTTOM: #929292 1px groove" cellSpacing=0 cellPadding=0 width=772 align=center>
<TBODY>
<TR>
<TD bgColor=#ffffff>
<DIV align=center>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><IMG height=11 src="55_files/logo_small[1].gif"  width=8> 版权所有(C) <A href="http://www.moer.net/ruby/index.asp" >RUBY中文化计划</A></P>
<P>&nbsp;</P>
<P>&nbsp;</P></DIV></TD></TR></TBODY></TABLE>
<DIV align=center></DIV>
<div style="display:none;">
<script type="text/javascript" src="http://shouce.jb51.net/js/stat.js" ></script>
</div>
</BODY>