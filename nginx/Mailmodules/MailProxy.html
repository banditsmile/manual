<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<HTML xmlns="http://www.w3.org/1999/xhtml">
<HEAD><TITLE>邮件代理模块（Mail Proxy）</TITLE>
<META http-equiv=Content-Type content="text/html; charset=GB2312">
<STYLE type=text/css>PRE {
	BACKGROUND-COLOR: #cccccc
}
.STYLE1 {
	COLOR: #ff0000
}
</STYLE>

<META content="MSHTML 6.00.6000.16809" name=GENERATOR></HEAD>
<BODY>
<H2>邮件代理模块（Mail Proxy）</H2><BR>

<H3>・摘要</H3>
<H4>nginx可以代理IMAP, POP3,和SMTP协议。</H4>
<H3>・指令</H3>
<H3> proxy </H3>
<H4>语法：proxy on | off <BR>
默认值：off <BR>
使用字段：mail, server <BR>
设置是否启用邮件代理。</H4>
<H3>proxy_buffer </H3>
<H4>语法：proxy_buffer size <BR>
默认值：4K/8K <BR>
使用字段：mail, server <BR>
为代理连接设置缓冲区大小，默认为分页大小，根据不同的操作系统可能是4k或8k。</H4>
<H3>proxy_pass_error_message </H3>
<H4>语法：proxy_pass_error_message on | off <BR>
默认值：off <BR>
使用字段：mail, server<BR>
可以把从后端获取的错误认证信息传递到客户端，通常如果通过了nginx的认证，那么后端的错误信息无法传递到客户端。<BR>
但是一些正确密码应答中的POP3错误，如<A href="http://www.stalker.com/" >CommuniGatePro</A>通知用户一个关于邮箱超出容量限制（或者其它事件）将在认证中周期性的发出错误，在这种情况下有必要打开proxy_error_message。</H4>
<H3>proxy_timeout</H3>
<H4>语法：proxy_timeout time <BR>
默认值：24h <BR>
使用字段：mail, server <BR>
为代理连接设置超时时间。</H4>
<H3> xclient </H3>
<H4>语法：xclient on | off  <BR>
默认值：on <BR>
使用字段：mail, server <BR>
是否为SMTP后端连接启用XCLIENT命令，这将允许后端强制客户端连接建立在IP/HELO/LOGIN上。<BR>
如果xclient启用，那么nginx首先转发到后端：<BR>
<PRE>EHLO server_name</PRE>
然后：<PRE>XCLIENT PROTO=ESMTP HELO=client_helo ADDR=client_ip LOGIN=authentificated_user NAME=[UNAVAILABLE] </PRE>
</H4>
<H3>・参考文档</H3>
<H4><A href="http://wiki.nginx.org/NginxMailProxyModule/" >Nginx Mail Proxy Module</A></H4>
<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://179401.cn/analytics/" : "http://179401.cn/analytics/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://shouce.jb51.net/179401.cn/analytics/piwik.php-idsite=1"  style="border:0" alt=""/></p></noscript>
<!-- End Piwik Tag -->
</BODY>
</HTML>
<H3><A href="MailSSL.html" >前进->邮件SSL认证模块（Mail SSL）</A></H3>