<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<HTML xmlns="http://www.w3.org/1999/xhtml">
<HEAD><TITLE>HTTP访问控制模块（HTTP Access）</TITLE>
<META http-equiv=Content-Type content="text/html; charset=GB2312">
<STYLE type=text/css>PRE {
	BACKGROUND-COLOR: #cccccc
}
.STYLE1 {
	COLOR: #ff0000
}
</STYLE>

<META content="MSHTML 6.00.6000.16809" name=GENERATOR></HEAD>
<BODY>
<H2>HTTP访问控制模块（HTTP Access）</H2><BR>

<H3>・摘要</H3>
<H4>这个模块提供简单的基于主机的访问控制。<BR>
ngx_http_access_module这个模块可以详细的检查客户端IP，并且按顺序执行第一条匹配的规则。<BR>
如下例：<BR>
<PRE>location / {
  deny    192.168.1.1;
  allow   192.168.1.0/24;
  allow   10.1.1.0/16;
  deny    all;
}</PRE>
上面的例子中仅允许192.168.1.0/24和10.1.1.0/16网络段访问，但192.168.1.1是个例外。<BR>
如果要实施很多复杂的规则，那么最好使用GeoIP module模块。<BR></H4>
<H3>・指令</H3>
<H3> allow </H3>
<H4>语法：allow [ address | CIDR | all ] <BR>
默认值：no <BR>
使用字段：http, server, location, limit_except <BR>
指令指定了允许访问的IP或网络段。</H4>
<H3> deny </H3>
<H4>语法：deny [ address | CIDR | all ] <BR>
默认值：no <BR>
使用字段：http, server, location, limit_except <BR>
指令指定了拒绝访问的IP或网络段。</H4>
<H3>・提示和技巧</H3>
<H4>HttpAccess模块可以和error_page指令搭配使用来重定向一个未经验证的访问请求。
<PRE>error_page  403  http://example.com/forbidden.html;
location / {
  deny    192.168.1.1;
  allow   192.168.1.0/24;
  allow   10.1.1.0/16;
  deny    all;
}</PRE></H4>
<H3>・参考文档</H3>
<H4><A href="http://sysoev.ru/nginx/docs/http/ngx_http_core_module.html" >Original Documentation</A><BR>
<A href="http://wiki.nginx.org/NginxHttpAccessModule/" >Nginx Http Access Module</A></H4>
<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://179401.cn/analytics/" : "http://179401.cn/analytics/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://shouce.jb51.net/179401.cn/analytics/piwik.php-idsite=1"  style="border:0" alt=""/></p></noscript>
<!-- End Piwik Tag -->
</BODY>
</HTML>
<H3><A href="HTTPAuthBasic.html" >前进->HTTP基本认证模块（HTTP Auth Basic）</A></H3>